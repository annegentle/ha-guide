<?xml version="1.0" encoding="utf-8"?><fo:root xmlns:fo="http://www.w3.org/1999/XSL/Format" font-family="CartoGothic Std" font-size="10.5pt" text-align="start" line-height="normal" font-selection-strategy="character-by-character" line-height-shift-adjustment="disregard-shifts" writing-mode="lr-tb" language="en"><fo:layout-master-set><fo:simple-page-master master-name="blank" page-width="8.5in" page-height="11in" margin-top="0.5in" margin-bottom="0.5in" margin-left="1in" margin-right="1in"><fo:region-body display-align="center" margin-bottom="0.5in" margin-top="0.5in"/><fo:region-before region-name="xsl-region-before-blank" extent="0.4in" display-align="before"/><fo:region-after region-name="xsl-region-after-blank" extent="0.4in" display-align="after"/></fo:simple-page-master><fo:simple-page-master master-name="titlepage-first" page-width="8.5in" page-height="11in" margin-top="0.5in" margin-bottom="0.5in" margin-left="1in" margin-right="1in"><fo:region-body margin-bottom="0.5in" margin-top="0.5in" column-gap="12pt" column-count="1"/><fo:region-before region-name="xsl-region-before-first" extent="0.4in" display-align="before"/><fo:region-after region-name="xsl-region-after-first" extent="0.4in" display-align="after"/></fo:simple-page-master><fo:simple-page-master master-name="titlepage-odd" page-width="8.5in" page-height="11in" margin-top="0.5in" margin-bottom="0.5in" margin-left="1in" margin-right="1in"><fo:region-body margin-bottom="0.5in" margin-top="0.5in" column-gap="12pt" column-count="1"/><fo:region-before region-name="xsl-region-before-odd" extent="0.4in" display-align="before"/><fo:region-after region-name="xsl-region-after-odd" extent="0.4in" display-align="after"/></fo:simple-page-master><fo:simple-page-master master-name="titlepage-even" page-width="8.5in" page-height="11in" margin-top="0.5in" margin-bottom="0.5in" margin-left="1in" margin-right="1in"><fo:region-body margin-bottom="0.5in" margin-top="0.5in" column-gap="12pt" column-count="1"/><fo:region-before region-name="xsl-region-before-even" extent="0.4in" display-align="before"/><fo:region-after region-name="xsl-region-after-even" extent="0.4in" display-align="after"/></fo:simple-page-master><fo:simple-page-master master-name="lot-first" page-width="8.5in" page-height="11in" margin-top="0.5in" margin-bottom="0.5in" margin-left="1in" margin-right="1in"><fo:region-body margin-bottom="0.5in" margin-top="0.5in" column-gap="12pt" column-count="1"/><fo:region-before region-name="xsl-region-before-first" extent="0.4in" display-align="before"/><fo:region-after region-name="xsl-region-after-first" extent="0.4in" display-align="after"/></fo:simple-page-master><fo:simple-page-master master-name="lot-odd" page-width="8.5in" page-height="11in" margin-top="0.5in" margin-bottom="0.5in" margin-left="1in" margin-right="1in"><fo:region-body margin-bottom="0.5in" margin-top="0.5in" column-gap="12pt" column-count="1"/><fo:region-before region-name="xsl-region-before-odd" extent="0.4in" display-align="before"/><fo:region-after region-name="xsl-region-after-odd" extent="0.4in" display-align="after"/></fo:simple-page-master><fo:simple-page-master master-name="lot-even" page-width="8.5in" page-height="11in" margin-top="0.5in" margin-bottom="0.5in" margin-left="1in" margin-right="1in"><fo:region-body margin-bottom="0.5in" margin-top="0.5in" column-gap="12pt" column-count="1"/><fo:region-before region-name="xsl-region-before-even" extent="0.4in" display-align="before"/><fo:region-after region-name="xsl-region-after-even" extent="0.4in" display-align="after"/></fo:simple-page-master><fo:simple-page-master master-name="front-first" page-width="8.5in" page-height="11in" margin-top="0.5in" margin-bottom="0.5in" margin-left="1in" margin-right="1in"><fo:region-body margin-bottom="0.5in" margin-top="0.5in" column-gap="12pt" column-count="1"/><fo:region-before region-name="xsl-region-before-first" extent="0.4in" display-align="before"/><fo:region-after region-name="xsl-region-after-first" extent="0.4in" display-align="after"/></fo:simple-page-master><fo:simple-page-master master-name="front-odd" page-width="8.5in" page-height="11in" margin-top="0.5in" margin-bottom="0.5in" margin-left="1in" margin-right="1in"><fo:region-body margin-bottom="0.5in" margin-top="0.5in" column-gap="12pt" column-count="1"/><fo:region-before region-name="xsl-region-before-odd" extent="0.4in" display-align="before"/><fo:region-after region-name="xsl-region-after-odd" extent="0.4in" display-align="after"/></fo:simple-page-master><fo:simple-page-master master-name="front-even" page-width="8.5in" page-height="11in" margin-top="0.5in" margin-bottom="0.5in" margin-left="1in" margin-right="1in"><fo:region-body margin-bottom="0.5in" margin-top="0.5in" column-gap="12pt" column-count="1"/><fo:region-before region-name="xsl-region-before-even" extent="0.4in" display-align="before"/><fo:region-after region-name="xsl-region-after-even" extent="0.4in" display-align="after"/></fo:simple-page-master><fo:simple-page-master master-name="body-first" page-width="8.5in" page-height="11in" margin-top="0.5in" margin-bottom="0.5in" margin-left="1in" margin-right="1in"><fo:region-body margin-bottom="0.5in" margin-top="0.5in" column-gap="12pt" column-count="1"/><fo:region-before region-name="xsl-region-before-first" extent="0.4in" display-align="before"/><fo:region-after region-name="xsl-region-after-first" extent="0.4in" display-align="after"/></fo:simple-page-master><fo:simple-page-master master-name="body-odd" page-width="8.5in" page-height="11in" margin-top="0.5in" margin-bottom="0.5in" margin-left="1in" margin-right="1in"><fo:region-body margin-bottom="0.5in" margin-top="0.5in" column-gap="12pt" column-count="1"/><fo:region-before region-name="xsl-region-before-odd" extent="0.4in" display-align="before"/><fo:region-after region-name="xsl-region-after-odd" extent="0.4in" display-align="after"/></fo:simple-page-master><fo:simple-page-master master-name="body-even" page-width="8.5in" page-height="11in" margin-top="0.5in" margin-bottom="0.5in" margin-left="1in" margin-right="1in"><fo:region-body margin-bottom="0.5in" margin-top="0.5in" column-gap="12pt" column-count="1"/><fo:region-before region-name="xsl-region-before-even" extent="0.4in" display-align="before"/><fo:region-after region-name="xsl-region-after-even" extent="0.4in" display-align="after"/></fo:simple-page-master><fo:simple-page-master master-name="back-first" page-width="8.5in" page-height="11in" margin-top="0.5in" margin-bottom="0.5in" margin-left="1in" margin-right="1in"><fo:region-body margin-bottom="0.5in" margin-top="0.5in" column-gap="12pt" column-count="1"/><fo:region-before region-name="xsl-region-before-first" extent="0.4in" display-align="before"/><fo:region-after region-name="xsl-region-after-first" extent="0.4in" display-align="after"/></fo:simple-page-master><fo:simple-page-master master-name="back-odd" page-width="8.5in" page-height="11in" margin-top="0.5in" margin-bottom="0.5in" margin-left="1in" margin-right="1in"><fo:region-body margin-bottom="0.5in" margin-top="0.5in" column-gap="12pt" column-count="1"/><fo:region-before region-name="xsl-region-before-odd" extent="0.4in" display-align="before"/><fo:region-after region-name="xsl-region-after-odd" extent="0.4in" display-align="after"/></fo:simple-page-master><fo:simple-page-master master-name="back-even" page-width="8.5in" page-height="11in" margin-top="0.5in" margin-bottom="0.5in" margin-left="1in" margin-right="1in"><fo:region-body margin-bottom="0.5in" margin-top="0.5in" column-gap="12pt" column-count="1"/><fo:region-before region-name="xsl-region-before-even" extent="0.4in" display-align="before"/><fo:region-after region-name="xsl-region-after-even" extent="0.4in" display-align="after"/></fo:simple-page-master><fo:simple-page-master master-name="index-first" page-width="8.5in" page-height="11in" margin-top="0.5in" margin-bottom="0.5in" margin-left="1in" margin-right="1in"><fo:region-body margin-bottom="0.5in" margin-top="0.5in" column-gap="12pt" column-count="2"/><fo:region-before region-name="xsl-region-before-first" extent="0.4in" display-align="before"/><fo:region-after region-name="xsl-region-after-first" extent="0.4in" display-align="after"/></fo:simple-page-master><fo:simple-page-master master-name="index-odd" page-width="8.5in" page-height="11in" margin-top="0.5in" margin-bottom="0.5in" margin-left="1in" margin-right="1in"><fo:region-body margin-bottom="0.5in" margin-top="0.5in" column-gap="12pt" column-count="2"/><fo:region-before region-name="xsl-region-before-odd" extent="0.4in" display-align="before"/><fo:region-after region-name="xsl-region-after-odd" extent="0.4in" display-align="after"/></fo:simple-page-master><fo:simple-page-master master-name="index-even" page-width="8.5in" page-height="11in" margin-top="0.5in" margin-bottom="0.5in" margin-left="1in" margin-right="1in"><fo:region-body margin-bottom="0.5in" margin-top="0.5in" column-gap="12pt" column-count="2"/><fo:region-before region-name="xsl-region-before-even" extent="0.4in" display-align="before"/><fo:region-after region-name="xsl-region-after-even" extent="0.4in" display-align="after"/></fo:simple-page-master><fo:page-sequence-master master-name="titlepage"><fo:repeatable-page-master-alternatives><fo:conditional-page-master-reference master-reference="blank" blank-or-not-blank="blank"/><fo:conditional-page-master-reference master-reference="titlepage-first" page-position="first"/><fo:conditional-page-master-reference master-reference="titlepage-odd" odd-or-even="odd"/><fo:conditional-page-master-reference odd-or-even="even" master-reference="titlepage-odd"/></fo:repeatable-page-master-alternatives></fo:page-sequence-master><fo:page-sequence-master master-name="lot"><fo:repeatable-page-master-alternatives><fo:conditional-page-master-reference master-reference="blank" blank-or-not-blank="blank"/><fo:conditional-page-master-reference master-reference="lot-first" page-position="first"/><fo:conditional-page-master-reference master-reference="lot-odd" odd-or-even="odd"/><fo:conditional-page-master-reference odd-or-even="even" master-reference="lot-odd"/></fo:repeatable-page-master-alternatives></fo:page-sequence-master><fo:page-sequence-master master-name="front"><fo:repeatable-page-master-alternatives><fo:conditional-page-master-reference master-reference="blank" blank-or-not-blank="blank"/><fo:conditional-page-master-reference master-reference="front-first" page-position="first"/><fo:conditional-page-master-reference master-reference="front-odd" odd-or-even="odd"/><fo:conditional-page-master-reference odd-or-even="even" master-reference="front-odd"/></fo:repeatable-page-master-alternatives></fo:page-sequence-master><fo:page-sequence-master master-name="body"><fo:repeatable-page-master-alternatives><fo:conditional-page-master-reference master-reference="blank" blank-or-not-blank="blank"/><fo:conditional-page-master-reference master-reference="body-first" page-position="first"/><fo:conditional-page-master-reference master-reference="body-odd" odd-or-even="odd"/><fo:conditional-page-master-reference odd-or-even="even" master-reference="body-odd"/></fo:repeatable-page-master-alternatives></fo:page-sequence-master><fo:page-sequence-master master-name="back"><fo:repeatable-page-master-alternatives><fo:conditional-page-master-reference master-reference="blank" blank-or-not-blank="blank"/><fo:conditional-page-master-reference master-reference="back-first" page-position="first"/><fo:conditional-page-master-reference master-reference="back-odd" odd-or-even="odd"/><fo:conditional-page-master-reference odd-or-even="even" master-reference="back-odd"/></fo:repeatable-page-master-alternatives></fo:page-sequence-master><fo:page-sequence-master master-name="index"><fo:repeatable-page-master-alternatives><fo:conditional-page-master-reference master-reference="blank" blank-or-not-blank="blank"/><fo:conditional-page-master-reference master-reference="index-first" page-position="first"/><fo:conditional-page-master-reference master-reference="index-odd" odd-or-even="odd"/><fo:conditional-page-master-reference odd-or-even="even" master-reference="index-odd"/></fo:repeatable-page-master-alternatives></fo:page-sequence-master><fo:simple-page-master xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" master-name="cloudpage-first" page-width="8.5in" page-height="11in" margin-top="0.0in" margin-bottom="0.0in" margin-left="0.0in" margin-right="0.0in"><fo:region-body margin-bottom="0.0in" margin-top="0.0in" column-gap="0pt" column-count="1"/><fo:region-before extent="11.0in" display-align="before" background-image="url(file:/Users/annegentle/src/ha-guide/doc/ha-guide/target/docbkx/images/cloud/cover.svg)" background-repeat="no-repeat" background-position-horizontal="0%" background-position-vertical="0%"/></fo:simple-page-master><fo:page-sequence-master xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" master-name="cloud-titlepage"><fo:repeatable-page-master-alternatives><fo:conditional-page-master-reference master-reference="blank" blank-or-not-blank="blank"/><fo:conditional-page-master-reference page-position="first" master-reference="cloudpage-first"/><fo:conditional-page-master-reference master-reference="titlepage-odd" odd-or-even="odd"/><fo:conditional-page-master-reference odd-or-even="even" master-reference="titlepage-odd"/></fo:repeatable-page-master-alternatives></fo:page-sequence-master></fo:layout-master-set><fo:declarations><x:xmpmeta xmlns:x="adobe:ns:meta/"><rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xapRights="http://ns.adobe.com/xap/1.0/rights/" rdf:about=""><xapRights:Marked>True</xapRights:Marked></rdf:Description><rdf:Description xmlns:dc="http://purl.org/dc/elements/1.1/" rdf:about=""><dc:rights><rdf:Alt><rdf:li xml:lang="x-default">Copyright © 2012-2014 OpenStack Contributors All rights reserved.</rdf:li></rdf:Alt></dc:rights><dc:title>OpenStack High Availability Guide</dc:title><dc:creator>Florian Haas</dc:creator></rdf:Description><rdf:Description xmlns:pdf="http://ns.adobe.com/pdf/1.3/" rdf:about=""/><rdf:Description xmlns:xmp="http://ns.adobe.com/xap/1.0/" rdf:about=""><xmp:CreatorTool>Cloud API Docs Plugin</xmp:CreatorTool></rdf:Description></rdf:RDF></x:xmpmeta></fo:declarations><fo:bookmark-tree><fo:bookmark xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="bk-ha-guide" starting-state="hide"><fo:bookmark-title>OpenStack High Availability Guide</fo:bookmark-title></fo:bookmark><fo:bookmark xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="toc...bk-ha-guide"><fo:bookmark-title>Table of Contents</fo:bookmark-title></fo:bookmark><fo:bookmark xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="ch-intro" starting-state="hide"><fo:bookmark-title>1. Introduction to OpenStack High Availability</fo:bookmark-title><fo:bookmark internal-destination="stateless-vs-stateful" starting-state="hide"><fo:bookmark-title>Stateless vs. Stateful services</fo:bookmark-title></fo:bookmark><fo:bookmark internal-destination="ap-intro" starting-state="hide"><fo:bookmark-title>Active/Passive</fo:bookmark-title></fo:bookmark><fo:bookmark internal-destination="aa-intro" starting-state="hide"><fo:bookmark-title>Active/Active</fo:bookmark-title></fo:bookmark></fo:bookmark><fo:bookmark xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="ha-using-active-passive" starting-state="hide"><fo:bookmark-title>Part I. HA using active/passive</fo:bookmark-title><fo:bookmark internal-destination="ch-pacemaker" starting-state="hide"><fo:bookmark-title>2. The Pacemaker cluster stack</fo:bookmark-title><fo:bookmark internal-destination="_install_packages" starting-state="hide"><fo:bookmark-title>Install packages</fo:bookmark-title></fo:bookmark><fo:bookmark internal-destination="_set_up_corosync" starting-state="hide"><fo:bookmark-title>Set up Corosync</fo:bookmark-title></fo:bookmark><fo:bookmark internal-destination="_starting_corosync" starting-state="hide"><fo:bookmark-title>Starting Corosync</fo:bookmark-title></fo:bookmark><fo:bookmark internal-destination="_start_pacemaker" starting-state="hide"><fo:bookmark-title>Start Pacemaker</fo:bookmark-title></fo:bookmark><fo:bookmark internal-destination="_set_basic_cluster_properties" starting-state="hide"><fo:bookmark-title>Set basic cluster properties</fo:bookmark-title></fo:bookmark></fo:bookmark><fo:bookmark internal-destination="ch-controller" starting-state="hide"><fo:bookmark-title>3. Cloud controller cluster stack</fo:bookmark-title><fo:bookmark internal-destination="s-mysql" starting-state="hide"><fo:bookmark-title>Highly available MySQL</fo:bookmark-title><fo:bookmark internal-destination="_configure_drbd" starting-state="hide"><fo:bookmark-title>Configure DRBD</fo:bookmark-title></fo:bookmark><fo:bookmark internal-destination="_creating_a_file_system" starting-state="hide"><fo:bookmark-title>Creating a file system</fo:bookmark-title></fo:bookmark><fo:bookmark internal-destination="_prepare_mysql_for_pacemaker_high_availability" starting-state="hide"><fo:bookmark-title>Prepare MySQL for Pacemaker high availability</fo:bookmark-title></fo:bookmark><fo:bookmark internal-destination="_add_mysql_resources_to_pacemaker" starting-state="hide"><fo:bookmark-title>Add MySQL resources to Pacemaker</fo:bookmark-title></fo:bookmark><fo:bookmark internal-destination="_configure_openstack_services_for_highly_available_mysql" starting-state="hide"><fo:bookmark-title>Configure OpenStack services for highly available MySQL</fo:bookmark-title></fo:bookmark></fo:bookmark><fo:bookmark internal-destination="s-rabbitmq" starting-state="hide"><fo:bookmark-title>Highly available RabbitMQ</fo:bookmark-title><fo:bookmark internal-destination="_configure_drbd_2" starting-state="hide"><fo:bookmark-title>Configure DRBD</fo:bookmark-title></fo:bookmark><fo:bookmark internal-destination="_create_a_file_system" starting-state="hide"><fo:bookmark-title>Create a file system</fo:bookmark-title></fo:bookmark><fo:bookmark internal-destination="_prepare_rabbitmq_for_pacemaker_high_availability" starting-state="hide"><fo:bookmark-title>Prepare RabbitMQ for Pacemaker high availability</fo:bookmark-title></fo:bookmark><fo:bookmark internal-destination="_add_rabbitmq_resources_to_pacemaker" starting-state="hide"><fo:bookmark-title>Add RabbitMQ resources to Pacemaker</fo:bookmark-title></fo:bookmark><fo:bookmark internal-destination="_configure_openstack_services_for_highly_available_rabbitmq" starting-state="hide"><fo:bookmark-title>Configure OpenStack services for highly available RabbitMQ</fo:bookmark-title></fo:bookmark></fo:bookmark></fo:bookmark><fo:bookmark internal-destination="ch-api" starting-state="hide"><fo:bookmark-title>4. API node cluster stack</fo:bookmark-title><fo:bookmark internal-destination="s-api-vip" starting-state="hide"><fo:bookmark-title>Configure the VIP</fo:bookmark-title></fo:bookmark><fo:bookmark internal-destination="s-keystone" starting-state="hide"><fo:bookmark-title>Highly available OpenStack Identity</fo:bookmark-title><fo:bookmark internal-destination="_add_openstack_identity_resource_to_pacemaker" starting-state="hide"><fo:bookmark-title>Add OpenStack Identity resource to Pacemaker</fo:bookmark-title></fo:bookmark><fo:bookmark internal-destination="_configure_openstack_identity_service" starting-state="hide"><fo:bookmark-title>Configure OpenStack Identity service</fo:bookmark-title></fo:bookmark><fo:bookmark internal-destination="_configure_openstack_services_to_use_the_highly_available_openstack_identity" starting-state="hide"><fo:bookmark-title>Configure OpenStack services to use the highly available OpenStack Identity</fo:bookmark-title></fo:bookmark></fo:bookmark><fo:bookmark internal-destination="s-glance-api" starting-state="hide"><fo:bookmark-title>Highly available OpenStack Image API</fo:bookmark-title><fo:bookmark internal-destination="_add_openstack_image_api_resource_to_pacemaker" starting-state="hide"><fo:bookmark-title>Add OpenStack Image API resource to Pacemaker</fo:bookmark-title></fo:bookmark><fo:bookmark internal-destination="_configure_openstack_image_service_api" starting-state="hide"><fo:bookmark-title>Configure OpenStack Image Service API</fo:bookmark-title></fo:bookmark><fo:bookmark internal-destination="_configure_openstack_services_to_use_high_available_openstack_image_api" starting-state="hide"><fo:bookmark-title>Configure OpenStack services to use high available OpenStack Image API</fo:bookmark-title></fo:bookmark></fo:bookmark><fo:bookmark internal-destination="s-cinder-api" starting-state="hide"><fo:bookmark-title>Highly available Block Storage API</fo:bookmark-title><fo:bookmark internal-destination="_add_block_storage_api_resource_to_pacemaker" starting-state="hide"><fo:bookmark-title>Add Block Storage API resource to Pacemaker</fo:bookmark-title></fo:bookmark><fo:bookmark internal-destination="_configure_block_storage_api_service" starting-state="hide"><fo:bookmark-title>Configure Block Storage API service</fo:bookmark-title></fo:bookmark><fo:bookmark internal-destination="_configure_openstack_services_to_use_highly_available_block_storage_api" starting-state="hide"><fo:bookmark-title>Configure OpenStack services to use highly available Block Storage API</fo:bookmark-title></fo:bookmark></fo:bookmark><fo:bookmark internal-destination="s-neutron-server" starting-state="hide"><fo:bookmark-title>Highly available OpenStack Networking server</fo:bookmark-title><fo:bookmark internal-destination="_add_openstack_networking_server_resource_to_pacemaker" starting-state="hide"><fo:bookmark-title>Add OpenStack Networking Server resource to Pacemaker</fo:bookmark-title></fo:bookmark><fo:bookmark internal-destination="_configure_openstack_networking_server" starting-state="hide"><fo:bookmark-title>Configure OpenStack Networking server</fo:bookmark-title></fo:bookmark><fo:bookmark internal-destination="_configure_openstack_services_to_use_highly_available_openstack_networking_server" starting-state="hide"><fo:bookmark-title>Configure OpenStack services to use highly available OpenStack Networking server</fo:bookmark-title></fo:bookmark></fo:bookmark><fo:bookmark internal-destination="s-ceilometer-agent-central" starting-state="hide"><fo:bookmark-title>Highly available Telemetry central agent</fo:bookmark-title><fo:bookmark internal-destination="_add_the_telemetry_central_agent_resource_to_pacemaker" starting-state="hide"><fo:bookmark-title>Add the Telemetry central agent resource to Pacemaker</fo:bookmark-title></fo:bookmark><fo:bookmark internal-destination="_configure_telemetry_central_agent_service" starting-state="hide"><fo:bookmark-title>Configure Telemetry central agent service</fo:bookmark-title></fo:bookmark></fo:bookmark><fo:bookmark internal-destination="s-api-pacemaker" starting-state="hide"><fo:bookmark-title>Configure Pacemaker group</fo:bookmark-title></fo:bookmark></fo:bookmark><fo:bookmark internal-destination="ch-network" starting-state="hide"><fo:bookmark-title>5. Network controller cluster stack</fo:bookmark-title><fo:bookmark internal-destination="_highly_available_neutron_l3_agent" starting-state="hide"><fo:bookmark-title>Highly available neutron L3 agent</fo:bookmark-title><fo:bookmark internal-destination="_add_neutron_l3_agent_resource_to_pacemaker" starting-state="hide"><fo:bookmark-title>Add neutron L3 agent resource to Pacemaker</fo:bookmark-title></fo:bookmark></fo:bookmark><fo:bookmark internal-destination="_highly_available_neutron_dhcp_agent" starting-state="hide"><fo:bookmark-title>Highly available neutron DHCP agent</fo:bookmark-title><fo:bookmark internal-destination="_add_neutron_dhcp_agent_resource_to_pacemaker" starting-state="hide"><fo:bookmark-title>Add neutron DHCP agent resource to Pacemaker</fo:bookmark-title></fo:bookmark></fo:bookmark><fo:bookmark internal-destination="_highly_available_neutron_metadata_agent" starting-state="hide"><fo:bookmark-title>Highly available neutron metadata agent</fo:bookmark-title><fo:bookmark internal-destination="_add_neutron_metadata_agent_resource_to_pacemaker" starting-state="hide"><fo:bookmark-title>Add neutron metadata agent resource to Pacemaker</fo:bookmark-title></fo:bookmark></fo:bookmark><fo:bookmark internal-destination="_manage_network_resources" starting-state="hide"><fo:bookmark-title>Manage network resources</fo:bookmark-title></fo:bookmark></fo:bookmark></fo:bookmark><fo:bookmark xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="ha-using-active-active" starting-state="hide"><fo:bookmark-title>Part II. HA using active/active</fo:bookmark-title><fo:bookmark internal-destination="ha-aa-db" starting-state="hide"><fo:bookmark-title>6. Database</fo:bookmark-title><fo:bookmark internal-destination="ha-aa-db-mysql-galera" starting-state="hide"><fo:bookmark-title>MySQL with Galera</fo:bookmark-title><fo:bookmark internal-destination="_create_the_cluster" starting-state="hide"><fo:bookmark-title>Create the cluster</fo:bookmark-title></fo:bookmark></fo:bookmark><fo:bookmark internal-destination="ha-aa-db-galera-monitoring" starting-state="hide"><fo:bookmark-title>Galera monitoring scripts</fo:bookmark-title></fo:bookmark><fo:bookmark internal-destination="_other_ways_to_provide_a_highly_available_database" starting-state="hide"><fo:bookmark-title>Other ways to provide a highly available database</fo:bookmark-title></fo:bookmark></fo:bookmark><fo:bookmark internal-destination="ha-aa-rabbitmq" starting-state="hide"><fo:bookmark-title>7. RabbitMQ</fo:bookmark-title><fo:bookmark internal-destination="_install_rabbitmq" starting-state="hide"><fo:bookmark-title>Install RabbitMQ</fo:bookmark-title><fo:bookmark internal-destination="_on_ubuntu_debian" starting-state="hide"><fo:bookmark-title>On Ubuntu / Debian</fo:bookmark-title></fo:bookmark><fo:bookmark internal-destination="_on_fedora_rhel" starting-state="hide"><fo:bookmark-title>On Fedora / RHEL</fo:bookmark-title></fo:bookmark></fo:bookmark><fo:bookmark internal-destination="_configure_rabbitmq" starting-state="hide"><fo:bookmark-title>Configure RabbitMQ</fo:bookmark-title></fo:bookmark><fo:bookmark internal-destination="_configure_openstack_services_to_use_rabbitmq" starting-state="hide"><fo:bookmark-title>Configure OpenStack services to use RabbitMQ</fo:bookmark-title></fo:bookmark></fo:bookmark><fo:bookmark internal-destination="ha-aa-haproxy" starting-state="hide"><fo:bookmark-title>8. HAproxy nodes</fo:bookmark-title></fo:bookmark><fo:bookmark internal-destination="ha-aa-controllers" starting-state="hide"><fo:bookmark-title>9. OpenStack controller nodes</fo:bookmark-title><fo:bookmark internal-destination="_run_openstack_api_and_schedulers" starting-state="hide"><fo:bookmark-title>Run OpenStack API and schedulers</fo:bookmark-title><fo:bookmark internal-destination="_api_services" starting-state="hide"><fo:bookmark-title>API services</fo:bookmark-title></fo:bookmark><fo:bookmark internal-destination="_schedulers" starting-state="hide"><fo:bookmark-title>Schedulers</fo:bookmark-title></fo:bookmark></fo:bookmark><fo:bookmark internal-destination="_memcached" starting-state="hide"><fo:bookmark-title>Memcached</fo:bookmark-title></fo:bookmark></fo:bookmark><fo:bookmark internal-destination="ha-aa-network" starting-state="hide"><fo:bookmark-title>10. OpenStack network nodes</fo:bookmark-title><fo:bookmark internal-destination="_run_neutron_dhcp_agent" starting-state="hide"><fo:bookmark-title>Run neutron DHCP agent</fo:bookmark-title></fo:bookmark><fo:bookmark internal-destination="_run_neutron_l3_agent" starting-state="hide"><fo:bookmark-title>Run neutron L3 agent</fo:bookmark-title></fo:bookmark><fo:bookmark internal-destination="_run_neutron_metadata_agent" starting-state="hide"><fo:bookmark-title>Run neutron metadata agent</fo:bookmark-title></fo:bookmark></fo:bookmark></fo:bookmark><fo:bookmark xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="app_community_support" starting-state="hide"><fo:bookmark-title>Appendix A. Community support</fo:bookmark-title><fo:bookmark internal-destination="support-documentation" starting-state="hide"><fo:bookmark-title>Documentation</fo:bookmark-title></fo:bookmark><fo:bookmark internal-destination="support-ask_openstack" starting-state="hide"><fo:bookmark-title>ask.openstack.org</fo:bookmark-title></fo:bookmark><fo:bookmark internal-destination="support-mailing-lists" starting-state="hide"><fo:bookmark-title>OpenStack mailing lists</fo:bookmark-title></fo:bookmark><fo:bookmark internal-destination="support-wiki" starting-state="hide"><fo:bookmark-title>The OpenStack wiki</fo:bookmark-title></fo:bookmark><fo:bookmark internal-destination="support-bugs-area" starting-state="hide"><fo:bookmark-title>The Launchpad Bugs area</fo:bookmark-title></fo:bookmark><fo:bookmark internal-destination="support-irc-channel" starting-state="hide"><fo:bookmark-title>The OpenStack IRC channel</fo:bookmark-title></fo:bookmark><fo:bookmark internal-destination="support-documentation-feedback" starting-state="hide"><fo:bookmark-title>Documentation feedback</fo:bookmark-title></fo:bookmark><fo:bookmark internal-destination="distro-support" starting-state="hide"><fo:bookmark-title>OpenStack distribution packages</fo:bookmark-title></fo:bookmark></fo:bookmark></fo:bookmark-tree><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="bk-ha-guide"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="ch-intro"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="stateless-vs-stateful"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="ap-intro"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="aa-intro"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="ha-using-active-passive"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="ch-pacemaker"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="_install_packages"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="_set_up_corosync"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="_starting_corosync"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="_start_pacemaker"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="_set_basic_cluster_properties"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="ch-controller"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="s-mysql"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="_configure_drbd"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="_creating_a_file_system"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="_prepare_mysql_for_pacemaker_high_availability"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="_add_mysql_resources_to_pacemaker"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="_configure_openstack_services_for_highly_available_mysql"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="s-rabbitmq"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="_configure_drbd_2"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="_create_a_file_system"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="_prepare_rabbitmq_for_pacemaker_high_availability"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="_add_rabbitmq_resources_to_pacemaker"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="_configure_openstack_services_for_highly_available_rabbitmq"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="ch-api"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="s-api-vip"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="s-keystone"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="_add_openstack_identity_resource_to_pacemaker"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="_configure_openstack_identity_service"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="_configure_openstack_services_to_use_the_highly_available_openstack_identity"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="s-glance-api"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="_add_openstack_image_api_resource_to_pacemaker"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="_configure_openstack_image_service_api"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="_configure_openstack_services_to_use_high_available_openstack_image_api"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="s-cinder-api"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="_add_block_storage_api_resource_to_pacemaker"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="_configure_block_storage_api_service"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="_configure_openstack_services_to_use_highly_available_block_storage_api"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="s-neutron-server"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="_add_openstack_networking_server_resource_to_pacemaker"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="_configure_openstack_networking_server"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="_configure_openstack_services_to_use_highly_available_openstack_networking_server"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="s-ceilometer-agent-central"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="_add_the_telemetry_central_agent_resource_to_pacemaker"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="_configure_telemetry_central_agent_service"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="s-api-pacemaker"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="ch-network"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="_highly_available_neutron_l3_agent"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="_add_neutron_l3_agent_resource_to_pacemaker"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="_highly_available_neutron_dhcp_agent"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="_add_neutron_dhcp_agent_resource_to_pacemaker"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="_highly_available_neutron_metadata_agent"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="_add_neutron_metadata_agent_resource_to_pacemaker"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="_manage_network_resources"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="ha-using-active-active"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="ha-aa-db"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="ha-aa-db-mysql-galera"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="_create_the_cluster"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="ha-aa-db-galera-monitoring"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="_other_ways_to_provide_a_highly_available_database"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="ha-aa-rabbitmq"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="_install_rabbitmq"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="_on_ubuntu_debian"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="_on_fedora_rhel"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="_configure_rabbitmq"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="_configure_openstack_services_to_use_rabbitmq"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="ha-aa-haproxy"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="ha-aa-controllers"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="_run_openstack_api_and_schedulers"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="_api_services"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="_schedulers"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="_memcached"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="ha-aa-network"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="_run_neutron_dhcp_agent"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="_run_neutron_l3_agent"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="_run_neutron_metadata_agent"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="app_community_support"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="support-documentation"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="support-ask_openstack"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="support-mailing-lists"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="support-wiki"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="support-bugs-area"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="support-irc-channel"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="support-documentation-feedback"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="distro-support"/><fo:page-sequence xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" hyphenate="true" master-reference="cloud-titlepage" language="en" format="i" initial-page-number="1" force-page-count="no-force" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2"><fo:static-content xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" flow-name="xsl-region-before-first"><fo:block-container reference-orientation="90" absolute-position="fixed" top="-1in" overflow="visible" height="2in" width="30in" z-index="1"><fo:block padding-before=".45in" font-size="1.5em" color="gray" font-weight="bold"><fo:leader leader-pattern="use-content" leader-length="30in" letter-spacing=".1em">  </fo:leader></fo:block></fo:block-container><fo:block font-family="CartoGothic Std" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block>OpenStack High Availability Guide</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block>September 14, 2014</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block>current</fo:block></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" flow-name="xsl-region-before-odd"><fo:block-container reference-orientation="90" absolute-position="fixed" top="-1in" overflow="visible" height="2in" width="30in" z-index="1"><fo:block padding-before=".45in" font-size="1.5em" color="gray" font-weight="bold"><fo:leader leader-pattern="use-content" leader-length="30in" letter-spacing=".1em">  </fo:leader></fo:block></fo:block-container><fo:block font-family="CartoGothic Std" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block>OpenStack High Availability Guide</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block>September 14, 2014</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block>current</fo:block></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" flow-name="xsl-region-before-even"><fo:block-container reference-orientation="90" absolute-position="fixed" top="-1in" overflow="visible" height="2in" width="30in" z-index="1"><fo:block padding-before=".45in" font-size="1.5em" color="gray" font-weight="bold"><fo:leader leader-pattern="use-content" leader-length="30in" letter-spacing=".1em">  </fo:leader></fo:block></fo:block-container><fo:block font-family="CartoGothic Std" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block>OpenStack High Availability Guide</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block>September 14, 2014</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block>current</fo:block></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" flow-name="xsl-region-before-blank"><fo:block-container reference-orientation="90" absolute-position="fixed" top="-1in" overflow="visible" height="2in" width="30in" z-index="1"><fo:block padding-before=".45in" font-size="1.5em" color="gray" font-weight="bold"><fo:leader leader-pattern="use-content" leader-length="30in" letter-spacing=".1em">  </fo:leader></fo:block></fo:block-container><fo:block font-family="CartoGothic Std" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-footnote-separator"><fo:block><fo:leader color="black" leader-pattern="rule" leader-length="1in"/></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-first"><fo:block font-family="CartoGothic Std" margin-left="0pt"><fo:table xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-odd"><fo:block font-family="CartoGothic Std" margin-left="0pt"><fo:table xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-even"><fo:block font-family="CartoGothic Std" margin-left="0pt"><fo:table xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-blank"><fo:block font-family="CartoGothic Std" margin-left="0pt"><fo:table xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:flow flow-name="xsl-region-body"><fo:block id="bk-ha-guide"><fo:block><fo:block><fo:block-container xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" absolute-position="fixed" left="5.2in" top="9.0in" width="2.25in"><fo:block><fo:external-graphic src="url(file:/Users/annegentle/src/ha-guide/doc/ha-guide/target/docbkx/images/cc//../openstack-logo.svg)"/></fo:block><fo:block text-align="center" font-size="9pt" font-family="sans-serif"><fo:basic-link external-destination="url(http://docs.openstack.org)">docs.openstack.org</fo:basic-link></fo:block></fo:block-container></fo:block><fo:block><fo:block xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" break-after="page"/><fo:block font-size="14.4pt" font-weight="bold" font-family="CartoGothic Std"><fo:block>OpenStack High Availability Guide</fo:block></fo:block><fo:block font-size="10pt"><fo:block>Florian Haas</fo:block></fo:block><fo:block font-size="10pt" space-before="0.5em">current (2014-09-14)</fo:block>Copyright © 2012-2014 OpenStack Contributors All rights reserved.<fo:block font-size="10pt"><fo:block xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" start-indent="0.0in" end-indent="0.0in"><fo:block font-family="CartoGothic Std" font-weight="bold" keep-with-next.within-column="always" space-before.optimum="10pt" space-before.minimum="10pt * 0.8" space-before.maximum="10pt * 1.2" hyphenate="false" text-align="center"/><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This guide describes how to install,
              configure, and manage OpenStack for high availability.</fo:block></fo:block></fo:block><fo:block font-size="8pt" space-before="1.0em"><fo:block xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" id="d5e19"><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
              Licensed under the Apache License, Version 2.0 (the "License");
              you may not use this file except in compliance with the License.
              You may obtain a copy of the License at
          </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:basic-link external-destination="http://www.apache.org/licenses/LICENSE-2.0"><fo:inline>http://www.apache.org/licenses/LICENSE-2.0</fo:inline></fo:basic-link></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
              Unless required by applicable law or agreed to in writing, software
              distributed under the License is distributed on an "AS IS" BASIS,
              WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
              See the License for the specific language governing permissions and
              limitations under the License.
          </fo:block></fo:block></fo:block></fo:block><fo:block break-after="page"/></fo:block></fo:block></fo:flow></fo:page-sequence><fo:page-sequence xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" hyphenate="true" master-reference="lot" language="en" format="i" initial-page-number="auto" force-page-count="no-force" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2"><fo:static-content xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" flow-name="xsl-region-before-first"><fo:block-container reference-orientation="90" absolute-position="fixed" top="-1in" overflow="visible" height="2in" width="30in" z-index="1"><fo:block padding-before=".45in" font-size="1.5em" color="gray" font-weight="bold"><fo:leader leader-pattern="use-content" leader-length="30in" letter-spacing=".1em">  </fo:leader></fo:block></fo:block-container><fo:block font-family="CartoGothic Std" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block>OpenStack High Availability Guide</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block>September 14, 2014</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block>current</fo:block></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" flow-name="xsl-region-before-odd"><fo:block-container reference-orientation="90" absolute-position="fixed" top="-1in" overflow="visible" height="2in" width="30in" z-index="1"><fo:block padding-before=".45in" font-size="1.5em" color="gray" font-weight="bold"><fo:leader leader-pattern="use-content" leader-length="30in" letter-spacing=".1em">  </fo:leader></fo:block></fo:block-container><fo:block font-family="CartoGothic Std" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block>OpenStack High Availability Guide</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block>September 14, 2014</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block>current</fo:block></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" flow-name="xsl-region-before-even"><fo:block-container reference-orientation="90" absolute-position="fixed" top="-1in" overflow="visible" height="2in" width="30in" z-index="1"><fo:block padding-before=".45in" font-size="1.5em" color="gray" font-weight="bold"><fo:leader leader-pattern="use-content" leader-length="30in" letter-spacing=".1em">  </fo:leader></fo:block></fo:block-container><fo:block font-family="CartoGothic Std" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block>OpenStack High Availability Guide</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block>September 14, 2014</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block>current</fo:block></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" flow-name="xsl-region-before-blank"><fo:block-container reference-orientation="90" absolute-position="fixed" top="-1in" overflow="visible" height="2in" width="30in" z-index="1"><fo:block padding-before=".45in" font-size="1.5em" color="gray" font-weight="bold"><fo:leader leader-pattern="use-content" leader-length="30in" letter-spacing=".1em">  </fo:leader></fo:block></fo:block-container><fo:block font-family="CartoGothic Std" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-footnote-separator"><fo:block><fo:leader color="black" leader-pattern="rule" leader-length="1in"/></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-first"><fo:block font-family="CartoGothic Std" margin-left="0pt"><fo:table xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-odd"><fo:block font-family="CartoGothic Std" margin-left="0pt"><fo:table xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-even"><fo:block font-family="CartoGothic Std" margin-left="0pt"><fo:table xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-blank"><fo:block font-family="CartoGothic Std" margin-left="0pt"><fo:table xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:flow flow-name="xsl-region-body" start-indent="4pc" end-indent="0pt"><fo:block space-before.minimum="0.5em" space-before.optimum="1em" space-before.maximum="2em" space-after.minimum="0.5em" space-after.optimum="1em" space-after.maximum="2em" id="toc...bk-ha-guide"><fo:block><fo:block><fo:block space-before.minimum="1em" space-before.optimum="1.5em" space-before.maximum="2em" space-after="0.5em" margin-left="0pt" start-indent="0pt" font-size="20.736pt" font-weight="bold" color="rgb(196,0,34)" font-family="CartoGothic Std">Table of Contents</fo:block></fo:block></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="ch-intro">1. Introduction to OpenStack High Availability</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="ch-intro"><fo:page-number-citation ref-id="ch-intro"/></fo:basic-link></fo:inline></fo:block><fo:block id="toc.bk-ha-guide.ch-intro" margin-left="24pt"><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="stateless-vs-stateful">Stateless vs. Stateful services</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="stateless-vs-stateful"><fo:page-number-citation ref-id="stateless-vs-stateful"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="ap-intro">Active/Passive</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="ap-intro"><fo:page-number-citation ref-id="ap-intro"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="aa-intro">Active/Active</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="aa-intro"><fo:page-number-citation ref-id="aa-intro"/></fo:basic-link></fo:inline></fo:block></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="ha-using-active-passive">I. HA using active/passive</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="ha-using-active-passive"><fo:page-number-citation ref-id="ha-using-active-passive"/></fo:basic-link></fo:inline></fo:block><fo:block id="toc.bk-ha-guide.ha-using-active-passive" margin-left="24pt"><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="ch-pacemaker">2. The Pacemaker cluster stack</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="ch-pacemaker"><fo:page-number-citation ref-id="ch-pacemaker"/></fo:basic-link></fo:inline></fo:block><fo:block id="toc.bk-ha-guide.ch-pacemaker" margin-left="24pt"><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="_install_packages">Install packages</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="_install_packages"><fo:page-number-citation ref-id="_install_packages"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="_set_up_corosync">Set up Corosync</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="_set_up_corosync"><fo:page-number-citation ref-id="_set_up_corosync"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="_starting_corosync">Starting Corosync</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="_starting_corosync"><fo:page-number-citation ref-id="_starting_corosync"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="_start_pacemaker">Start Pacemaker</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="_start_pacemaker"><fo:page-number-citation ref-id="_start_pacemaker"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="_set_basic_cluster_properties">Set basic cluster properties</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="_set_basic_cluster_properties"><fo:page-number-citation ref-id="_set_basic_cluster_properties"/></fo:basic-link></fo:inline></fo:block></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="ch-controller">3. Cloud controller cluster stack</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="ch-controller"><fo:page-number-citation ref-id="ch-controller"/></fo:basic-link></fo:inline></fo:block><fo:block id="toc.bk-ha-guide.ch-controller" margin-left="24pt"><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="s-mysql">Highly available MySQL</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="s-mysql"><fo:page-number-citation ref-id="s-mysql"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="s-rabbitmq">Highly available RabbitMQ</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="s-rabbitmq"><fo:page-number-citation ref-id="s-rabbitmq"/></fo:basic-link></fo:inline></fo:block></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="ch-api">4. API node cluster stack</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="ch-api"><fo:page-number-citation ref-id="ch-api"/></fo:basic-link></fo:inline></fo:block><fo:block id="toc.bk-ha-guide.ch-api" margin-left="24pt"><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="s-api-vip">Configure the VIP</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="s-api-vip"><fo:page-number-citation ref-id="s-api-vip"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="s-keystone">Highly available OpenStack Identity</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="s-keystone"><fo:page-number-citation ref-id="s-keystone"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="s-glance-api">Highly available OpenStack Image API</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="s-glance-api"><fo:page-number-citation ref-id="s-glance-api"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="s-cinder-api">Highly available Block Storage API</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="s-cinder-api"><fo:page-number-citation ref-id="s-cinder-api"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="s-neutron-server">Highly available OpenStack Networking server</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="s-neutron-server"><fo:page-number-citation ref-id="s-neutron-server"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="s-ceilometer-agent-central">Highly available Telemetry central agent</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="s-ceilometer-agent-central"><fo:page-number-citation ref-id="s-ceilometer-agent-central"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="s-api-pacemaker">Configure Pacemaker group</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="s-api-pacemaker"><fo:page-number-citation ref-id="s-api-pacemaker"/></fo:basic-link></fo:inline></fo:block></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="ch-network">5. Network controller cluster stack</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="ch-network"><fo:page-number-citation ref-id="ch-network"/></fo:basic-link></fo:inline></fo:block><fo:block id="toc.bk-ha-guide.ch-network" margin-left="24pt"><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="_highly_available_neutron_l3_agent">Highly available neutron L3 agent</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="_highly_available_neutron_l3_agent"><fo:page-number-citation ref-id="_highly_available_neutron_l3_agent"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="_highly_available_neutron_dhcp_agent">Highly available neutron DHCP agent</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="_highly_available_neutron_dhcp_agent"><fo:page-number-citation ref-id="_highly_available_neutron_dhcp_agent"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="_highly_available_neutron_metadata_agent">Highly available neutron metadata agent</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="_highly_available_neutron_metadata_agent"><fo:page-number-citation ref-id="_highly_available_neutron_metadata_agent"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="_manage_network_resources">Manage network resources</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="_manage_network_resources"><fo:page-number-citation ref-id="_manage_network_resources"/></fo:basic-link></fo:inline></fo:block></fo:block></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="ha-using-active-active">II. HA using active/active</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="ha-using-active-active"><fo:page-number-citation ref-id="ha-using-active-active"/></fo:basic-link></fo:inline></fo:block><fo:block id="toc.bk-ha-guide.ha-using-active-active" margin-left="24pt"><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="ha-aa-db">6. Database</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="ha-aa-db"><fo:page-number-citation ref-id="ha-aa-db"/></fo:basic-link></fo:inline></fo:block><fo:block id="toc.bk-ha-guide.ha-aa-db" margin-left="24pt"><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="ha-aa-db-mysql-galera">MySQL with Galera</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="ha-aa-db-mysql-galera"><fo:page-number-citation ref-id="ha-aa-db-mysql-galera"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="ha-aa-db-galera-monitoring">Galera monitoring scripts</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="ha-aa-db-galera-monitoring"><fo:page-number-citation ref-id="ha-aa-db-galera-monitoring"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="_other_ways_to_provide_a_highly_available_database">Other ways to provide a highly available database</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="_other_ways_to_provide_a_highly_available_database"><fo:page-number-citation ref-id="_other_ways_to_provide_a_highly_available_database"/></fo:basic-link></fo:inline></fo:block></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="ha-aa-rabbitmq">7. RabbitMQ</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="ha-aa-rabbitmq"><fo:page-number-citation ref-id="ha-aa-rabbitmq"/></fo:basic-link></fo:inline></fo:block><fo:block id="toc.bk-ha-guide.ha-aa-rabbitmq" margin-left="24pt"><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="_install_rabbitmq">Install RabbitMQ</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="_install_rabbitmq"><fo:page-number-citation ref-id="_install_rabbitmq"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="_configure_rabbitmq">Configure RabbitMQ</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="_configure_rabbitmq"><fo:page-number-citation ref-id="_configure_rabbitmq"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="_configure_openstack_services_to_use_rabbitmq">Configure OpenStack services to use RabbitMQ</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="_configure_openstack_services_to_use_rabbitmq"><fo:page-number-citation ref-id="_configure_openstack_services_to_use_rabbitmq"/></fo:basic-link></fo:inline></fo:block></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="ha-aa-haproxy">8. HAproxy nodes</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="ha-aa-haproxy"><fo:page-number-citation ref-id="ha-aa-haproxy"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="ha-aa-controllers">9. OpenStack controller nodes</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="ha-aa-controllers"><fo:page-number-citation ref-id="ha-aa-controllers"/></fo:basic-link></fo:inline></fo:block><fo:block id="toc.bk-ha-guide.ha-aa-controllers" margin-left="24pt"><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="_run_openstack_api_and_schedulers">Run OpenStack API and schedulers</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="_run_openstack_api_and_schedulers"><fo:page-number-citation ref-id="_run_openstack_api_and_schedulers"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="_memcached">Memcached</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="_memcached"><fo:page-number-citation ref-id="_memcached"/></fo:basic-link></fo:inline></fo:block></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="ha-aa-network">10. OpenStack network nodes</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="ha-aa-network"><fo:page-number-citation ref-id="ha-aa-network"/></fo:basic-link></fo:inline></fo:block><fo:block id="toc.bk-ha-guide.ha-aa-network" margin-left="24pt"><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="_run_neutron_dhcp_agent">Run neutron DHCP agent</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="_run_neutron_dhcp_agent"><fo:page-number-citation ref-id="_run_neutron_dhcp_agent"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="_run_neutron_l3_agent">Run neutron L3 agent</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="_run_neutron_l3_agent"><fo:page-number-citation ref-id="_run_neutron_l3_agent"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="_run_neutron_metadata_agent">Run neutron metadata agent</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="_run_neutron_metadata_agent"><fo:page-number-citation ref-id="_run_neutron_metadata_agent"/></fo:basic-link></fo:inline></fo:block></fo:block></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="app_community_support">A. Community support</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="app_community_support"><fo:page-number-citation ref-id="app_community_support"/></fo:basic-link></fo:inline></fo:block><fo:block id="toc.bk-ha-guide.app_community_support" margin-left="24pt"><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="support-documentation">Documentation</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="support-documentation"><fo:page-number-citation ref-id="support-documentation"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="support-ask_openstack">ask.openstack.org</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="support-ask_openstack"><fo:page-number-citation ref-id="support-ask_openstack"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="support-mailing-lists">OpenStack mailing lists</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="support-mailing-lists"><fo:page-number-citation ref-id="support-mailing-lists"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="support-wiki">The OpenStack wiki</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="support-wiki"><fo:page-number-citation ref-id="support-wiki"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="support-bugs-area">The Launchpad Bugs area</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="support-bugs-area"><fo:page-number-citation ref-id="support-bugs-area"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="support-irc-channel">The OpenStack IRC channel</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="support-irc-channel"><fo:page-number-citation ref-id="support-irc-channel"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="support-documentation-feedback">Documentation feedback</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="support-documentation-feedback"><fo:page-number-citation ref-id="support-documentation-feedback"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="distro-support">OpenStack distribution packages</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="distro-support"><fo:page-number-citation ref-id="distro-support"/></fo:basic-link></fo:inline></fo:block></fo:block></fo:block></fo:flow></fo:page-sequence><fo:page-sequence xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" hyphenate="true" master-reference="body" language="en" format="1" initial-page-number="1" force-page-count="no-force" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2"><fo:static-content xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" flow-name="xsl-region-before-first"><fo:block-container reference-orientation="90" absolute-position="fixed" top="-1in" overflow="visible" height="2in" width="30in" z-index="1"><fo:block padding-before=".45in" font-size="1.5em" color="gray" font-weight="bold"><fo:leader leader-pattern="use-content" leader-length="30in" letter-spacing=".1em">  </fo:leader></fo:block></fo:block-container><fo:block font-family="CartoGothic Std" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block>OpenStack High Availability Guide</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block>September 14, 2014</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block>current</fo:block></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" flow-name="xsl-region-before-odd"><fo:block-container reference-orientation="90" absolute-position="fixed" top="-1in" overflow="visible" height="2in" width="30in" z-index="1"><fo:block padding-before=".45in" font-size="1.5em" color="gray" font-weight="bold"><fo:leader leader-pattern="use-content" leader-length="30in" letter-spacing=".1em">  </fo:leader></fo:block></fo:block-container><fo:block font-family="CartoGothic Std" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block>OpenStack High Availability Guide</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block>September 14, 2014</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block>current</fo:block></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" flow-name="xsl-region-before-even"><fo:block-container reference-orientation="90" absolute-position="fixed" top="-1in" overflow="visible" height="2in" width="30in" z-index="1"><fo:block padding-before=".45in" font-size="1.5em" color="gray" font-weight="bold"><fo:leader leader-pattern="use-content" leader-length="30in" letter-spacing=".1em">  </fo:leader></fo:block></fo:block-container><fo:block font-family="CartoGothic Std" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block>OpenStack High Availability Guide</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block>September 14, 2014</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block>current</fo:block></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" flow-name="xsl-region-before-blank"><fo:block-container reference-orientation="90" absolute-position="fixed" top="-1in" overflow="visible" height="2in" width="30in" z-index="1"><fo:block padding-before=".45in" font-size="1.5em" color="gray" font-weight="bold"><fo:leader leader-pattern="use-content" leader-length="30in" letter-spacing=".1em">  </fo:leader></fo:block></fo:block-container><fo:block font-family="CartoGothic Std" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-footnote-separator"><fo:block><fo:leader color="black" leader-pattern="rule" leader-length="1in"/></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-first"><fo:block font-family="CartoGothic Std" margin-left="0pt"><fo:table xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-odd"><fo:block font-family="CartoGothic Std" margin-left="0pt"><fo:table xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-even"><fo:block font-family="CartoGothic Std" margin-left="0pt"><fo:table xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-blank"><fo:block font-family="CartoGothic Std" margin-left="0pt"><fo:table xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:flow flow-name="xsl-region-body" start-indent="4pc" end-indent="0pt"><fo:block id="ch-intro"><fo:block font-family="CartoGothic Std"><fo:block margin-left="0pt"><fo:block font-size="24.8832pt" font-weight="bold"><fo:block keep-with-next.within-column="always" space-before.optimum="10pt" space-before.minimum="10pt * 0.8" space-before.maximum="10pt * 1.2" hyphenate="false" text-align="start" start-indent="0pt" font-family="CartoGothic Std" color="rgb(196,0,34)" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2">1. Introduction to OpenStack High Availability</fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="1em" space-before.maximum="2em" space-after.minimum="0.5em" space-after.optimum="1em" space-after.maximum="2em" id="toc...ch-intro"><fo:block><fo:block><fo:block space-before.minimum="1em" space-before.optimum="1.5em" space-before.maximum="2em" space-after="0.5em" margin-left="0pt" start-indent="0pt" font-size="20.736pt" font-weight="bold" color="rgb(196,0,34)" font-family="CartoGothic Std">Table of Contents</fo:block></fo:block></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="stateless-vs-stateful">Stateless vs. Stateful services</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="stateless-vs-stateful"><fo:page-number-citation ref-id="stateless-vs-stateful"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="ap-intro">Active/Passive</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="ap-intro"><fo:page-number-citation ref-id="ap-intro"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="aa-intro">Active/Active</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="aa-intro"><fo:page-number-citation ref-id="aa-intro"/></fo:basic-link></fo:inline></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">High Availability systems seek to minimize two things:</fo:block><fo:list-block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em" provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em" id="d5e52"><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d5e53"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block><fo:inline font-weight="bold">System downtime</fo:inline><fo:leader leader-length="0.2em"/>—<fo:leader leader-length="0.2em"/>occurs when a <fo:inline font-style="italic">user-facing</fo:inline> service is unavailable beyond a specified maximum amount of time, and
</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d5e57"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block><fo:inline font-weight="bold">Data loss</fo:inline><fo:leader leader-length="0.2em"/>—<fo:leader leader-length="0.2em"/>accidental deletion or destruction of data.
</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Most high availability systems guarantee protection against system downtime and data loss only in the event of a single failure. However, they are also expected to protect against cascading failures, where a single failure deteriorates into a series of consequential failures.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">A crucial aspect of high availability is the elimination of single points of failure (SPOFs). A SPOF is an individual piece of equipment or software which will cause system downtime or data loss if it fails. In order to eliminate SPOFs, check that mechanisms exist for redundancy of:</fo:block><fo:list-block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em" provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em" id="d5e62"><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d5e63"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>
Network components, such as switches and routers
</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d5e65"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>
Applications and automatic service migration
</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d5e67"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>
Storage components
</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d5e69"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>
Facility services such as power, air conditioning, and fire protection
</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Most high availability systems will fail in the event of multiple independent (non-consequential) failures. In this case, most systems will protect data over maintaining availability.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">High-availability systems typically achieve uptime of 99.99% or more, which roughly equates to less than an hour of cumulative downtime per year. In order to achieve this, high availability systems should keep recovery times after a failure to about one to two minutes, sometimes significantly less.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">OpenStack currently meets such availability requirements for its own infrastructure services, meaning that an uptime of 99.99% is feasible for the OpenStack infrastructure proper. However, OpenStack <fo:inline font-style="italic">does</fo:inline> <fo:inline font-style="italic">not</fo:inline> guarantee 99.99% availability for individual guest instances.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Preventing single points of failure can depend on whether or not a service is stateless.</fo:block><fo:block id="stateless-vs-stateful"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0pt" font-family="CartoGothic Std"><fo:block keep-with-next.within-column="always"><fo:block font-family="CartoGothic Std" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt" color="rgb(196,0,34)"><fo:marker marker-class-name="section.head.marker">Stateless vs. Stateful services</fo:marker><fo:block font-size="20.735999999999997pt">Stateless vs. Stateful services</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">A stateless service is one that provides a response after your request, and then requires no further attention. To make a stateless service highly available, you need to provide redundant instances and load balance them. OpenStack services that are stateless include nova-api, nova-conductor, glance-api, keystone-api, neutron-api and nova-scheduler.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">A stateful service is one where subsequent requests to the service depend on the results of the first request. Stateful services are more difficult to manage because a single action typically involves more than one request, so simply providing additional instances and load balancing will not solve the problem. For example, if the Horizon user interface reset itself every time you went to a new page, it wouldn’t be very useful. OpenStack services that are stateful include the OpenStack database and message queue.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Making stateful services highly available can depend on whether you choose an active/passive or active/active configuration.</fo:block></fo:block><fo:block id="ap-intro"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0pt" font-family="CartoGothic Std"><fo:block keep-with-next.within-column="always"><fo:block font-family="CartoGothic Std" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt" color="rgb(196,0,34)"><fo:marker marker-class-name="section.head.marker">Active/Passive</fo:marker><fo:block font-size="20.735999999999997pt">Active/Passive</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">In an active/passive configuration, systems are set up to bring additional resources online to replace those that have failed. For example, OpenStack would write to the main database while maintaining a disaster recovery database that can be brought online in the event that the main database fails.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Typically, an active/passive installation for a stateless service would maintain a redundant instance that can be brought online when required. Requests are load balanced using a virtual IP address and a load balancer such as HAProxy.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">A typical active/passive installation for a stateful service maintains a replacement resource that can be brought online when required. A separate application (such as Pacemaker or Corosync) monitors these services, bringing the backup online as necessary.</fo:block></fo:block><fo:block id="aa-intro"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0pt" font-family="CartoGothic Std"><fo:block keep-with-next.within-column="always"><fo:block font-family="CartoGothic Std" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt" color="rgb(196,0,34)"><fo:marker marker-class-name="section.head.marker">Active/Active</fo:marker><fo:block font-size="20.735999999999997pt">Active/Active</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">In an active/active configuration, systems also use a backup but will manage both the main and redundant systems concurrently. This way, if there is a failure the user is unlikely to notice. The backup system is already online, and takes on increased load while the main system is fixed and brought back online.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Typically, an active/active installation for a stateless service would maintain a redundant instance, and requests are load balanced using a virtual IP address and a load balancer such as HAProxy.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">A typical active/active installation for a stateful service would include redundant services with all instances having an identical state. For example, updates to one instance of a database would also update all other instances. This way a request to one instance is the same as a request to any other. A load balancer manages the traffic to these systems, ensuring that operational systems always handle the request.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">These are some of the more common ways to implement these high availability architectures, but they are by no means the only ways to do it. The important thing is to make sure that your services are redundant, and available; how you achieve that is up to you. This document will cover some of the more common options for highly available systems.</fo:block></fo:block></fo:flow></fo:page-sequence><fo:page-sequence xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" hyphenate="true" master-reference="titlepage" language="en" format="1" initial-page-number="auto" force-page-count="no-force" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2"><fo:static-content xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" flow-name="xsl-region-before-first"><fo:block-container reference-orientation="90" absolute-position="fixed" top="-1in" overflow="visible" height="2in" width="30in" z-index="1"><fo:block padding-before=".45in" font-size="1.5em" color="gray" font-weight="bold"><fo:leader leader-pattern="use-content" leader-length="30in" letter-spacing=".1em">  </fo:leader></fo:block></fo:block-container><fo:block font-family="CartoGothic Std" margin-left="0pt"/></fo:static-content><fo:static-content xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" flow-name="xsl-region-before-odd"><fo:block-container reference-orientation="90" absolute-position="fixed" top="-1in" overflow="visible" height="2in" width="30in" z-index="1"><fo:block padding-before=".45in" font-size="1.5em" color="gray" font-weight="bold"><fo:leader leader-pattern="use-content" leader-length="30in" letter-spacing=".1em">  </fo:leader></fo:block></fo:block-container><fo:block font-family="CartoGothic Std" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block>OpenStack High Availability Guide</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block>September 14, 2014</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block>current</fo:block></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" flow-name="xsl-region-before-even"><fo:block-container reference-orientation="90" absolute-position="fixed" top="-1in" overflow="visible" height="2in" width="30in" z-index="1"><fo:block padding-before=".45in" font-size="1.5em" color="gray" font-weight="bold"><fo:leader leader-pattern="use-content" leader-length="30in" letter-spacing=".1em">  </fo:leader></fo:block></fo:block-container><fo:block font-family="CartoGothic Std" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block>OpenStack High Availability Guide</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block>September 14, 2014</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block>current</fo:block></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" flow-name="xsl-region-before-blank"><fo:block-container reference-orientation="90" absolute-position="fixed" top="-1in" overflow="visible" height="2in" width="30in" z-index="1"><fo:block padding-before=".45in" font-size="1.5em" color="gray" font-weight="bold"><fo:leader leader-pattern="use-content" leader-length="30in" letter-spacing=".1em">  </fo:leader></fo:block></fo:block-container><fo:block font-family="CartoGothic Std" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-footnote-separator"><fo:block><fo:leader color="black" leader-pattern="rule" leader-length="1in"/></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-first"><fo:block font-family="CartoGothic Std" margin-left="0pt"/></fo:static-content><fo:static-content flow-name="xsl-region-after-odd"><fo:block font-family="CartoGothic Std" margin-left="0pt"><fo:table xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-even"><fo:block font-family="CartoGothic Std" margin-left="0pt"><fo:table xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-blank"><fo:block font-family="CartoGothic Std" margin-left="0pt"><fo:table xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:flow flow-name="xsl-region-body"><fo:block id="ha-using-active-passive"><fo:block><fo:block><fo:block text-align="center" font-size="24.8832pt" space-before="18.6624pt" font-weight="bold" font-family="CartoGothic Std"><fo:block keep-with-next.within-column="always" hyphenate="false">Part I. HA using active/passive</fo:block></fo:block></fo:block></fo:block></fo:block></fo:flow></fo:page-sequence><fo:page-sequence xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" hyphenate="true" master-reference="lot" language="en" format="1" initial-page-number="auto" force-page-count="no-force" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2"><fo:static-content xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" flow-name="xsl-region-before-first"><fo:block-container reference-orientation="90" absolute-position="fixed" top="-1in" overflow="visible" height="2in" width="30in" z-index="1"><fo:block padding-before=".45in" font-size="1.5em" color="gray" font-weight="bold"><fo:leader leader-pattern="use-content" leader-length="30in" letter-spacing=".1em">  </fo:leader></fo:block></fo:block-container><fo:block font-family="CartoGothic Std" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block>OpenStack High Availability Guide</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block>September 14, 2014</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block>current</fo:block></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" flow-name="xsl-region-before-odd"><fo:block-container reference-orientation="90" absolute-position="fixed" top="-1in" overflow="visible" height="2in" width="30in" z-index="1"><fo:block padding-before=".45in" font-size="1.5em" color="gray" font-weight="bold"><fo:leader leader-pattern="use-content" leader-length="30in" letter-spacing=".1em">  </fo:leader></fo:block></fo:block-container><fo:block font-family="CartoGothic Std" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block>OpenStack High Availability Guide</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block>September 14, 2014</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block>current</fo:block></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" flow-name="xsl-region-before-even"><fo:block-container reference-orientation="90" absolute-position="fixed" top="-1in" overflow="visible" height="2in" width="30in" z-index="1"><fo:block padding-before=".45in" font-size="1.5em" color="gray" font-weight="bold"><fo:leader leader-pattern="use-content" leader-length="30in" letter-spacing=".1em">  </fo:leader></fo:block></fo:block-container><fo:block font-family="CartoGothic Std" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block>OpenStack High Availability Guide</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block>September 14, 2014</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block>current</fo:block></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" flow-name="xsl-region-before-blank"><fo:block-container reference-orientation="90" absolute-position="fixed" top="-1in" overflow="visible" height="2in" width="30in" z-index="1"><fo:block padding-before=".45in" font-size="1.5em" color="gray" font-weight="bold"><fo:leader leader-pattern="use-content" leader-length="30in" letter-spacing=".1em">  </fo:leader></fo:block></fo:block-container><fo:block font-family="CartoGothic Std" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-footnote-separator"><fo:block><fo:leader color="black" leader-pattern="rule" leader-length="1in"/></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-first"><fo:block font-family="CartoGothic Std" margin-left="0pt"><fo:table xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-odd"><fo:block font-family="CartoGothic Std" margin-left="0pt"><fo:table xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-even"><fo:block font-family="CartoGothic Std" margin-left="0pt"><fo:table xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-blank"><fo:block font-family="CartoGothic Std" margin-left="0pt"><fo:table xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:flow flow-name="xsl-region-body" start-indent="4pc" end-indent="0pt"><fo:block space-before.minimum="0.5em" space-before.optimum="1em" space-before.maximum="2em" space-after.minimum="0.5em" space-after.optimum="1em" space-after.maximum="2em" id="toc...ha-using-active-passive"><fo:block><fo:block><fo:block space-before.minimum="1em" space-before.optimum="1.5em" space-before.maximum="2em" space-after="0.5em" margin-left="0pt" start-indent="0pt" font-size="20.736pt" font-weight="bold" color="rgb(196,0,34)" font-family="CartoGothic Std">Table of Contents</fo:block></fo:block></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="ch-pacemaker">2. The Pacemaker cluster stack</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="ch-pacemaker"><fo:page-number-citation ref-id="ch-pacemaker"/></fo:basic-link></fo:inline></fo:block><fo:block id="toc.ha-using-active-passive.ch-pacemaker" margin-left="24pt"><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="_install_packages">Install packages</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="_install_packages"><fo:page-number-citation ref-id="_install_packages"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="_set_up_corosync">Set up Corosync</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="_set_up_corosync"><fo:page-number-citation ref-id="_set_up_corosync"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="_starting_corosync">Starting Corosync</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="_starting_corosync"><fo:page-number-citation ref-id="_starting_corosync"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="_start_pacemaker">Start Pacemaker</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="_start_pacemaker"><fo:page-number-citation ref-id="_start_pacemaker"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="_set_basic_cluster_properties">Set basic cluster properties</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="_set_basic_cluster_properties"><fo:page-number-citation ref-id="_set_basic_cluster_properties"/></fo:basic-link></fo:inline></fo:block></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="ch-controller">3. Cloud controller cluster stack</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="ch-controller"><fo:page-number-citation ref-id="ch-controller"/></fo:basic-link></fo:inline></fo:block><fo:block id="toc.ha-using-active-passive.ch-controller" margin-left="24pt"><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="s-mysql">Highly available MySQL</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="s-mysql"><fo:page-number-citation ref-id="s-mysql"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="s-rabbitmq">Highly available RabbitMQ</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="s-rabbitmq"><fo:page-number-citation ref-id="s-rabbitmq"/></fo:basic-link></fo:inline></fo:block></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="ch-api">4. API node cluster stack</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="ch-api"><fo:page-number-citation ref-id="ch-api"/></fo:basic-link></fo:inline></fo:block><fo:block id="toc.ha-using-active-passive.ch-api" margin-left="24pt"><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="s-api-vip">Configure the VIP</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="s-api-vip"><fo:page-number-citation ref-id="s-api-vip"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="s-keystone">Highly available OpenStack Identity</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="s-keystone"><fo:page-number-citation ref-id="s-keystone"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="s-glance-api">Highly available OpenStack Image API</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="s-glance-api"><fo:page-number-citation ref-id="s-glance-api"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="s-cinder-api">Highly available Block Storage API</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="s-cinder-api"><fo:page-number-citation ref-id="s-cinder-api"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="s-neutron-server">Highly available OpenStack Networking server</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="s-neutron-server"><fo:page-number-citation ref-id="s-neutron-server"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="s-ceilometer-agent-central">Highly available Telemetry central agent</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="s-ceilometer-agent-central"><fo:page-number-citation ref-id="s-ceilometer-agent-central"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="s-api-pacemaker">Configure Pacemaker group</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="s-api-pacemaker"><fo:page-number-citation ref-id="s-api-pacemaker"/></fo:basic-link></fo:inline></fo:block></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="ch-network">5. Network controller cluster stack</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="ch-network"><fo:page-number-citation ref-id="ch-network"/></fo:basic-link></fo:inline></fo:block><fo:block id="toc.ha-using-active-passive.ch-network" margin-left="24pt"><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="_highly_available_neutron_l3_agent">Highly available neutron L3 agent</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="_highly_available_neutron_l3_agent"><fo:page-number-citation ref-id="_highly_available_neutron_l3_agent"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="_highly_available_neutron_dhcp_agent">Highly available neutron DHCP agent</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="_highly_available_neutron_dhcp_agent"><fo:page-number-citation ref-id="_highly_available_neutron_dhcp_agent"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="_highly_available_neutron_metadata_agent">Highly available neutron metadata agent</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="_highly_available_neutron_metadata_agent"><fo:page-number-citation ref-id="_highly_available_neutron_metadata_agent"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="_manage_network_resources">Manage network resources</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="_manage_network_resources"><fo:page-number-citation ref-id="_manage_network_resources"/></fo:basic-link></fo:inline></fo:block></fo:block></fo:block></fo:flow></fo:page-sequence><fo:page-sequence xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" hyphenate="true" master-reference="body" language="en" format="1" initial-page-number="auto" force-page-count="no-force" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2"><fo:static-content xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" flow-name="xsl-region-before-first"><fo:block-container reference-orientation="90" absolute-position="fixed" top="-1in" overflow="visible" height="2in" width="30in" z-index="1"><fo:block padding-before=".45in" font-size="1.5em" color="gray" font-weight="bold"><fo:leader leader-pattern="use-content" leader-length="30in" letter-spacing=".1em">  </fo:leader></fo:block></fo:block-container><fo:block font-family="CartoGothic Std" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block>OpenStack High Availability Guide</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block>September 14, 2014</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block>current</fo:block></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" flow-name="xsl-region-before-odd"><fo:block-container reference-orientation="90" absolute-position="fixed" top="-1in" overflow="visible" height="2in" width="30in" z-index="1"><fo:block padding-before=".45in" font-size="1.5em" color="gray" font-weight="bold"><fo:leader leader-pattern="use-content" leader-length="30in" letter-spacing=".1em">  </fo:leader></fo:block></fo:block-container><fo:block font-family="CartoGothic Std" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block>OpenStack High Availability Guide</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block>September 14, 2014</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block>current</fo:block></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" flow-name="xsl-region-before-even"><fo:block-container reference-orientation="90" absolute-position="fixed" top="-1in" overflow="visible" height="2in" width="30in" z-index="1"><fo:block padding-before=".45in" font-size="1.5em" color="gray" font-weight="bold"><fo:leader leader-pattern="use-content" leader-length="30in" letter-spacing=".1em">  </fo:leader></fo:block></fo:block-container><fo:block font-family="CartoGothic Std" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block>OpenStack High Availability Guide</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block>September 14, 2014</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block>current</fo:block></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" flow-name="xsl-region-before-blank"><fo:block-container reference-orientation="90" absolute-position="fixed" top="-1in" overflow="visible" height="2in" width="30in" z-index="1"><fo:block padding-before=".45in" font-size="1.5em" color="gray" font-weight="bold"><fo:leader leader-pattern="use-content" leader-length="30in" letter-spacing=".1em">  </fo:leader></fo:block></fo:block-container><fo:block font-family="CartoGothic Std" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-footnote-separator"><fo:block><fo:leader color="black" leader-pattern="rule" leader-length="1in"/></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-first"><fo:block font-family="CartoGothic Std" margin-left="0pt"><fo:table xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-odd"><fo:block font-family="CartoGothic Std" margin-left="0pt"><fo:table xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-even"><fo:block font-family="CartoGothic Std" margin-left="0pt"><fo:table xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-blank"><fo:block font-family="CartoGothic Std" margin-left="0pt"><fo:table xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:flow flow-name="xsl-region-body" start-indent="4pc" end-indent="0pt"><fo:block id="ch-pacemaker"><fo:block font-family="CartoGothic Std"><fo:block margin-left="0pt"><fo:block font-size="24.8832pt" font-weight="bold"><fo:block keep-with-next.within-column="always" space-before.optimum="10pt" space-before.minimum="10pt * 0.8" space-before.maximum="10pt * 1.2" hyphenate="false" text-align="start" start-indent="0pt" font-family="CartoGothic Std" color="rgb(196,0,34)" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2">2. The Pacemaker cluster stack</fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="1em" space-before.maximum="2em" space-after.minimum="0.5em" space-after.optimum="1em" space-after.maximum="2em" id="toc...ch-pacemaker"><fo:block><fo:block><fo:block space-before.minimum="1em" space-before.optimum="1.5em" space-before.maximum="2em" space-after="0.5em" margin-left="0pt" start-indent="0pt" font-size="20.736pt" font-weight="bold" color="rgb(196,0,34)" font-family="CartoGothic Std">Table of Contents</fo:block></fo:block></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="_install_packages">Install packages</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="_install_packages"><fo:page-number-citation ref-id="_install_packages"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="_set_up_corosync">Set up Corosync</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="_set_up_corosync"><fo:page-number-citation ref-id="_set_up_corosync"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="_starting_corosync">Starting Corosync</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="_starting_corosync"><fo:page-number-citation ref-id="_starting_corosync"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="_start_pacemaker">Start Pacemaker</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="_start_pacemaker"><fo:page-number-citation ref-id="_start_pacemaker"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="_set_basic_cluster_properties">Set basic cluster properties</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="_set_basic_cluster_properties"><fo:page-number-citation ref-id="_set_basic_cluster_properties"/></fo:basic-link></fo:inline></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">OpenStack infrastructure high availability relies on the
<fo:basic-link external-destination="url(http://www.clusterlabs.org)"><fo:inline color="blue" font-style="normal">Pacemaker</fo:inline></fo:basic-link> cluster stack, the
state-of-the-art high availability and load balancing stack for the
Linux platform. Pacemaker is storage and application-agnostic, and is
in no way specific to OpenStack.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Pacemaker relies on the <fo:basic-link external-destination="url(http://www.corosync.org)"><fo:inline color="blue" font-style="normal">Corosync</fo:inline></fo:basic-link> messaging
layer for reliable cluster communications. Corosync implements the
Totem single-ring ordering and membership protocol. It also provides UDP
and InfiniBand based messaging, quorum, and cluster membership to
Pacemaker.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Pacemaker interacts with applications through <fo:inline font-style="italic">resource agents</fo:inline> (RAs),
of which it supports over 70 natively. Pacemaker can also easily use
third-party RAs. An OpenStack high-availability configuration uses
existing native Pacemaker RAs (such as those managing MySQL
databases or virtual IP addresses), existing third-party RAs (such as
for RabbitMQ), and native OpenStack RAs (such as those managing the
OpenStack Identity and Image Services).</fo:block><fo:block id="_install_packages"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0pt" font-family="CartoGothic Std"><fo:block keep-with-next.within-column="always"><fo:block font-family="CartoGothic Std" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt" color="rgb(196,0,34)"><fo:marker marker-class-name="section.head.marker">Install packages</fo:marker><fo:block font-size="20.735999999999997pt">Install packages</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">On any host that is meant to be part of a Pacemaker cluster, you must
first establish cluster communications through the Corosync messaging
layer. This involves Install the following packages (and their
dependencies, which your package manager will normally install
automatically):</fo:block><fo:list-block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em" provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em" id="d5e106"><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d5e107"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block><fo:inline font-family="monospace">pacemaker</fo:inline> Note that the crm shell should be downloaded separately.
</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d5e110"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>
              <fo:inline font-family="monospace">crmsh</fo:inline>
            </fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d5e113"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>
              <fo:inline font-family="monospace">corosync</fo:inline>
            </fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d5e116"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>
              <fo:inline font-family="monospace">cluster-glue</fo:inline>
            </fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d5e119"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block><fo:inline font-family="monospace">fence-agents</fo:inline> (Fedora only; all other distributions use fencing
  agents from <fo:inline font-family="monospace">cluster-glue</fo:inline>)
</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d5e123"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>
              <fo:inline font-family="monospace">resource-agents</fo:inline>
            </fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:block><fo:block id="_set_up_corosync"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0pt" font-family="CartoGothic Std"><fo:block keep-with-next.within-column="always"><fo:block font-family="CartoGothic Std" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt" color="rgb(196,0,34)"><fo:marker marker-class-name="section.head.marker">Set up Corosync</fo:marker><fo:block font-size="20.735999999999997pt">Set up Corosync</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Besides installing the <fo:inline font-family="monospace">corosync</fo:inline> package, you must also
create a configuration file, stored in
<fo:inline font-family="monospace">/etc/corosync/corosync.conf</fo:inline>. Most distributions ship an example
configuration file (<fo:inline font-family="monospace">corosync.conf.example</fo:inline>) as part of the
documentation bundled with the <fo:inline font-family="monospace">corosync</fo:inline> package. An example Corosync
configuration file is shown below:</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-weight="bold" keep-with-next.within-line="always" padding-end="1em">Corosync configuration file (<fo:inline font-family="monospace">corosync.conf</fo:inline>). </fo:inline>
            <fo:block space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" font-family="monospace" font-size="85%" hyphenation-character="\" background-color="#E0E0E0" id="d5e137">totem {
        version: 2

        # Time (in ms) to wait for a token <fo:inline id="CO1-1"><fo:external-graphic content-width="7pt" width="7pt" src="url(file:/Users/annegentle/src/ha-guide/doc/ha-guide/target/docbkx/images/callouts/1.svg)"/></fo:inline>
        token: 10000

        # How many token retransmits before forming a new
        # configuration
        token_retransmits_before_loss_const: 10

        # Turn off the virtual synchrony filter
        vsftype: none

        # Enable encryption <fo:inline id="CO1-2"><fo:external-graphic content-width="7pt" width="7pt" src="url(file:/Users/annegentle/src/ha-guide/doc/ha-guide/target/docbkx/images/callouts/2.svg)"/></fo:inline>
        secauth: on

        # How many threads to use for encryption/​decryption
        threads: 0

        # This specifies the redundant ring protocol,​ which may be
        # none,​ active,​ or passive.​ <fo:inline id="CO1-3"><fo:external-graphic content-width="7pt" width="7pt" src="url(file:/Users/annegentle/src/ha-guide/doc/ha-guide/target/docbkx/images/callouts/3.svg)"/></fo:inline>
        rrp_mode: active

        # The following is a two-ring multicast configuration.​ <fo:inline id="CO1-4"><fo:external-graphic content-width="7pt" width="7pt" src="url(file:/Users/annegentle/src/ha-guide/doc/ha-guide/target/docbkx/images/callouts/4.svg)"/></fo:inline>
        interface {
                ringnumber: 0
                bindnetaddr: 192.​168.​42.​0
                mcastaddr: 239.​255.​42.​1
                mcastport: 5405
        }
        interface {
                ringnumber: 1
                bindnetaddr: 10.​0.​42.​0
                mcastaddr: 239.​255.​42.​2
                mcastport: 5405
        }
}

amf {
        mode: disabled
}

service {
        # Load the Pacemaker Cluster Resource Manager <fo:inline id="CO1-5"><fo:external-graphic content-width="7pt" width="7pt" src="url(file:/Users/annegentle/src/ha-guide/doc/ha-guide/target/docbkx/images/callouts/5.svg)"/></fo:inline>
        ver:       1
        name:      pacemaker
}

aisexec {
        user:   root
        group:  root
}

logging {
        fileline: off
        to_stderr: yes
        to_logfile: no
        to_syslog: yes
        syslog_facility: daemon
        debug: off
        timestamp: on
        logger_subsys {
                subsys: AMF
                debug: off
                tags: enter|leave|trace1|trace2|trace3|trace4|trace6
        }
}</fo:block>
          </fo:block><fo:block id="d5e143" text-align="start"><fo:list-block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" provisional-distance-between-starts="2.2em" provisional-label-separation="0.2em"><fo:list-item id="d5e144"><fo:list-item-label end-indent="label-end()"><fo:block><fo:external-graphic content-width="7pt" width="7pt" src="url(file:/Users/annegentle/src/ha-guide/doc/ha-guide/target/docbkx/images/callouts/1.svg)"/></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>
The <fo:inline font-family="monospace">token</fo:inline> value specifies the time, in milliseconds, during
which the Corosync token is expected to be transmitted around the
ring. When this timeout expires, the token is declared lost, and after
<fo:inline font-family="monospace">token_retransmits_before_loss_const</fo:inline> lost tokens the non-responding
<fo:inline font-style="italic">processor</fo:inline> (cluster node) is declared dead. In other words,
<fo:inline font-family="monospace">token</fo:inline> × <fo:inline font-family="monospace">token_retransmits_before_loss_const</fo:inline> is the maximum
time a node is allowed to not respond to cluster messages before being
considered dead. The default for <fo:inline font-family="monospace">token</fo:inline> is 1000 (1 second), with 4
allowed retransmits. These defaults are intended to minimize failover
times, but can cause frequent "false alarms" and unintended failovers
in case of short network interruptions. The values used here are
safer, albeit with slightly extended failover times.
</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="d5e152"><fo:list-item-label end-indent="label-end()"><fo:block><fo:external-graphic content-width="7pt" width="7pt" src="url(file:/Users/annegentle/src/ha-guide/doc/ha-guide/target/docbkx/images/callouts/2.svg)"/></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>
With <fo:inline font-family="monospace">secauth</fo:inline> enabled, Corosync nodes mutually authenticate using
a 128-byte shared secret stored in <fo:inline font-family="monospace">/etc/corosync/authkey</fo:inline>, which may
be generated with the <fo:inline font-family="monospace">corosync-keygen</fo:inline> utility. When using <fo:inline font-family="monospace">secauth</fo:inline>,
cluster communications are also encrypted.
</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="d5e158"><fo:list-item-label end-indent="label-end()"><fo:block><fo:external-graphic content-width="7pt" width="7pt" src="url(file:/Users/annegentle/src/ha-guide/doc/ha-guide/target/docbkx/images/callouts/3.svg)"/></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>
In Corosync configurations using redundant networking (with more
than one <fo:inline font-family="monospace">interface</fo:inline>), you must select a Redundant Ring Protocol (RRP)
mode other than <fo:inline font-family="monospace">none</fo:inline>. <fo:inline font-family="monospace">active</fo:inline> is the recommended RRP mode.
</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="d5e163"><fo:list-item-label end-indent="label-end()"><fo:block><fo:external-graphic content-width="7pt" width="7pt" src="url(file:/Users/annegentle/src/ha-guide/doc/ha-guide/target/docbkx/images/callouts/4.svg)"/></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>
There are several things to note about the recommended interface
configuration:
</fo:block><fo:list-block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em" provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em" id="d5e165"><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d5e166"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>
The <fo:inline font-family="monospace">ringnumber</fo:inline> must differ between all configured interfaces,
  starting with 0.
</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d5e169"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>
The <fo:inline font-family="monospace">bindnetaddr</fo:inline> is the <fo:inline font-style="italic">network</fo:inline> address of the interfaces to bind
  to. The example uses two network addresses of <fo:inline font-family="monospace">/24</fo:inline> IPv4 subnets.
</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d5e174"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>
Multicast groups (<fo:inline font-family="monospace">mcastaddr</fo:inline>) <fo:inline font-style="italic">must not</fo:inline> be reused across cluster
  boundaries. In other words, no two distinct clusters should ever use
  the same multicast group. Be sure to select multicast addresses
  compliant with <fo:basic-link external-destination="url(http://www.ietf.org/rfc/rfc2365.txt)"><fo:inline color="blue" font-style="normal">RFC 2365,
  "Administratively Scoped IP Multicast"</fo:inline></fo:basic-link>.
</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d5e179"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>
For firewall configurations, note that Corosync communicates over
  UDP only, and uses <fo:inline font-family="monospace">mcastport</fo:inline> (for receives) and <fo:inline font-family="monospace">mcastport</fo:inline>-1 (for
  sends).
</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="d5e183"><fo:list-item-label end-indent="label-end()"><fo:block><fo:external-graphic content-width="7pt" width="7pt" src="url(file:/Users/annegentle/src/ha-guide/doc/ha-guide/target/docbkx/images/callouts/5.svg)"/></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>
The <fo:inline font-family="monospace">service</fo:inline> declaration for the <fo:inline font-family="monospace">pacemaker</fo:inline> service may be
placed in the <fo:inline font-family="monospace">corosync.conf</fo:inline> file directly, or in its own separate
file, <fo:inline font-family="monospace">/etc/corosync/service.d/pacemaker</fo:inline>.
</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Once created, the <fo:inline font-family="monospace">corosync.conf</fo:inline> file (and the <fo:inline font-family="monospace">authkey</fo:inline> file if the
<fo:inline font-family="monospace">secauth</fo:inline> option is enabled) must be synchronized across all cluster
nodes.</fo:block></fo:block><fo:block id="_starting_corosync"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0pt" font-family="CartoGothic Std"><fo:block keep-with-next.within-column="always"><fo:block font-family="CartoGothic Std" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt" color="rgb(196,0,34)"><fo:marker marker-class-name="section.head.marker">Starting Corosync</fo:marker><fo:block font-size="20.735999999999997pt">Starting Corosync</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Corosync is started as a regular system service. Depending on your
distribution, it may ship with a LSB (System V style) init script, an
upstart job, or a systemd unit file. Either way, the service is
usually named <fo:inline font-family="monospace">corosync</fo:inline>:</fo:block><fo:list-block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em" provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em" id="d5e197"><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d5e198"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block><fo:inline font-family="monospace">/etc/init.d/corosync start</fo:inline> (LSB)
</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d5e201"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block><fo:inline font-family="monospace">service corosync start</fo:inline> (LSB, alternate)
</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d5e204"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block><fo:inline font-family="monospace">start corosync</fo:inline> (upstart)
</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d5e207"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block><fo:inline font-family="monospace">systemctl start corosync</fo:inline> (systemd)
</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">You can now check the Corosync connectivity with two tools.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The <fo:inline font-family="monospace">corosync-cfgtool</fo:inline> utility, when invoked with the <fo:inline font-family="monospace">-s</fo:inline> option,
gives a summary of the health of the communication rings:</fo:block><fo:block space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" font-family="monospace" font-size="85%" hyphenation-character="\" background-color="#E0E0E0" id="d5e214"><fo:inline font-family="monospace">#</fo:inline> <fo:inline font-family="monospace" font-weight="bold">corosync-cfgtool -s</fo:inline>
<fo:inline font-family="monospace">Printing ring status.​
Local node ID 435324542
RING ID 0
        id      =​ 192.​168.​42.​82
        status  =​ ring 0 active with no faults
RING ID 1
        id      =​ 10.​0.​42.​100
        status  =​ ring 1 active with no faults</fo:inline></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The <fo:inline font-family="monospace">corosync-objctl</fo:inline> utility can be used to dump the Corosync cluster
member list:</fo:block><fo:block space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" font-family="monospace" font-size="85%" hyphenation-character="\" background-color="#E0E0E0" id="d5e220"><fo:inline font-family="monospace">#</fo:inline> <fo:inline font-family="monospace" font-weight="bold">corosync-objctl runtime.​totem.​pg.​mrp.​srp.​members</fo:inline>
<fo:inline font-family="monospace">runtime.​totem.​pg.​mrp.​srp.​435324542.​ip=​r(0) ip(192.​168.​42.​82) r(1) ip(10.​0.​42.​100)
runtime.​totem.​pg.​mrp.​srp.​435324542.​join_count=​1
runtime.​totem.​pg.​mrp.​srp.​435324542.​status=​joined
runtime.​totem.​pg.​mrp.​srp.​983895584.​ip=​r(0) ip(192.​168.​42.​87) r(1) ip(10.​0.​42.​254)
runtime.​totem.​pg.​mrp.​srp.​983895584.​join_count=​1
runtime.​totem.​pg.​mrp.​srp.​983895584.​status=​joined</fo:inline></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">You should see a <fo:inline font-family="monospace">status=joined</fo:inline> entry for each of your constituent
cluster nodes.</fo:block></fo:block><fo:block id="_start_pacemaker"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0pt" font-family="CartoGothic Std"><fo:block keep-with-next.within-column="always"><fo:block font-family="CartoGothic Std" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt" color="rgb(196,0,34)"><fo:marker marker-class-name="section.head.marker">Start Pacemaker</fo:marker><fo:block font-size="20.735999999999997pt">Start Pacemaker</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Once the Corosync services have been started, and you have established
that the cluster is communicating properly, it is safe to start
<fo:inline font-family="monospace">pacemakerd</fo:inline>, the Pacemaker master control process:</fo:block><fo:list-block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em" provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em" id="d5e230"><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d5e231"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block><fo:inline font-family="monospace">/etc/init.d/pacemaker start</fo:inline> (LSB)
</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d5e234"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block><fo:inline font-family="monospace">service pacemaker start</fo:inline> (LSB, alternate)
</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d5e237"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block><fo:inline font-family="monospace">start pacemaker</fo:inline> (upstart)
</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d5e240"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block><fo:inline font-family="monospace">systemctl start pacemaker</fo:inline> (systemd)
</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Once Pacemaker services have started, Pacemaker will create a default
empty cluster configuration with no resources. You may observe
Pacemaker’s status with the <fo:inline font-family="monospace">crm_mon</fo:inline> utility:</fo:block><fo:block space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" font-family="monospace" font-size="85%" hyphenation-character="\" background-color="#E0E0E0" id="d5e245"><fo:inline font-family="monospace">=​=​=​=​=​=​=​=​=​=​=​=​
Last updated: Sun Oct  7 21:07:52 2012
Last change: Sun Oct  7 20:46:00 2012 via cibadmin on node2
Stack: openais
Current DC: node2 - partition with quorum
Version: 1.​1.​6-9971ebba4494012a93c03b40a2c58ec0eb60f50c
2 Nodes configured,​ 2 expected votes
0 Resources configured.​
=​=​=​=​=​=​=​=​=​=​=​=​

Online: [ node2 node1 ]</fo:inline></fo:block></fo:block><fo:block id="_set_basic_cluster_properties"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0pt" font-family="CartoGothic Std"><fo:block keep-with-next.within-column="always"><fo:block font-family="CartoGothic Std" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt" color="rgb(196,0,34)"><fo:marker marker-class-name="section.head.marker">Set basic cluster properties</fo:marker><fo:block font-size="20.735999999999997pt">Set basic cluster properties</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Once your Pacemaker cluster is set up, it is recommended to set a few
basic cluster properties. To do so, start the <fo:inline font-family="monospace">crm</fo:inline> shell and change
into the configuration menu by entering
<fo:inline font-family="monospace">configure</fo:inline>. Alternatively. you may jump straight into the Pacemaker
configuration menu by typing <fo:inline font-family="monospace">crm configure</fo:inline> directly from a shell
prompt.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Then, set the following properties:</fo:block><fo:block space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" font-family="monospace" font-size="85%" hyphenation-character="\" background-color="#E0E0E0" id="d5e254" keep-together.within-column="always">property no-quorum-policy=​"ignore" \​ # <fo:inline id="CO2-1"><fo:external-graphic content-width="7pt" width="7pt" src="url(file:/Users/annegentle/src/ha-guide/doc/ha-guide/target/docbkx/images/callouts/1.svg)"/></fo:inline>
  pe-warn-series-max=​"1000" \​        # <fo:inline id="CO2-2"><fo:external-graphic content-width="7pt" width="7pt" src="url(file:/Users/annegentle/src/ha-guide/doc/ha-guide/target/docbkx/images/callouts/2.svg)"/></fo:inline>
  pe-input-series-max=​"1000" \​
  pe-error-series-max=​"1000" \​
  cluster-recheck-interval=​"5min"    # <fo:inline id="CO2-3"><fo:external-graphic content-width="7pt" width="7pt" src="url(file:/Users/annegentle/src/ha-guide/doc/ha-guide/target/docbkx/images/callouts/3.svg)"/></fo:inline></fo:block><fo:block id="d5e258" text-align="start"><fo:list-block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" provisional-distance-between-starts="2.2em" provisional-label-separation="0.2em"><fo:list-item id="d5e259"><fo:list-item-label end-indent="label-end()"><fo:block><fo:external-graphic content-width="7pt" width="7pt" src="url(file:/Users/annegentle/src/ha-guide/doc/ha-guide/target/docbkx/images/callouts/1.svg)"/></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>
Setting <fo:inline font-family="monospace">no-quorum-policy="ignore"</fo:inline> is required in 2-node Pacemaker
clusters for the following reason: if quorum enforcement is enabled,
and one of the two nodes fails, then the remaining node can not
establish a <fo:inline font-style="italic">majority</fo:inline> of quorum votes necessary to run services, and
thus it is unable to take over any resources. The appropriate
workaround is to ignore loss of quorum in the cluster. This is safe
and necessary <fo:inline font-style="italic">only</fo:inline> in 2-node clusters. Do not set this property in
Pacemaker clusters with more than two nodes.
</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="d5e264"><fo:list-item-label end-indent="label-end()"><fo:block><fo:external-graphic content-width="7pt" width="7pt" src="url(file:/Users/annegentle/src/ha-guide/doc/ha-guide/target/docbkx/images/callouts/2.svg)"/></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>
Setting <fo:inline font-family="monospace">pe-warn-series-max</fo:inline>, <fo:inline font-family="monospace">pe-input-series-max</fo:inline> and
<fo:inline font-family="monospace">pe-error-series-max</fo:inline> to 1000 instructs Pacemaker to keep a longer
history of the inputs processed, and errors and warnings generated, by
its Policy Engine. This history is typically useful in case cluster
troubleshooting becomes necessary.
</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="d5e269"><fo:list-item-label end-indent="label-end()"><fo:block><fo:external-graphic content-width="7pt" width="7pt" src="url(file:/Users/annegentle/src/ha-guide/doc/ha-guide/target/docbkx/images/callouts/3.svg)"/></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>
Pacemaker uses an event-driven approach to cluster state
processing. However, certain Pacemaker actions occur at a configurable
interval, <fo:inline font-family="monospace">cluster-recheck-interval</fo:inline>, which defaults to 15 minutes. It
is usually prudent to reduce this to a shorter interval, such as 5 or
3 minutes.
</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Once you have made these changes, you may <fo:inline font-family="monospace">commit</fo:inline> the updated
configuration.</fo:block></fo:block></fo:flow></fo:page-sequence><fo:page-sequence xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" hyphenate="true" master-reference="body" language="en" format="1" initial-page-number="auto" force-page-count="no-force" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2"><fo:static-content xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" flow-name="xsl-region-before-first"><fo:block-container reference-orientation="90" absolute-position="fixed" top="-1in" overflow="visible" height="2in" width="30in" z-index="1"><fo:block padding-before=".45in" font-size="1.5em" color="gray" font-weight="bold"><fo:leader leader-pattern="use-content" leader-length="30in" letter-spacing=".1em">  </fo:leader></fo:block></fo:block-container><fo:block font-family="CartoGothic Std" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block>OpenStack High Availability Guide</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block>September 14, 2014</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block>current</fo:block></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" flow-name="xsl-region-before-odd"><fo:block-container reference-orientation="90" absolute-position="fixed" top="-1in" overflow="visible" height="2in" width="30in" z-index="1"><fo:block padding-before=".45in" font-size="1.5em" color="gray" font-weight="bold"><fo:leader leader-pattern="use-content" leader-length="30in" letter-spacing=".1em">  </fo:leader></fo:block></fo:block-container><fo:block font-family="CartoGothic Std" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block>OpenStack High Availability Guide</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block>September 14, 2014</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block>current</fo:block></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" flow-name="xsl-region-before-even"><fo:block-container reference-orientation="90" absolute-position="fixed" top="-1in" overflow="visible" height="2in" width="30in" z-index="1"><fo:block padding-before=".45in" font-size="1.5em" color="gray" font-weight="bold"><fo:leader leader-pattern="use-content" leader-length="30in" letter-spacing=".1em">  </fo:leader></fo:block></fo:block-container><fo:block font-family="CartoGothic Std" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block>OpenStack High Availability Guide</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block>September 14, 2014</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block>current</fo:block></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" flow-name="xsl-region-before-blank"><fo:block-container reference-orientation="90" absolute-position="fixed" top="-1in" overflow="visible" height="2in" width="30in" z-index="1"><fo:block padding-before=".45in" font-size="1.5em" color="gray" font-weight="bold"><fo:leader leader-pattern="use-content" leader-length="30in" letter-spacing=".1em">  </fo:leader></fo:block></fo:block-container><fo:block font-family="CartoGothic Std" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-footnote-separator"><fo:block><fo:leader color="black" leader-pattern="rule" leader-length="1in"/></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-first"><fo:block font-family="CartoGothic Std" margin-left="0pt"><fo:table xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-odd"><fo:block font-family="CartoGothic Std" margin-left="0pt"><fo:table xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-even"><fo:block font-family="CartoGothic Std" margin-left="0pt"><fo:table xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-blank"><fo:block font-family="CartoGothic Std" margin-left="0pt"><fo:table xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:flow flow-name="xsl-region-body" start-indent="4pc" end-indent="0pt"><fo:block id="ch-controller"><fo:block font-family="CartoGothic Std"><fo:block margin-left="0pt"><fo:block font-size="24.8832pt" font-weight="bold"><fo:block keep-with-next.within-column="always" space-before.optimum="10pt" space-before.minimum="10pt * 0.8" space-before.maximum="10pt * 1.2" hyphenate="false" text-align="start" start-indent="0pt" font-family="CartoGothic Std" color="rgb(196,0,34)" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2">3. Cloud controller cluster stack</fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="1em" space-before.maximum="2em" space-after.minimum="0.5em" space-after.optimum="1em" space-after.maximum="2em" id="toc...ch-controller"><fo:block><fo:block><fo:block space-before.minimum="1em" space-before.optimum="1.5em" space-before.maximum="2em" space-after="0.5em" margin-left="0pt" start-indent="0pt" font-size="20.736pt" font-weight="bold" color="rgb(196,0,34)" font-family="CartoGothic Std">Table of Contents</fo:block></fo:block></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="s-mysql">Highly available MySQL</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="s-mysql"><fo:page-number-citation ref-id="s-mysql"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="s-rabbitmq">Highly available RabbitMQ</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="s-rabbitmq"><fo:page-number-citation ref-id="s-rabbitmq"/></fo:basic-link></fo:inline></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The cloud controller runs on the management network and must talk to all other services.</fo:block><fo:block id="s-mysql"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0pt" font-family="CartoGothic Std"><fo:block keep-with-next.within-column="always"><fo:block font-family="CartoGothic Std" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt" color="rgb(196,0,34)"><fo:marker marker-class-name="section.head.marker">Highly available MySQL</fo:marker><fo:block font-size="20.735999999999997pt">Highly available MySQL</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">MySQL is the default database server used by many OpenStack
services. Making the MySQL service highly available involves</fo:block><fo:list-block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em" provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em" id="d5e280"><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d5e281"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>
Configure a DRBD device for use by MySQL,
</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d5e283"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>
Configure MySQL to use a data directory residing on that DRBD
  device,
</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d5e285"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>
selecting and assigning a virtual IP address (VIP) that can freely
  float between cluster nodes,
</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d5e287"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>
Configure MySQL to listen on that IP address,
</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d5e289"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>
managing all resources, including the MySQL daemon itself, with
  the Pacemaker cluster manager.
</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em" id="d5e291"><fo:list-block provisional-distance-between-starts="36pt + 18pt" provisional-label-separation="18pt"><fo:list-item><fo:list-item-label end-indent="label-end()"><fo:block><fo:external-graphic width="auto" height="auto" content-width="36pt" src="url(file:/Users/annegentle/src/ha-guide/doc/ha-guide/target/docbkx/images/note.svg)"/></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block font-size="14pt" font-weight="bold" hyphenate="false" keep-with-next.within-column="always" color="rgb(196,0,34)" font-family="CartoGothic Std">Note</fo:block><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:basic-link external-destination="url(http://galeracluster.com/)"><fo:inline color="blue" font-style="normal">MySQL/Galera</fo:inline></fo:basic-link> is an
alternative method of Configure MySQL for high availability. It is
likely to become the preferred method of achieving MySQL high
availability once it has sufficiently matured. At the time of writing,
however, the Pacemaker/DRBD based approach remains the recommended one
for OpenStack environments.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:block><fo:block id="_configure_drbd"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0pt" font-family="CartoGothic Std"><fo:block keep-with-next.within-column="always"><fo:block font-family="CartoGothic Std" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt" color="rgb(196,0,34)"><fo:marker marker-class-name="section.head.marker">Configure DRBD</fo:marker><fo:block font-size="17.28pt">Configure DRBD</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The Pacemaker based MySQL server requires a DRBD resource from
which it mounts the <fo:inline font-family="monospace">/var/lib/mysql</fo:inline> directory. In this example,
the DRBD resource is simply named <fo:inline font-family="monospace">mysql</fo:inline>:</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-weight="bold" keep-with-next.within-line="always" padding-end="1em"><fo:inline font-family="monospace">mysql</fo:inline> DRBD resource configuration (<fo:inline font-family="monospace">/etc/drbd.d/mysql.res</fo:inline>). </fo:inline>
              <fo:block space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" font-family="monospace" font-size="85%" hyphenation-character="\" background-color="#E0E0E0" id="d5e304" keep-together.within-column="always">resource mysql {
  device    minor 0;
  disk      "/​dev/​data/​mysql";
  meta-disk internal;
  on node1 {
    address ipv4 10.​0.​42.​100:7700;
  }
  on node2 {
    address ipv4 10.​0.​42.​254:7700;
  }
}</fo:block>
            </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This resource uses an underlying local disk (in DRBD terminology, a
<fo:inline font-style="italic">backing device</fo:inline>) named <fo:inline font-family="monospace">/dev/data/mysql</fo:inline> on both cluster nodes,
<fo:inline font-family="monospace">node1</fo:inline> and <fo:inline font-family="monospace">node2</fo:inline>. Normally, this would be an LVM Logical Volume
specifically set aside for this purpose. The DRBD <fo:inline font-family="monospace">meta-disk</fo:inline> is
<fo:inline font-family="monospace">internal</fo:inline>, meaning DRBD-specific metadata is being stored at the end
of the <fo:inline font-family="monospace">disk</fo:inline> device itself. The device is configured to communicate
between IPv4 addresses 10.0.42.100 and 10.0.42.254, using TCP port
7700. Once enabled, it will map to a local DRBD block device with the
device minor number 0, that is, <fo:inline font-family="monospace">/dev/drbd0</fo:inline>.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Enabling a DRBD resource is explained in detail in
<fo:basic-link external-destination="url(http://www.drbd.org/users-guide-8.3/s-first-time-up.html)"><fo:inline color="blue" font-style="normal">the DRBD
User’s Guide</fo:inline></fo:basic-link>. In brief, the proper sequence of commands is this:</fo:block><fo:block space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" font-family="monospace" font-size="85%" hyphenation-character="\" background-color="#E0E0E0" id="d5e316"><fo:inline font-family="monospace">#</fo:inline> <fo:inline font-family="monospace" font-weight="bold">drbdadm create-md mysql</fo:inline><fo:inline id="CO3-1"><fo:external-graphic content-width="7pt" width="7pt" src="url(file:/Users/annegentle/src/ha-guide/doc/ha-guide/target/docbkx/images/callouts/1.svg)"/></fo:inline>
<fo:inline font-family="monospace">#</fo:inline> <fo:inline font-family="monospace" font-weight="bold">drbdadm up mysql</fo:inline><fo:inline id="CO3-2"><fo:external-graphic content-width="7pt" width="7pt" src="url(file:/Users/annegentle/src/ha-guide/doc/ha-guide/target/docbkx/images/callouts/2.svg)"/></fo:inline>
<fo:inline font-family="monospace">#</fo:inline> <fo:inline font-family="monospace" font-weight="bold">drbdadm -- --force primary mysql</fo:inline><fo:inline id="CO3-3"><fo:external-graphic content-width="7pt" width="7pt" src="url(file:/Users/annegentle/src/ha-guide/doc/ha-guide/target/docbkx/images/callouts/3.svg)"/></fo:inline></fo:block><fo:block id="d5e326" text-align="start"><fo:list-block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" provisional-distance-between-starts="2.2em" provisional-label-separation="0.2em"><fo:list-item id="d5e327"><fo:list-item-label end-indent="label-end()"><fo:block><fo:external-graphic content-width="7pt" width="7pt" src="url(file:/Users/annegentle/src/ha-guide/doc/ha-guide/target/docbkx/images/callouts/1.svg)"/></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>
Initializes DRBD metadata and writes the initial set of metadata
to <fo:inline font-family="monospace">/dev/data/mysql</fo:inline>. Must be completed on both nodes.
</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="d5e330"><fo:list-item-label end-indent="label-end()"><fo:block><fo:external-graphic content-width="7pt" width="7pt" src="url(file:/Users/annegentle/src/ha-guide/doc/ha-guide/target/docbkx/images/callouts/2.svg)"/></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>
Creates the <fo:inline font-family="monospace">/dev/drbd0</fo:inline> device node, <fo:inline font-style="italic">attaches</fo:inline> the DRBD device
to its backing store, and <fo:inline font-style="italic">connects</fo:inline> the DRBD node to its peer. Must
be completed on both nodes.
</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="d5e335"><fo:list-item-label end-indent="label-end()"><fo:block><fo:external-graphic content-width="7pt" width="7pt" src="url(file:/Users/annegentle/src/ha-guide/doc/ha-guide/target/docbkx/images/callouts/3.svg)"/></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>
Kicks off the initial device synchronization, and puts the device
into the <fo:inline font-family="monospace">primary</fo:inline> (readable and writable) role. See
<fo:basic-link external-destination="url(http://www.drbd.org/users-guide-8.3/ch-admin.html#s-roles)"><fo:inline color="blue" font-style="normal">Resource
roles</fo:inline></fo:basic-link> (from the DRBD User’s Guide) for a more detailed description of
the primary and secondary roles in DRBD. Must be completed <fo:inline font-style="italic">on one
node only,</fo:inline> namely the one where you are about to continue with
creating your filesystem.
</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:block></fo:block><fo:block id="_creating_a_file_system"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0pt" font-family="CartoGothic Std"><fo:block keep-with-next.within-column="always"><fo:block font-family="CartoGothic Std" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt" color="rgb(196,0,34)"><fo:marker marker-class-name="section.head.marker">Creating a file system</fo:marker><fo:block font-size="17.28pt">Creating a file system</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Once the DRBD resource is running and in the primary role (and
potentially still in the process of running the initial device
synchronization), you may proceed with creating the filesystem for
MySQL data. XFS is the generally recommended filesystem:</fo:block><fo:block space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" font-family="monospace" font-size="85%" hyphenation-character="\" background-color="#E0E0E0" id="d5e343"><fo:inline font-family="monospace">#</fo:inline> <fo:inline font-family="monospace" font-weight="bold">mkfs -t xfs /​dev/​drbd0</fo:inline></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">You may also use the alternate device path for the DRBD device, which
may be easier to remember as it includes the self-explanatory resource
name:</fo:block><fo:block space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" font-family="monospace" font-size="85%" hyphenation-character="\" background-color="#E0E0E0" id="d5e347"><fo:inline font-family="monospace">#</fo:inline> <fo:inline font-family="monospace" font-weight="bold">mkfs -t xfs /​dev/​drbd/​by-res/​mysql</fo:inline></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Once completed, you may safely return the device to the secondary
role. Any ongoing device synchronization will continue in the
background:</fo:block><fo:block space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" font-family="monospace" font-size="85%" hyphenation-character="\" background-color="#E0E0E0" id="d5e351"><fo:inline font-family="monospace">#</fo:inline> <fo:inline font-family="monospace" font-weight="bold">drbdadm secondary mysql</fo:inline></fo:block></fo:block><fo:block id="_prepare_mysql_for_pacemaker_high_availability"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0pt" font-family="CartoGothic Std"><fo:block keep-with-next.within-column="always"><fo:block font-family="CartoGothic Std" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt" color="rgb(196,0,34)"><fo:marker marker-class-name="section.head.marker">Prepare MySQL for Pacemaker high availability</fo:marker><fo:block font-size="17.28pt">Prepare MySQL for Pacemaker high availability</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">In order for Pacemaker monitoring to function properly, you must
ensure that MySQL’s database files reside on the DRBD device. If you
already have an existing MySQL database, the simplest approach is to
just move the contents of the existing <fo:inline font-family="monospace">/var/lib/mysql</fo:inline> directory into
the newly created filesystem on the DRBD device.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em" id="d5e358"><fo:list-block provisional-distance-between-starts="36pt + 18pt" provisional-label-separation="18pt"><fo:list-item><fo:list-item-label end-indent="label-end()"><fo:block><fo:external-graphic width="auto" height="auto" content-width="36pt" src="url(file:/Users/annegentle/src/ha-guide/doc/ha-guide/target/docbkx/images/warning.svg)"/></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block font-size="14pt" font-weight="bold" hyphenate="false" keep-with-next.within-column="always" color="rgb(196,0,34)" font-family="CartoGothic Std">Warning</fo:block><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">You must complete the next step while the MySQL database
server is shut down.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:block><fo:block space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" font-family="monospace" font-size="85%" hyphenation-character="\" background-color="#E0E0E0" id="d5e360"><fo:inline font-family="monospace">#</fo:inline> <fo:inline font-family="monospace" font-weight="bold">mount /​dev/​drbd/​by-res/​mysql /​mnt</fo:inline>
<fo:inline font-family="monospace">#</fo:inline> <fo:inline font-family="monospace" font-weight="bold">mv /​var/​lib/​mysql/​* /​mnt</fo:inline>
<fo:inline font-family="monospace">#</fo:inline> <fo:inline font-family="monospace" font-weight="bold">umount /​mnt</fo:inline></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">For a new MySQL installation with no existing data, you may also run
the <fo:inline font-family="monospace">mysql_install_db</fo:inline> command:</fo:block><fo:block space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" font-family="monospace" font-size="85%" hyphenation-character="\" background-color="#E0E0E0" id="d5e369"><fo:inline font-family="monospace">#</fo:inline> <fo:inline font-family="monospace" font-weight="bold">mount /​dev/​drbd/​by-res/​mysql /​mnt</fo:inline>
<fo:inline font-family="monospace">#</fo:inline> <fo:inline font-family="monospace" font-weight="bold">mysql_install_db --datadir=​/​mnt</fo:inline>
<fo:inline font-family="monospace">#</fo:inline> <fo:inline font-family="monospace" font-weight="bold">umount /​mnt</fo:inline></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Regardless of the approach, the steps outlined here must be completed
on only one cluster node.</fo:block></fo:block><fo:block id="_add_mysql_resources_to_pacemaker"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0pt" font-family="CartoGothic Std"><fo:block keep-with-next.within-column="always"><fo:block font-family="CartoGothic Std" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt" color="rgb(196,0,34)"><fo:marker marker-class-name="section.head.marker">Add MySQL resources to Pacemaker</fo:marker><fo:block font-size="17.28pt">Add MySQL resources to Pacemaker</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">You can now add the Pacemaker configuration for
MySQL resources. Connect to the Pacemaker cluster with <fo:inline font-family="monospace">crm
configure</fo:inline>, and add the following cluster resources:</fo:block><fo:block space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" font-family="monospace" font-size="85%" hyphenation-character="\" background-color="#E0E0E0" id="d5e381">primitive p_ip_mysql ocf:heartbeat:IPaddr2 \​
  params ip=​"192.​168.​42.​101" cidr_netmask=​"24" \​
  op monitor interval=​"30s"
primitive p_drbd_mysql ocf:linbit:drbd \​
  params drbd_resource=​"mysql" \​
  op start timeout=​"90s" \​
  op stop timeout=​"180s" \​
  op promote timeout=​"180s" \​
  op demote timeout=​"180s" \​
  op monitor interval=​"30s" role=​"Slave" \​
  op monitor interval=​"29s" role=​"Master"
primitive p_fs_mysql ocf:heartbeat:Filesystem \​
  params device=​"/​dev/​drbd/​by-res/​mysql" \​
    directory=​"/​var/​lib/​mysql" \​
    fstype=​"xfs" \​
    options=​"relatime" \​
  op start timeout=​"60s" \​
  op stop timeout=​"180s" \​
  op monitor interval=​"60s" timeout=​"60s"
primitive p_mysql ocf:heartbeat:mysql \​
  params additional_parameters=​"--bind-address=​50.​56.​179.​138"
    config=​"/​etc/​mysql/​my.​cnf" \​
    pid=​"/​var/​run/​mysqld/​mysqld.​pid" \​
    socket=​"/​var/​run/​mysqld/​mysqld.​sock" \​
    log=​"/​var/​log/​mysql/​mysqld.​log" \​
  op monitor interval=​"20s" timeout=​"10s" \​
  op start timeout=​"120s" \​
  op stop timeout=​"120s"
group g_mysql p_ip_mysql p_fs_mysql p_mysql
ms ms_drbd_mysql p_drbd_mysql \​
  meta notify=​"true" clone-max=​"2"
colocation c_mysql_on_drbd inf: g_mysql ms_drbd_mysql:Master
order o_drbd_before_mysql inf: ms_drbd_mysql:promote g_mysql:start</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This configuration creates</fo:block><fo:list-block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em" provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em" id="d5e383"><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d5e384"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block><fo:inline font-family="monospace">p_ip_mysql</fo:inline>, a virtual IP address for use by MySQL
  (192.168.42.101),
</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d5e387"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block><fo:inline font-family="monospace">p_fs_mysql</fo:inline>, a Pacemaker managed filesystem mounted to
  <fo:inline font-family="monospace">/var/lib/mysql</fo:inline> on whatever node currently runs the MySQL
  service,
</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d5e391"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block><fo:inline font-family="monospace">ms_drbd_mysql</fo:inline>, the <fo:inline font-style="italic">master/slave set</fo:inline> managing the <fo:inline font-family="monospace">mysql</fo:inline>
  DRBD resource,
</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d5e396"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>
a service <fo:inline font-family="monospace">group</fo:inline> and <fo:inline font-family="monospace">order</fo:inline> and <fo:inline font-family="monospace">colocation</fo:inline> constraints to ensure
  resources are started on the correct nodes, and in the correct sequence.
</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-family="monospace">crm configure</fo:inline> supports batch input, so you may copy and paste the
above into your live pacemaker configuration, and then make changes as
required. For example, you may enter <fo:inline font-family="monospace">edit p_ip_mysql</fo:inline> from the
<fo:inline font-family="monospace">crm configure</fo:inline> menu and edit the resource to match your preferred
virtual IP address.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Once completed, commit your configuration changes by entering <fo:inline font-family="monospace">commit</fo:inline>
from the <fo:inline font-family="monospace">crm configure</fo:inline> menu. Pacemaker will then start the MySQL
service, and its dependent resources, on one of your nodes.</fo:block></fo:block><fo:block id="_configure_openstack_services_for_highly_available_mysql"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0pt" font-family="CartoGothic Std"><fo:block keep-with-next.within-column="always"><fo:block font-family="CartoGothic Std" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt" color="rgb(196,0,34)"><fo:marker marker-class-name="section.head.marker">Configure OpenStack services for highly available MySQL</fo:marker><fo:block font-size="17.28pt">Configure OpenStack services for highly available MySQL</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Your OpenStack services must now point their MySQL configuration to
the highly available, virtual cluster IP address—rather than a
MySQL server’s physical IP address as you normally would.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">For OpenStack Image, for example, if your MySQL service IP address is
192.168.42.101 as in the configuration explained here, you would use
the following line in your OpenStack Image registry configuration file
(<fo:inline font-family="monospace">glance-registry.conf</fo:inline>):</fo:block><fo:block space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" font-family="monospace" font-size="85%" hyphenation-character="\" background-color="#E0E0E0" id="d5e413" keep-together.within-column="always">sql_connection =​ mysql:/​/​glancedbadmin:&lt;password&gt;@192.​168.​42.​101/​glance</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">No other changes are necessary to your OpenStack configuration. If the
node currently hosting your database experiences a problem
necessitating service failover, your OpenStack services may experience
a brief MySQL interruption, as they would in the event of a network
hiccup, and then continue to run normally.</fo:block></fo:block></fo:block><fo:block id="s-rabbitmq"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0pt" font-family="CartoGothic Std"><fo:block keep-with-next.within-column="always"><fo:block font-family="CartoGothic Std" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt" color="rgb(196,0,34)"><fo:marker marker-class-name="section.head.marker">Highly available RabbitMQ</fo:marker><fo:block font-size="20.735999999999997pt">Highly available RabbitMQ</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">RabbitMQ is the default AMQP server used by many OpenStack
services. Making the RabbitMQ service highly available involves:</fo:block><fo:list-block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em" provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em" id="d5e418"><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d5e419"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>
configuring a DRBD device for use by RabbitMQ,
</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d5e421"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>
configuring RabbitMQ to use a data directory residing on that DRBD
  device,
</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d5e423"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>
selecting and assigning a virtual IP address (VIP) that can freely
  float between cluster nodes,
</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d5e425"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>
configuring RabbitMQ to listen on that IP address,
</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d5e427"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>
managing all resources, including the RabbitMQ daemon itself, with
  the Pacemaker cluster manager.
</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em" id="d5e429"><fo:list-block provisional-distance-between-starts="36pt + 18pt" provisional-label-separation="18pt"><fo:list-item><fo:list-item-label end-indent="label-end()"><fo:block><fo:external-graphic width="auto" height="auto" content-width="36pt" src="url(file:/Users/annegentle/src/ha-guide/doc/ha-guide/target/docbkx/images/note.svg)"/></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block font-size="14pt" font-weight="bold" hyphenate="false" keep-with-next.within-column="always" color="rgb(196,0,34)" font-family="CartoGothic Std">Note</fo:block><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">There is an alternative method of configuring RabbitMQ for high
availability. That approach, known as
<fo:basic-link external-destination="url(http://www.rabbitmq.com/ha.html)"><fo:inline color="blue" font-style="normal">active-active mirrored queues</fo:inline></fo:basic-link>,
happens to be the one preferred by the RabbitMQ developers—however
it has shown less than ideal consistency and reliability in OpenStack
clusters. Thus, at the time of writing, the Pacemaker/DRBD based
approach remains the recommended one for OpenStack environments,
although this may change in the near future as RabbitMQ active-active
mirrored queues mature.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:block><fo:block id="_configure_drbd_2"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0pt" font-family="CartoGothic Std"><fo:block keep-with-next.within-column="always"><fo:block font-family="CartoGothic Std" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt" color="rgb(196,0,34)"><fo:marker marker-class-name="section.head.marker">Configure DRBD</fo:marker><fo:block font-size="17.28pt">Configure DRBD</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The Pacemaker based RabbitMQ server requires a DRBD resource from
which it mounts the <fo:inline font-family="monospace">/var/lib/rabbitmq</fo:inline> directory. In this example,
the DRBD resource is simply named <fo:inline font-family="monospace">rabbitmq</fo:inline>:</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-weight="bold" keep-with-next.within-line="always" padding-end="1em"><fo:inline font-family="monospace">rabbitmq</fo:inline> DRBD resource configuration (<fo:inline font-family="monospace">/etc/drbd.d/rabbitmq.res</fo:inline>). </fo:inline>
              <fo:block space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" font-family="monospace" font-size="85%" hyphenation-character="\" background-color="#E0E0E0" id="d5e442" keep-together.within-column="always">resource rabbitmq {
  device    minor 1;
  disk      "/​dev/​data/​rabbitmq";
  meta-disk internal;
  on node1 {
    address ipv4 10.​0.​42.​100:7701;
  }
  on node2 {
    address ipv4 10.​0.​42.​254:7701;
  }
}</fo:block>
            </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This resource uses an underlying local disk (in DRBD terminology, a
<fo:inline font-style="italic">backing device</fo:inline>) named <fo:inline font-family="monospace">/dev/data/rabbitmq</fo:inline> on both cluster nodes,
<fo:inline font-family="monospace">node1</fo:inline> and <fo:inline font-family="monospace">node2</fo:inline>. Normally, this would be an LVM Logical Volume
specifically set aside for this purpose. The DRBD <fo:inline font-family="monospace">meta-disk</fo:inline> is
<fo:inline font-family="monospace">internal</fo:inline>, meaning DRBD-specific metadata is being stored at the end
of the <fo:inline font-family="monospace">disk</fo:inline> device itself. The device is configured to communicate
between IPv4 addresses 10.0.42.100 and 10.0.42.254, using TCP port
7701. Once enabled, it will map to a local DRBD block device with the
device minor number 1, that is, <fo:inline font-family="monospace">/dev/drbd1</fo:inline>.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Enabling a DRBD resource is explained in detail in
<fo:basic-link external-destination="url(http://www.drbd.org/users-guide-8.3/s-first-time-up.html)"><fo:inline color="blue" font-style="normal">the DRBD
User’s Guide</fo:inline></fo:basic-link>. In brief, the proper sequence of commands is this:</fo:block><fo:block space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" font-family="monospace" font-size="85%" hyphenation-character="\" background-color="#E0E0E0" id="d5e454"><fo:inline font-family="monospace">#</fo:inline> <fo:inline font-family="monospace" font-weight="bold">drbdadm create-md rabbitmq</fo:inline><fo:inline id="CO4-1"><fo:external-graphic content-width="7pt" width="7pt" src="url(file:/Users/annegentle/src/ha-guide/doc/ha-guide/target/docbkx/images/callouts/1.svg)"/></fo:inline>
<fo:inline font-family="monospace">#</fo:inline> <fo:inline font-family="monospace" font-weight="bold">drbdadm up rabbitmq</fo:inline><fo:inline id="CO4-2"><fo:external-graphic content-width="7pt" width="7pt" src="url(file:/Users/annegentle/src/ha-guide/doc/ha-guide/target/docbkx/images/callouts/2.svg)"/></fo:inline>
<fo:inline font-family="monospace">#</fo:inline> <fo:inline font-family="monospace" font-weight="bold">drbdadm -- --force primary rabbitmq</fo:inline><fo:inline id="CO4-3"><fo:external-graphic content-width="7pt" width="7pt" src="url(file:/Users/annegentle/src/ha-guide/doc/ha-guide/target/docbkx/images/callouts/3.svg)"/></fo:inline></fo:block><fo:block id="d5e464" text-align="start"><fo:list-block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" provisional-distance-between-starts="2.2em" provisional-label-separation="0.2em"><fo:list-item id="d5e465"><fo:list-item-label end-indent="label-end()"><fo:block><fo:external-graphic content-width="7pt" width="7pt" src="url(file:/Users/annegentle/src/ha-guide/doc/ha-guide/target/docbkx/images/callouts/1.svg)"/></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>
Initializes DRBD metadata and writes the initial set of metadata
to <fo:inline font-family="monospace">/dev/data/rabbitmq</fo:inline>. Must be completed on both nodes.
</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="d5e468"><fo:list-item-label end-indent="label-end()"><fo:block><fo:external-graphic content-width="7pt" width="7pt" src="url(file:/Users/annegentle/src/ha-guide/doc/ha-guide/target/docbkx/images/callouts/2.svg)"/></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>
Creates the <fo:inline font-family="monospace">/dev/drbd1</fo:inline> device node, <fo:inline font-style="italic">attaches</fo:inline> the DRBD device
to its backing store, and <fo:inline font-style="italic">connects</fo:inline> the DRBD node to its peer. Must
be completed on both nodes.
</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="d5e473"><fo:list-item-label end-indent="label-end()"><fo:block><fo:external-graphic content-width="7pt" width="7pt" src="url(file:/Users/annegentle/src/ha-guide/doc/ha-guide/target/docbkx/images/callouts/3.svg)"/></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>
Kicks off the initial device synchronization, and puts the device
into the <fo:inline font-family="monospace">primary</fo:inline> (readable and writable) role. See
<fo:basic-link external-destination="url(http://www.drbd.org/users-guide-8.3/ch-admin.html#s-roles)"><fo:inline color="blue" font-style="normal">Resource
roles</fo:inline></fo:basic-link> (from the DRBD User’s Guide) for a more detailed description of
the primary and secondary roles in DRBD. Must be completed <fo:inline font-style="italic">on one
node only,</fo:inline> namely the one where you are about to continue with
creating your filesystem.
</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:block></fo:block><fo:block id="_create_a_file_system"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0pt" font-family="CartoGothic Std"><fo:block keep-with-next.within-column="always"><fo:block font-family="CartoGothic Std" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt" color="rgb(196,0,34)"><fo:marker marker-class-name="section.head.marker">Create a file system</fo:marker><fo:block font-size="17.28pt">Create a file system</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Once the DRBD resource is running and in the primary role (and
potentially still in the process of running the initial device
synchronization), you may proceed with creating the filesystem for
RabbitMQ data. XFS is generally the recommended filesystem:</fo:block><fo:block space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" font-family="monospace" font-size="85%" hyphenation-character="\" background-color="#E0E0E0" id="d5e481"><fo:inline font-family="monospace">#</fo:inline> <fo:inline font-family="monospace" font-weight="bold">mkfs -t xfs /​dev/​drbd1</fo:inline></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">You may also use the alternate device path for the DRBD device, which
may be easier to remember as it includes the self-explanatory resource
name:</fo:block><fo:block space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" font-family="monospace" font-size="85%" hyphenation-character="\" background-color="#E0E0E0" id="d5e485"><fo:inline font-family="monospace">#</fo:inline> <fo:inline font-family="monospace" font-weight="bold">mkfs -t xfs /​dev/​drbd/​by-res/​rabbitmq</fo:inline></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Once completed, you may safely return the device to the secondary
role. Any ongoing device synchronization will continue in the
background:</fo:block><fo:block space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" font-family="monospace" font-size="85%" hyphenation-character="\" background-color="#E0E0E0" id="d5e489"><fo:inline font-family="monospace">#</fo:inline> <fo:inline font-family="monospace" font-weight="bold">drbdadm secondary rabbitmq</fo:inline></fo:block></fo:block><fo:block id="_prepare_rabbitmq_for_pacemaker_high_availability"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0pt" font-family="CartoGothic Std"><fo:block keep-with-next.within-column="always"><fo:block font-family="CartoGothic Std" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt" color="rgb(196,0,34)"><fo:marker marker-class-name="section.head.marker">Prepare RabbitMQ for Pacemaker high availability</fo:marker><fo:block font-size="17.28pt">Prepare RabbitMQ for Pacemaker high availability</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">In order for Pacemaker monitoring to function properly, you must
ensure that RabbitMQ’s <fo:inline font-family="monospace">.erlang.cookie</fo:inline> files are identical on all
nodes, regardless of whether DRBD is mounted there or not. The
simplest way of doing so is to take an existing <fo:inline font-family="monospace">.erlang.cookie</fo:inline> from
one of your nodes, copying it to the RabbitMQ data directory on the
other node, and also copying it to the DRBD-backed filesystem.</fo:block><fo:block space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" font-family="monospace" font-size="85%" hyphenation-character="\" background-color="#E0E0E0" id="d5e497"><fo:inline font-family="monospace">#</fo:inline> <fo:inline font-family="monospace" font-weight="bold">scp -a /​var/​lib/​rabbitmq/​.​erlang.​cookie node2:/​var/​lib/​rabbitmq/</fo:inline>
<fo:inline font-family="monospace">#</fo:inline> <fo:inline font-family="monospace" font-weight="bold">mount /​dev/​drbd/​by-res/​rabbitmq /​mnt</fo:inline>
<fo:inline font-family="monospace">#</fo:inline> <fo:inline font-family="monospace" font-weight="bold">cp -a /​var/​lib/​rabbitmq/​.​erlang.​cookie /​mnt</fo:inline>
<fo:inline font-family="monospace">#</fo:inline> <fo:inline font-family="monospace" font-weight="bold">umount /​mnt</fo:inline></fo:block></fo:block><fo:block id="_add_rabbitmq_resources_to_pacemaker"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0pt" font-family="CartoGothic Std"><fo:block keep-with-next.within-column="always"><fo:block font-family="CartoGothic Std" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt" color="rgb(196,0,34)"><fo:marker marker-class-name="section.head.marker">Add RabbitMQ resources to Pacemaker</fo:marker><fo:block font-size="17.28pt">Add RabbitMQ resources to Pacemaker</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">You may now proceed with adding the Pacemaker configuration for
RabbitMQ resources. Connect to the Pacemaker cluster with <fo:inline font-family="monospace">crm
configure</fo:inline>, and add the following cluster resources:</fo:block><fo:block space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" font-family="monospace" font-size="85%" hyphenation-character="\" background-color="#E0E0E0" id="d5e510">primitive p_ip_rabbitmq ocf:heartbeat:IPaddr2 \​
  params ip=​"192.​168.​42.​100" cidr_netmask=​"24" \​
  op monitor interval=​"10s"
primitive p_drbd_rabbitmq ocf:linbit:drbd \​
  params drbd_resource=​"rabbitmq" \​
  op start timeout=​"90s" \​
  op stop timeout=​"180s" \​
  op promote timeout=​"180s" \​
  op demote timeout=​"180s" \​
  op monitor interval=​"30s" role=​"Slave" \​
  op monitor interval=​"29s" role=​"Master"
primitive p_fs_rabbitmq ocf:heartbeat:Filesystem \​
  params device=​"/​dev/​drbd/​by-res/​rabbitmq" \​
    directory=​"/​var/​lib/​rabbitmq" \​
    fstype=​"xfs" options=​"relatime" \​
  op start timeout=​"60s" \​
  op stop timeout=​"180s" \​
  op monitor interval=​"60s" timeout=​"60s"
primitive p_rabbitmq ocf:rabbitmq:rabbitmq-server \​
  params nodename=​"rabbit@localhost" \​
    mnesia_base=​"/​var/​lib/​rabbitmq" \​
  op monitor interval=​"20s" timeout=​"10s"
group g_rabbitmq p_ip_rabbitmq p_fs_rabbitmq p_rabbitmq
ms ms_drbd_rabbitmq p_drbd_rabbitmq \​
  meta notify=​"true" master-max=​"1" clone-max=​"2"
colocation c_rabbitmq_on_drbd inf: g_rabbitmq ms_drbd_rabbitmq:Master
order o_drbd_before_rabbitmq inf: ms_drbd_rabbitmq:promote g_rabbitmq:start</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This configuration creates</fo:block><fo:list-block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em" provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em" id="d5e512"><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d5e513"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block><fo:inline font-family="monospace">p_ip_rabbitmq</fo:inline>, a virtual IP address for use by RabbitMQ
  (192.168.42.100),
</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d5e516"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block><fo:inline font-family="monospace">p_fs_rabbitmq</fo:inline>, a Pacemaker managed filesystem mounted to
  <fo:inline font-family="monospace">/var/lib/rabbitmq</fo:inline> on whatever node currently runs the RabbitMQ
  service,
</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d5e520"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block><fo:inline font-family="monospace">ms_drbd_rabbitmq</fo:inline>, the <fo:inline font-style="italic">master/slave set</fo:inline> managing the <fo:inline font-family="monospace">rabbitmq</fo:inline>
  DRBD resource,
</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d5e525"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>
a service <fo:inline font-family="monospace">group</fo:inline> and <fo:inline font-family="monospace">order</fo:inline> and <fo:inline font-family="monospace">colocation</fo:inline> constraints to ensure
  resources are started on the correct nodes, and in the correct sequence.
</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-family="monospace">crm configure</fo:inline> supports batch input, so you may copy and paste the
above into your live pacemaker configuration, and then make changes as
required. For example, you may enter <fo:inline font-family="monospace">edit p_ip_rabbitmq</fo:inline> from the
<fo:inline font-family="monospace">crm configure</fo:inline> menu and edit the resource to match your preferred
virtual IP address.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Once completed, commit your configuration changes by entering <fo:inline font-family="monospace">commit</fo:inline>
from the <fo:inline font-family="monospace">crm configure</fo:inline> menu. Pacemaker will then start the RabbitMQ
service, and its dependent resources, on one of your nodes.</fo:block></fo:block><fo:block id="_configure_openstack_services_for_highly_available_rabbitmq"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0pt" font-family="CartoGothic Std"><fo:block keep-with-next.within-column="always"><fo:block font-family="CartoGothic Std" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt" color="rgb(196,0,34)"><fo:marker marker-class-name="section.head.marker">Configure OpenStack services for highly available RabbitMQ</fo:marker><fo:block font-size="17.28pt">Configure OpenStack services for highly available RabbitMQ</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Your OpenStack services must now point their RabbitMQ configuration to
the highly available, virtual cluster IP address—rather than a
RabbitMQ server’s physical IP address as you normally would.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">For OpenStack Image, for example, if your RabbitMQ service IP address is
192.168.42.100 as in the configuration explained here, you would use
the following line in your OpenStack Image API configuration file
(<fo:inline font-family="monospace">glance-api.conf</fo:inline>):</fo:block><fo:block space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" font-family="monospace" font-size="85%" hyphenation-character="\" background-color="#E0E0E0" id="d5e542" keep-together.within-column="always">rabbit_host =​ 192.​168.​42.​100</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">No other changes are necessary to your OpenStack configuration. If the
node currently hosting your RabbitMQ experiences a problem
necessitating service failover, your OpenStack services may experience
a brief RabbitMQ interruption, as they would in the event of a network
hiccup, and then continue to run normally.</fo:block></fo:block></fo:block></fo:flow></fo:page-sequence><fo:page-sequence xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" hyphenate="true" master-reference="body" language="en" format="1" initial-page-number="auto" force-page-count="no-force" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2"><fo:static-content xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" flow-name="xsl-region-before-first"><fo:block-container reference-orientation="90" absolute-position="fixed" top="-1in" overflow="visible" height="2in" width="30in" z-index="1"><fo:block padding-before=".45in" font-size="1.5em" color="gray" font-weight="bold"><fo:leader leader-pattern="use-content" leader-length="30in" letter-spacing=".1em">  </fo:leader></fo:block></fo:block-container><fo:block font-family="CartoGothic Std" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block>OpenStack High Availability Guide</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block>September 14, 2014</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block>current</fo:block></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" flow-name="xsl-region-before-odd"><fo:block-container reference-orientation="90" absolute-position="fixed" top="-1in" overflow="visible" height="2in" width="30in" z-index="1"><fo:block padding-before=".45in" font-size="1.5em" color="gray" font-weight="bold"><fo:leader leader-pattern="use-content" leader-length="30in" letter-spacing=".1em">  </fo:leader></fo:block></fo:block-container><fo:block font-family="CartoGothic Std" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block>OpenStack High Availability Guide</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block>September 14, 2014</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block>current</fo:block></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" flow-name="xsl-region-before-even"><fo:block-container reference-orientation="90" absolute-position="fixed" top="-1in" overflow="visible" height="2in" width="30in" z-index="1"><fo:block padding-before=".45in" font-size="1.5em" color="gray" font-weight="bold"><fo:leader leader-pattern="use-content" leader-length="30in" letter-spacing=".1em">  </fo:leader></fo:block></fo:block-container><fo:block font-family="CartoGothic Std" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block>OpenStack High Availability Guide</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block>September 14, 2014</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block>current</fo:block></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" flow-name="xsl-region-before-blank"><fo:block-container reference-orientation="90" absolute-position="fixed" top="-1in" overflow="visible" height="2in" width="30in" z-index="1"><fo:block padding-before=".45in" font-size="1.5em" color="gray" font-weight="bold"><fo:leader leader-pattern="use-content" leader-length="30in" letter-spacing=".1em">  </fo:leader></fo:block></fo:block-container><fo:block font-family="CartoGothic Std" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-footnote-separator"><fo:block><fo:leader color="black" leader-pattern="rule" leader-length="1in"/></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-first"><fo:block font-family="CartoGothic Std" margin-left="0pt"><fo:table xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-odd"><fo:block font-family="CartoGothic Std" margin-left="0pt"><fo:table xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-even"><fo:block font-family="CartoGothic Std" margin-left="0pt"><fo:table xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-blank"><fo:block font-family="CartoGothic Std" margin-left="0pt"><fo:table xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:flow flow-name="xsl-region-body" start-indent="4pc" end-indent="0pt"><fo:block id="ch-api"><fo:block font-family="CartoGothic Std"><fo:block margin-left="0pt"><fo:block font-size="24.8832pt" font-weight="bold"><fo:block keep-with-next.within-column="always" space-before.optimum="10pt" space-before.minimum="10pt * 0.8" space-before.maximum="10pt * 1.2" hyphenate="false" text-align="start" start-indent="0pt" font-family="CartoGothic Std" color="rgb(196,0,34)" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2">4. API node cluster stack</fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="1em" space-before.maximum="2em" space-after.minimum="0.5em" space-after.optimum="1em" space-after.maximum="2em" id="toc...ch-api"><fo:block><fo:block><fo:block space-before.minimum="1em" space-before.optimum="1.5em" space-before.maximum="2em" space-after="0.5em" margin-left="0pt" start-indent="0pt" font-size="20.736pt" font-weight="bold" color="rgb(196,0,34)" font-family="CartoGothic Std">Table of Contents</fo:block></fo:block></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="s-api-vip">Configure the VIP</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="s-api-vip"><fo:page-number-citation ref-id="s-api-vip"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="s-keystone">Highly available OpenStack Identity</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="s-keystone"><fo:page-number-citation ref-id="s-keystone"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="s-glance-api">Highly available OpenStack Image API</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="s-glance-api"><fo:page-number-citation ref-id="s-glance-api"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="s-cinder-api">Highly available Block Storage API</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="s-cinder-api"><fo:page-number-citation ref-id="s-cinder-api"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="s-neutron-server">Highly available OpenStack Networking server</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="s-neutron-server"><fo:page-number-citation ref-id="s-neutron-server"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="s-ceilometer-agent-central">Highly available Telemetry central agent</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="s-ceilometer-agent-central"><fo:page-number-citation ref-id="s-ceilometer-agent-central"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="s-api-pacemaker">Configure Pacemaker group</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="s-api-pacemaker"><fo:page-number-citation ref-id="s-api-pacemaker"/></fo:basic-link></fo:inline></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The API node exposes OpenStack API endpoints onto external network (Internet).
It must talk to the cloud controller on the management network.</fo:block><fo:block id="s-api-vip"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0pt" font-family="CartoGothic Std"><fo:block keep-with-next.within-column="always"><fo:block font-family="CartoGothic Std" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt" color="rgb(196,0,34)"><fo:marker marker-class-name="section.head.marker">Configure the VIP</fo:marker><fo:block font-size="20.735999999999997pt">Configure the VIP</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">First, you must select and assign a virtual IP address (VIP) that can freely float between cluster nodes.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This configuration creates <fo:inline font-family="monospace">p_ip_api</fo:inline>, a virtual IP address for use by the API node (192.168.42.103):</fo:block><fo:block space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" font-family="monospace" font-size="85%" hyphenation-character="\" background-color="#E0E0E0" id="d5e552">primitive p_api-ip ocf:heartbeat:IPaddr2 \​
    params ip=​"192.​168.​42.​103" cidr_netmask=​"24" \​
    op monitor interval=​"30s"</fo:block></fo:block><fo:block id="s-keystone"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0pt" font-family="CartoGothic Std"><fo:block keep-with-next.within-column="always"><fo:block font-family="CartoGothic Std" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt" color="rgb(196,0,34)"><fo:marker marker-class-name="section.head.marker">Highly available OpenStack Identity</fo:marker><fo:block font-size="20.735999999999997pt">Highly available OpenStack Identity</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">OpenStack Identity is the Identity Service in OpenStack and used by many services.
Making the OpenStack Identity service highly available in active / passive mode involves</fo:block><fo:list-block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em" provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em" id="d5e556"><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d5e557"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>
Configure OpenStack Identity to listen on the VIP address,
</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d5e559"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>
managing OpenStack Identity daemon with the Pacemaker cluster manager,
</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d5e561"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>
Configure OpenStack services to use this IP address.
</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em" id="d5e563"><fo:list-block provisional-distance-between-starts="36pt + 18pt" provisional-label-separation="18pt"><fo:list-item><fo:list-item-label end-indent="label-end()"><fo:block><fo:external-graphic width="auto" height="auto" content-width="36pt" src="url(file:/Users/annegentle/src/ha-guide/doc/ha-guide/target/docbkx/images/note.svg)"/></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block font-size="14pt" font-weight="bold" hyphenate="false" keep-with-next.within-column="always" color="rgb(196,0,34)" font-family="CartoGothic Std">Note</fo:block><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Here is the <fo:basic-link external-destination="url(http://docs.openstack.org/trunk/install-guide/install/apt/content/ch_keystone.html)"><fo:inline color="blue" font-style="normal">documentation</fo:inline></fo:basic-link> for installing OpenStack Identity service.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:block><fo:block id="_add_openstack_identity_resource_to_pacemaker"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0pt" font-family="CartoGothic Std"><fo:block keep-with-next.within-column="always"><fo:block font-family="CartoGothic Std" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt" color="rgb(196,0,34)"><fo:marker marker-class-name="section.head.marker">Add OpenStack Identity resource to Pacemaker</fo:marker><fo:block font-size="17.28pt">Add OpenStack Identity resource to Pacemaker</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">First of all, you need to download the resource agent to your system:</fo:block><fo:block space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" font-family="monospace" font-size="85%" hyphenation-character="\" background-color="#E0E0E0" id="d5e569"><fo:inline font-family="monospace">#</fo:inline> <fo:inline font-family="monospace" font-weight="bold">cd /​usr/​lib/​ocf/​resource.​d</fo:inline>
<fo:inline font-family="monospace">#</fo:inline> <fo:inline font-family="monospace" font-weight="bold">mkdir openstack</fo:inline>
<fo:inline font-family="monospace">#</fo:inline> <fo:inline font-family="monospace" font-weight="bold">cd openstack</fo:inline>
<fo:inline font-family="monospace">#</fo:inline> <fo:inline font-family="monospace" font-weight="bold">wget https:/​/​raw.​github.​com/​madkiss/​openstack-resource-agents/​master/​ocf/​keystone</fo:inline>
<fo:inline font-family="monospace">#</fo:inline> <fo:inline font-family="monospace" font-weight="bold">chmod a+rx *</fo:inline></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">You can now add the Pacemaker configuration for
OpenStack Identity resource. Connect to the Pacemaker cluster with <fo:inline font-family="monospace">crm
configure</fo:inline>, and add the following cluster resources:</fo:block><fo:block space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" font-family="monospace" font-size="85%" hyphenation-character="\" background-color="#E0E0E0" id="d5e582" keep-together.within-column="always">primitive p_keystone ocf:openstack:keystone \​
  params config=​"/​etc/​keystone/​keystone.​conf" os_password=​"secret" os_username=​"admin" os_tenant_name=​"admin" os_auth_url=​"http:/​/​192.​168.​42.​103:5000/​v2.​0/​" \​
  op monitor interval=​"30s" timeout=​"30s"</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This configuration creates <fo:inline font-family="monospace">p_keystone</fo:inline>, a resource for managing the OpenStack Identity service.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-family="monospace">crm configure</fo:inline> supports batch input, so you may copy and paste the
above into your live pacemaker configuration, and then make changes as
required. For example, you may enter <fo:inline font-family="monospace">edit p_ip_keystone</fo:inline> from the
<fo:inline font-family="monospace">crm configure</fo:inline> menu and edit the resource to match your preferred
virtual IP address.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Once completed, commit your configuration changes by entering <fo:inline font-family="monospace">commit</fo:inline>
from the <fo:inline font-family="monospace">crm configure</fo:inline> menu. Pacemaker will then start the OpenStack Identity
service, and its dependent resources, on one of your nodes.</fo:block></fo:block><fo:block id="_configure_openstack_identity_service"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0pt" font-family="CartoGothic Std"><fo:block keep-with-next.within-column="always"><fo:block font-family="CartoGothic Std" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt" color="rgb(196,0,34)"><fo:marker marker-class-name="section.head.marker">Configure OpenStack Identity service</fo:marker><fo:block font-size="17.28pt">Configure OpenStack Identity service</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">You need to edit your OpenStack Identity configuration file (<fo:inline font-family="monospace">keystone.conf</fo:inline>) and change the bind parameters:</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">On Havana:</fo:block><fo:block space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" font-family="monospace" font-size="85%" hyphenation-character="\" background-color="#E0E0E0" id="d5e597" keep-together.within-column="always">bind_host =​ 192.​168.​42.​103</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">On Icehouse, the <fo:inline font-family="monospace">admin_bind_host</fo:inline> option lets you use a private network for the admin access.</fo:block><fo:block space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" font-family="monospace" font-size="85%" hyphenation-character="\" background-color="#E0E0E0" id="d5e600" keep-together.within-column="always">public_bind_host =​ 192.​168.​42.​103
admin_bind_host =​ 192.​168.​42.​103</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">To be sure all data will be highly available, you should be sure that you store everything in the MySQL database (which is also highly available):</fo:block><fo:block space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" font-family="monospace" font-size="85%" hyphenation-character="\" background-color="#E0E0E0" id="d5e602" keep-together.within-column="always">[catalog]
driver =​ keystone.​catalog.​backends.​sql.​Catalog
.​.​.​
[identity]
driver =​ keystone.​identity.​backends.​sql.​Identity
.​.​.</fo:block></fo:block><fo:block id="_configure_openstack_services_to_use_the_highly_available_openstack_identity"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0pt" font-family="CartoGothic Std"><fo:block keep-with-next.within-column="always"><fo:block font-family="CartoGothic Std" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt" color="rgb(196,0,34)"><fo:marker marker-class-name="section.head.marker">Configure OpenStack services to use the highly available OpenStack Identity</fo:marker><fo:block font-size="17.28pt">Configure OpenStack services to use the highly available OpenStack Identity</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Your OpenStack services must now point their OpenStack Identity configuration to
the highly available, virtual cluster IP address<fo:leader leader-length="0.2em"/>—<fo:leader leader-length="0.2em"/>rather than a
OpenStack Identity server’s physical IP address as you normally would.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">For example with OpenStack Compute, if your OpenStack Identity service IP address is
192.168.42.103 as in the configuration explained here, you would use
the following line in your API configuration file
(<fo:inline font-family="monospace">api-paste.ini</fo:inline>):</fo:block><fo:block space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" font-family="monospace" font-size="85%" hyphenation-character="\" background-color="#E0E0E0" id="d5e608" keep-together.within-column="always">auth_host =​ 192.​168.​42.​103</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">You also need to create the OpenStack Identity Endpoint with this IP.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">NOTE: If you are using both private and public IP addresses, you should create two Virtual IP addresses and define your endpoint like this:</fo:block><fo:block space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" font-family="monospace" font-size="85%" hyphenation-character="\" background-color="#E0E0E0" id="d5e611"><fo:inline font-family="monospace">$</fo:inline> <fo:inline font-family="monospace" font-weight="bold">keystone endpoint-create --region $KEYSTONE_REGION \​
  --service-id $service-id --publicurl 'http:/​/​PUBLIC_VIP:5000/​v2.​0' \​
  --adminurl 'http:/​/​192.​168.​42.​103:35357/​v2.​0' \​
  --internalurl 'http:/​/​192.​168.​42.​103:5000/​v2.​0'</fo:inline></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">If you are using the horizon dashboard, you should edit the <fo:inline font-family="monospace">local_settings.py</fo:inline> file:</fo:block><fo:block space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" font-family="monospace" font-size="85%" hyphenation-character="\" background-color="#E0E0E0" id="d5e616" keep-together.within-column="always">OPENSTACK_HOST =​ 192.​168.​42.​103</fo:block></fo:block></fo:block><fo:block id="s-glance-api"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0pt" font-family="CartoGothic Std"><fo:block keep-with-next.within-column="always"><fo:block font-family="CartoGothic Std" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt" color="rgb(196,0,34)"><fo:marker marker-class-name="section.head.marker">Highly available OpenStack Image API</fo:marker><fo:block font-size="20.735999999999997pt">Highly available OpenStack Image API</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">OpenStack Image Service offers a service for discovering, registering, and retrieving virtual machine images.
To make the OpenStack Image API service highly available in active / passive mode, you must:</fo:block><fo:list-block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em" provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em" id="d5e620"><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d5e621"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>
Configure OpenStack Image to listen on the VIP address.
</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d5e623"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>
Manage OpenStack Image API daemon with the Pacemaker cluster manager.
</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d5e625"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>
Configure OpenStack services to use this IP address.
</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em" id="d5e627"><fo:list-block provisional-distance-between-starts="36pt + 18pt" provisional-label-separation="18pt"><fo:list-item><fo:list-item-label end-indent="label-end()"><fo:block><fo:external-graphic width="auto" height="auto" content-width="36pt" src="url(file:/Users/annegentle/src/ha-guide/doc/ha-guide/target/docbkx/images/note.svg)"/></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block font-size="14pt" font-weight="bold" hyphenate="false" keep-with-next.within-column="always" color="rgb(196,0,34)" font-family="CartoGothic Std">Note</fo:block><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Here is the <fo:basic-link external-destination="url(http://docs.openstack.org/trunk/install-guide/install/apt/content/ch_glance.html)"><fo:inline color="blue" font-style="normal">documentation</fo:inline></fo:basic-link> for installing OpenStack Image API service.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:block><fo:block id="_add_openstack_image_api_resource_to_pacemaker"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0pt" font-family="CartoGothic Std"><fo:block keep-with-next.within-column="always"><fo:block font-family="CartoGothic Std" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt" color="rgb(196,0,34)"><fo:marker marker-class-name="section.head.marker">Add OpenStack Image API resource to Pacemaker</fo:marker><fo:block font-size="17.28pt">Add OpenStack Image API resource to Pacemaker</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">First of all, you need to download the resource agent to your system:</fo:block><fo:block space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" font-family="monospace" font-size="85%" hyphenation-character="\" background-color="#E0E0E0" id="d5e633"><fo:inline font-family="monospace">#</fo:inline> <fo:inline font-family="monospace" font-weight="bold">cd /​usr/​lib/​ocf/​resource.​d/​openstack</fo:inline>
<fo:inline font-family="monospace">#</fo:inline> <fo:inline font-family="monospace" font-weight="bold">wget https:/​/​raw.​github.​com/​madkiss/​openstack-resource-agents/​master/​ocf/​glance-api</fo:inline>
<fo:inline font-family="monospace">#</fo:inline> <fo:inline font-family="monospace" font-weight="bold">chmod a+rx *</fo:inline></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">You can now add the Pacemaker configuration for
OpenStack Image API resource. Connect to the Pacemaker cluster with <fo:inline font-family="monospace">crm
configure</fo:inline>, and add the following cluster resources:</fo:block><fo:block space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" font-family="monospace" font-size="85%" hyphenation-character="\" background-color="#E0E0E0" id="d5e642" keep-together.within-column="always">primitive p_glance-api ocf:openstack:glance-api \​
    params config=​"/​etc/​glance/​glance-api.​conf" os_password=​"secrete" os_username=​"admin" os_tenant_name=​"admin" os_auth_url=​"http:/​/​192.​168.​42.​103:5000/​v2.​0/​" \​
    op monitor interval=​"30s" timeout=​"30s"</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This configuration creates</fo:block><fo:list-block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em" provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em" id="d5e644"><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d5e645"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block><fo:inline font-family="monospace">p_glance-api</fo:inline>, a resource for manage OpenStack Image API service
</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-family="monospace">crm configure</fo:inline> supports batch input, so you may copy and paste the
above into your live pacemaker configuration, and then make changes as
required. For example, you may enter <fo:inline font-family="monospace">edit p_ip_glance-api</fo:inline> from the
<fo:inline font-family="monospace">crm configure</fo:inline> menu and edit the resource to match your preferred
virtual IP address.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Once completed, commit your configuration changes by entering <fo:inline font-family="monospace">commit</fo:inline>
from the <fo:inline font-family="monospace">crm configure</fo:inline> menu. Pacemaker will then start the OpenStack Image API
service, and its dependent resources, on one of your nodes.</fo:block></fo:block><fo:block id="_configure_openstack_image_service_api"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0pt" font-family="CartoGothic Std"><fo:block keep-with-next.within-column="always"><fo:block font-family="CartoGothic Std" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt" color="rgb(196,0,34)"><fo:marker marker-class-name="section.head.marker">Configure OpenStack Image Service API</fo:marker><fo:block font-size="17.28pt">Configure OpenStack Image Service API</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Edit <fo:inline font-family="monospace">/etc/glance/glance-api.conf</fo:inline>:</fo:block><fo:block space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" font-family="monospace" font-size="85%" hyphenation-character="\" background-color="#E0E0E0" id="d5e659" keep-together.within-column="always"># We have to use MySQL connection to store data:
sql_connection=​mysql:/​/​glance:password@192.​168.​42.​101/​glance

# We bind OpenStack Image API to the VIP:
bind_host =​ 192.​168.​42.​103

# Connect to OpenStack Image Registry service:
registry_host =​ 192.​168.​42.​103

# We send notifications to High Available RabbitMQ:
notifier_strategy =​ rabbit
rabbit_host =​ 192.​168.​42.​102</fo:block></fo:block><fo:block id="_configure_openstack_services_to_use_high_available_openstack_image_api"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0pt" font-family="CartoGothic Std"><fo:block keep-with-next.within-column="always"><fo:block font-family="CartoGothic Std" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt" color="rgb(196,0,34)"><fo:marker marker-class-name="section.head.marker">Configure OpenStack services to use high available OpenStack Image API</fo:marker><fo:block font-size="17.28pt">Configure OpenStack services to use high available OpenStack Image API</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Your OpenStack services must now point their OpenStack Image API configuration to
the highly available, virtual cluster IP address<fo:leader leader-length="0.2em"/>—<fo:leader leader-length="0.2em"/>rather than an
OpenStack Image API server’s physical IP address as you normally would.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">For OpenStack Compute, for example, if your OpenStack Image API service IP address is
192.168.42.104 as in the configuration explained here, you would use
the following line in your <fo:inline font-family="monospace">nova.conf</fo:inline> file:</fo:block><fo:block space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" font-family="monospace" font-size="85%" hyphenation-character="\" background-color="#E0E0E0" id="d5e665" keep-together.within-column="always">glance_api_servers =​ 192.​168.​42.​103</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">You must also create the OpenStack Image API endpoint with this IP.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em" id="d5e667"><fo:list-block provisional-distance-between-starts="36pt + 18pt" provisional-label-separation="18pt"><fo:list-item><fo:list-item-label end-indent="label-end()"><fo:block><fo:external-graphic width="auto" height="auto" content-width="36pt" src="url(file:/Users/annegentle/src/ha-guide/doc/ha-guide/target/docbkx/images/note.svg)"/></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block font-size="14pt" font-weight="bold" hyphenate="false" keep-with-next.within-column="always" color="rgb(196,0,34)" font-family="CartoGothic Std">Note</fo:block><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">If you are using both private and public IP addresses, you should create two Virtual IP addresses and define your endpoint like this:</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:block><fo:block space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" font-family="monospace" font-size="85%" hyphenation-character="\" background-color="#E0E0E0" id="d5e669"><fo:inline font-family="monospace">$</fo:inline> <fo:inline font-family="monospace" font-weight="bold">keystone endpoint-create --region $KEYSTONE_REGION \​
  --service-id $service-id --publicurl 'http:/​/​PUBLIC_VIP:9292' \​
  --adminurl 'http:/​/​192.​168.​42.​103:9292' \​
  --internalurl 'http:/​/​192.​168.​42.​103:9292'</fo:inline></fo:block></fo:block></fo:block><fo:block id="s-cinder-api"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0pt" font-family="CartoGothic Std"><fo:block keep-with-next.within-column="always"><fo:block font-family="CartoGothic Std" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt" color="rgb(196,0,34)"><fo:marker marker-class-name="section.head.marker">Highly available Block Storage API</fo:marker><fo:block font-size="20.735999999999997pt">Highly available Block Storage API</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Making the Block Storage (cinder) API service highly available in active / passive mode involves</fo:block><fo:list-block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em" provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em" id="d5e675"><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d5e676"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>
Configure Block Storage to listen on the VIP address,
</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d5e678"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>
managing Block Storage API daemon with the Pacemaker cluster manager,
</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d5e680"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>
Configure OpenStack services to use this IP address.
</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em" id="d5e682"><fo:list-block provisional-distance-between-starts="36pt + 18pt" provisional-label-separation="18pt"><fo:list-item><fo:list-item-label end-indent="label-end()"><fo:block><fo:external-graphic width="auto" height="auto" content-width="36pt" src="url(file:/Users/annegentle/src/ha-guide/doc/ha-guide/target/docbkx/images/note.svg)"/></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block font-size="14pt" font-weight="bold" hyphenate="false" keep-with-next.within-column="always" color="rgb(196,0,34)" font-family="CartoGothic Std">Note</fo:block><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Here is the
<fo:basic-link external-destination="url(http://docs.openstack.org/trunk/install-guide/install/apt/content/ch_cinder.html)"><fo:inline color="blue" font-style="normal">documentation</fo:inline></fo:basic-link>
for installing Block Storage service.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:block><fo:block id="_add_block_storage_api_resource_to_pacemaker"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0pt" font-family="CartoGothic Std"><fo:block keep-with-next.within-column="always"><fo:block font-family="CartoGothic Std" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt" color="rgb(196,0,34)"><fo:marker marker-class-name="section.head.marker">Add Block Storage API resource to Pacemaker</fo:marker><fo:block font-size="17.28pt">Add Block Storage API resource to Pacemaker</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">First of all, you need to download the resource agent to your system:</fo:block><fo:block space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" font-family="monospace" font-size="85%" hyphenation-character="\" background-color="#E0E0E0" id="d5e688"><fo:inline font-family="monospace">#</fo:inline> <fo:inline font-family="monospace" font-weight="bold">cd /​usr/​lib/​ocf/​resource.​d/​openstack</fo:inline>
<fo:inline font-family="monospace">#</fo:inline> <fo:inline font-family="monospace" font-weight="bold">wget https:/​/​raw.​github.​com/​madkiss/​openstack-resource-agents/​master/​ocf/​cinder-api</fo:inline>
<fo:inline font-family="monospace">#</fo:inline> <fo:inline font-family="monospace" font-weight="bold">chmod a+rx *</fo:inline></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">You can now add the Pacemaker configuration for
Block Storage API resource. Connect to the Pacemaker cluster with <fo:inline font-family="monospace">crm
configure</fo:inline>, and add the following cluster resources:</fo:block><fo:block space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" font-family="monospace" font-size="85%" hyphenation-character="\" background-color="#E0E0E0" id="d5e697" keep-together.within-column="always">primitive p_cinder-api ocf:openstack:cinder-api \​
    params config=​"/​etc/​cinder/​cinder.​conf" os_password=​"secrete" os_username=​"admin" \​
    os_tenant_name=​"admin" keystone_get_token_url=​"http:/​/​192.​168.​42.​103:5000/​v2.​0/​tokens" \​
    op monitor interval=​"30s" timeout=​"30s"</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This configuration creates</fo:block><fo:list-block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em" provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em" id="d5e699"><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d5e700"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block><fo:inline font-family="monospace">p_cinder-api</fo:inline>, a resource for manage Block Storage API service
</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-family="monospace">crm configure</fo:inline> supports batch input, so you may copy and paste the
above into your live pacemaker configuration, and then make changes as
required. For example, you may enter <fo:inline font-family="monospace">edit p_ip_cinder-api</fo:inline> from the
<fo:inline font-family="monospace">crm configure</fo:inline> menu and edit the resource to match your preferred
virtual IP address.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Once completed, commit your configuration changes by entering <fo:inline font-family="monospace">commit</fo:inline>
from the <fo:inline font-family="monospace">crm configure</fo:inline> menu. Pacemaker will then start the Block Storage API
service, and its dependent resources, on one of your nodes.</fo:block></fo:block><fo:block id="_configure_block_storage_api_service"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0pt" font-family="CartoGothic Std"><fo:block keep-with-next.within-column="always"><fo:block font-family="CartoGothic Std" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt" color="rgb(196,0,34)"><fo:marker marker-class-name="section.head.marker">Configure Block Storage API service</fo:marker><fo:block font-size="17.28pt">Configure Block Storage API service</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Edit <fo:inline font-family="monospace">/etc/cinder/cinder.conf</fo:inline>:</fo:block><fo:block space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" font-family="monospace" font-size="85%" hyphenation-character="\" background-color="#E0E0E0" id="d5e714" keep-together.within-column="always"># We have to use MySQL connection to store data:
sql_connection=​mysql:/​/​cinder:password@192.​168.​42.​101/​cinder

# We bind Block Storage API to the VIP:
osapi_volume_listen =​ 192.​168.​42.​103

# We send notifications to High Available RabbitMQ:
notifier_strategy =​ rabbit
rabbit_host =​ 192.​168.​42.​102</fo:block></fo:block><fo:block id="_configure_openstack_services_to_use_highly_available_block_storage_api"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0pt" font-family="CartoGothic Std"><fo:block keep-with-next.within-column="always"><fo:block font-family="CartoGothic Std" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt" color="rgb(196,0,34)"><fo:marker marker-class-name="section.head.marker">Configure OpenStack services to use highly available Block Storage API</fo:marker><fo:block font-size="17.28pt">Configure OpenStack services to use highly available Block Storage API</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Your OpenStack services must now point their Block Storage API configuration to
the highly available, virtual cluster IP address<fo:leader leader-length="0.2em"/>—<fo:leader leader-length="0.2em"/>rather than a
Block Storage API server’s physical IP address as you normally would.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">You must create the Block Storage API endpoint with this IP.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em" id="d5e719"><fo:list-block provisional-distance-between-starts="36pt + 18pt" provisional-label-separation="18pt"><fo:list-item><fo:list-item-label end-indent="label-end()"><fo:block><fo:external-graphic width="auto" height="auto" content-width="36pt" src="url(file:/Users/annegentle/src/ha-guide/doc/ha-guide/target/docbkx/images/note.svg)"/></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block font-size="14pt" font-weight="bold" hyphenate="false" keep-with-next.within-column="always" color="rgb(196,0,34)" font-family="CartoGothic Std">Note</fo:block><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">If you are using both private and public IP, you should create two Virtual IPs and define your endpoint like this:</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:block><fo:block space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" font-family="monospace" font-size="85%" hyphenation-character="\" background-color="#E0E0E0" id="d5e721"><fo:inline font-family="monospace">$</fo:inline> <fo:inline font-family="monospace" font-weight="bold">keystone endpoint-create --region $KEYSTONE_REGION \​
  --service-id $service-id --publicurl 'http:/​/​PUBLIC_VIP:8776/​v1/​%(tenant_id)s' \​
  --adminurl 'http:/​/​192.​168.​42.​103:8776/​v1/​%(tenant_id)s' \​
  --internalurl 'http:/​/​192.​168.​42.​103:8776/​v1/​%(tenant_id)s'</fo:inline></fo:block></fo:block></fo:block><fo:block id="s-neutron-server"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0pt" font-family="CartoGothic Std"><fo:block keep-with-next.within-column="always"><fo:block font-family="CartoGothic Std" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt" color="rgb(196,0,34)"><fo:marker marker-class-name="section.head.marker">Highly available OpenStack Networking server</fo:marker><fo:block font-size="20.735999999999997pt">Highly available OpenStack Networking server</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">OpenStack Networking is the network connectivity service in OpenStack.
Making the OpenStack Networking Server service highly available in active / passive mode involves</fo:block><fo:list-block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em" provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em" id="d5e727"><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d5e728"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>
Configure OpenStack Networking to listen on the VIP address,
</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d5e730"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>
managing OpenStack Networking API Server daemon with the Pacemaker cluster manager,
</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d5e732"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>
Configure OpenStack services to use this IP address.
</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em" id="d5e734"><fo:list-block provisional-distance-between-starts="36pt + 18pt" provisional-label-separation="18pt"><fo:list-item><fo:list-item-label end-indent="label-end()"><fo:block><fo:external-graphic width="auto" height="auto" content-width="36pt" src="url(file:/Users/annegentle/src/ha-guide/doc/ha-guide/target/docbkx/images/note.svg)"/></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block font-size="14pt" font-weight="bold" hyphenate="false" keep-with-next.within-column="always" color="rgb(196,0,34)" font-family="CartoGothic Std">Note</fo:block><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Here is the <fo:basic-link external-destination="url(http://docs.openstack.org/trunk/install-guide/install/apt/content/ch_networking.html)"><fo:inline color="blue" font-style="normal">documentation</fo:inline></fo:basic-link> for installing OpenStack Networking service.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:block><fo:block id="_add_openstack_networking_server_resource_to_pacemaker"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0pt" font-family="CartoGothic Std"><fo:block keep-with-next.within-column="always"><fo:block font-family="CartoGothic Std" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt" color="rgb(196,0,34)"><fo:marker marker-class-name="section.head.marker">Add OpenStack Networking Server resource to Pacemaker</fo:marker><fo:block font-size="17.28pt">Add OpenStack Networking Server resource to Pacemaker</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">First of all, you need to download the resource agent to your system:</fo:block><fo:block space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" font-family="monospace" font-size="85%" hyphenation-character="\" background-color="#E0E0E0" id="d5e740"><fo:inline font-family="monospace">#</fo:inline> <fo:inline font-family="monospace" font-weight="bold">cd /​usr/​lib/​ocf/​resource.​d/​openstack</fo:inline>
<fo:inline font-family="monospace">#</fo:inline> <fo:inline font-family="monospace" font-weight="bold">wget https:/​/​raw.​github.​com/​madkiss/​openstack-resource-agents/​master/​ocf/​neutron-server</fo:inline>
<fo:inline font-family="monospace">#</fo:inline> <fo:inline font-family="monospace" font-weight="bold">chmod a+rx *</fo:inline></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">You can now add the Pacemaker configuration for
OpenStack Networking Server resource. Connect to the Pacemaker cluster with <fo:inline font-family="monospace">crm
configure</fo:inline>, and add the following cluster resources:</fo:block><fo:block space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" font-family="monospace" font-size="85%" hyphenation-character="\" background-color="#E0E0E0" id="d5e749" keep-together.within-column="always">primitive p_neutron-server ocf:openstack:neutron-server \​
    params os_password=​"secrete" os_username=​"admin" os_tenant_name=​"admin" \​
    keystone_get_token_url=​"http:/​/​192.​168.​42.​103:5000/​v2.​0/​tokens" \​
    op monitor interval=​"30s" timeout=​"30s"</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This configuration creates <fo:inline font-family="monospace">p_neutron-server</fo:inline>, a resource for manage OpenStack Networking Server service</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-family="monospace">crm configure</fo:inline> supports batch input, so you may copy and paste the
above into your live pacemaker configuration, and then make changes as
required. For example, you may enter <fo:inline font-family="monospace">edit p_neutron-server</fo:inline> from the
<fo:inline font-family="monospace">crm configure</fo:inline> menu and edit the resource to match your preferred
virtual IP address.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Once completed, commit your configuration changes by entering <fo:inline font-family="monospace">commit</fo:inline>
from the <fo:inline font-family="monospace">crm configure</fo:inline> menu. Pacemaker will then start the OpenStack Networking API
service, and its dependent resources, on one of your nodes.</fo:block></fo:block><fo:block id="_configure_openstack_networking_server"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0pt" font-family="CartoGothic Std"><fo:block keep-with-next.within-column="always"><fo:block font-family="CartoGothic Std" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt" color="rgb(196,0,34)"><fo:marker marker-class-name="section.head.marker">Configure OpenStack Networking server</fo:marker><fo:block font-size="17.28pt">Configure OpenStack Networking server</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Edit <fo:inline font-family="monospace">/etc/neutron/neutron.conf</fo:inline>:</fo:block><fo:block space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" font-family="monospace" font-size="85%" hyphenation-character="\" background-color="#E0E0E0" id="d5e763" keep-together.within-column="always"># We bind the service to the VIP:
bind_host =​ 192.​168.​42.​103

# We bind OpenStack Networking Server to the VIP:
bind_host =​ 192.​168.​42.​103

# We send notifications to Highly available RabbitMQ:
notifier_strategy =​ rabbit
rabbit_host =​ 192.​168.​42.​102

[database]
# We have to use MySQL connection to store data:
connection =​ mysql:/​/​neutron:password@192.​168.​42.​101/​neutron</fo:block></fo:block><fo:block id="_configure_openstack_services_to_use_highly_available_openstack_networking_server"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0pt" font-family="CartoGothic Std"><fo:block keep-with-next.within-column="always"><fo:block font-family="CartoGothic Std" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt" color="rgb(196,0,34)"><fo:marker marker-class-name="section.head.marker">Configure OpenStack services to use highly available OpenStack Networking server</fo:marker><fo:block font-size="17.28pt">Configure OpenStack services to use highly available OpenStack Networking server</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Your OpenStack services must now point their OpenStack Networking Server configuration to
the highly available, virtual cluster IP address<fo:leader leader-length="0.2em"/>—<fo:leader leader-length="0.2em"/>rather than an
OpenStack Networking server’s physical IP address as you normally would.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">For example, you should configure OpenStack Compute for using highly available OpenStack Networking server in editing <fo:inline font-family="monospace">nova.conf</fo:inline> file:</fo:block><fo:block space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" font-family="monospace" font-size="85%" hyphenation-character="\" background-color="#E0E0E0" id="d5e769" keep-together.within-column="always">neutron_url =​ http:/​/​192.​168.​42.​103:9696</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">You need to create the OpenStack Networking server endpoint with this IP.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em" id="d5e771"><fo:list-block provisional-distance-between-starts="36pt + 18pt" provisional-label-separation="18pt"><fo:list-item><fo:list-item-label end-indent="label-end()"><fo:block><fo:external-graphic width="auto" height="auto" content-width="36pt" src="url(file:/Users/annegentle/src/ha-guide/doc/ha-guide/target/docbkx/images/note.svg)"/></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block font-size="14pt" font-weight="bold" hyphenate="false" keep-with-next.within-column="always" color="rgb(196,0,34)" font-family="CartoGothic Std">Note</fo:block><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">If you are using both private and public IP addresses, you should create two Virtual IP addresses and define your endpoint like this:</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:block><fo:block space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" font-family="monospace" font-size="85%" hyphenation-character="\" background-color="#E0E0E0" id="d5e773"><fo:inline font-family="monospace">$</fo:inline> <fo:inline font-family="monospace" font-weight="bold">keystone endpoint-create --region $KEYSTONE_REGION --service-id $service-id \​
  --publicurl 'http:/​/​PUBLIC_VIP:9696/​' \​
  --adminurl 'http:/​/​192.​168.​42.​103:9696/​' \​
  --internalurl 'http:/​/​192.​168.​42.​103:9696/​'</fo:inline></fo:block></fo:block></fo:block><fo:block id="s-ceilometer-agent-central"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0pt" font-family="CartoGothic Std"><fo:block keep-with-next.within-column="always"><fo:block font-family="CartoGothic Std" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt" color="rgb(196,0,34)"><fo:marker marker-class-name="section.head.marker">Highly available Telemetry central agent</fo:marker><fo:block font-size="20.735999999999997pt">Highly available Telemetry central agent</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Telemetry (ceilometer) is the metering and monitoring service in
OpenStack. The Central agent polls for resource utilization
statistics for resources not tied to instances or compute nodes.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em" id="d5e779"><fo:list-block provisional-distance-between-starts="36pt + 18pt" provisional-label-separation="18pt"><fo:list-item><fo:list-item-label end-indent="label-end()"><fo:block><fo:external-graphic width="auto" height="auto" content-width="36pt" src="url(file:/Users/annegentle/src/ha-guide/doc/ha-guide/target/docbkx/images/note.svg)"/></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block font-size="14pt" font-weight="bold" hyphenate="false" keep-with-next.within-column="always" color="rgb(196,0,34)" font-family="CartoGothic Std">Note</fo:block><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Due to limitations of a polling model, a single instance of this agent
can be polling a given list of meters. In this setup, we install this service
on the API nodes also in the active / passive mode.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Making the Telemetry central agent service highly available in active / passive mode involves
managing its daemon with the Pacemaker cluster manager.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em" id="d5e782"><fo:list-block provisional-distance-between-starts="36pt + 18pt" provisional-label-separation="18pt"><fo:list-item><fo:list-item-label end-indent="label-end()"><fo:block><fo:external-graphic width="auto" height="auto" content-width="36pt" src="url(file:/Users/annegentle/src/ha-guide/doc/ha-guide/target/docbkx/images/note.svg)"/></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block font-size="14pt" font-weight="bold" hyphenate="false" keep-with-next.within-column="always" color="rgb(196,0,34)" font-family="CartoGothic Std">Note</fo:block><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">You will find at <fo:basic-link external-destination="url(http://docs.openstack.org/developer/ceilometer/install/manual.html#installing-the-central-agent)"><fo:inline color="blue" font-style="normal">this page</fo:inline></fo:basic-link>
the process to install the Telemetry central agent.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:block><fo:block id="_add_the_telemetry_central_agent_resource_to_pacemaker"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0pt" font-family="CartoGothic Std"><fo:block keep-with-next.within-column="always"><fo:block font-family="CartoGothic Std" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt" color="rgb(196,0,34)"><fo:marker marker-class-name="section.head.marker">Add the Telemetry central agent resource to Pacemaker</fo:marker><fo:block font-size="17.28pt">Add the Telemetry central agent resource to Pacemaker</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">First of all, you need to download the resource agent to your system:</fo:block><fo:block space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" font-family="monospace" font-size="85%" hyphenation-character="\" background-color="#E0E0E0" id="d5e788"><fo:inline font-family="monospace">#</fo:inline> <fo:inline font-family="monospace" font-weight="bold">cd /​usr/​lib/​ocf/​resource.​d/​openstack</fo:inline>
<fo:inline font-family="monospace">#</fo:inline> <fo:inline font-family="monospace" font-weight="bold">wget https:/​/​raw.​github.​com/​madkiss/​openstack-resource-agents/​master/​ocf/​ceilometer-agent-central</fo:inline>
<fo:inline font-family="monospace">#</fo:inline> <fo:inline font-family="monospace" font-weight="bold">chmod a+rx *</fo:inline></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">You may then proceed with adding the Pacemaker configuration for
the Telemetry central agent resource. Connect to the Pacemaker cluster with <fo:inline font-family="monospace">crm
configure</fo:inline>, and add the following cluster resources:</fo:block><fo:block space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" font-family="monospace" font-size="85%" hyphenation-character="\" background-color="#E0E0E0" id="d5e797" keep-together.within-column="always">primitive p_ceilometer-agent-central ocf:openstack:ceilometer-agent-central \​
    params config=​"/​etc/​ceilometer/​ceilometer.​conf" \​
    op monitor interval=​"30s" timeout=​"30s"</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This configuration creates</fo:block><fo:list-block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em" provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em" id="d5e799"><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d5e800"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block><fo:inline font-family="monospace">p_ceilometer-agent-central</fo:inline>, a resource for manage Ceilometer Central Agent service
</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-family="monospace">crm configure</fo:inline> supports batch input, so you may copy and paste the
above into your live pacemaker configuration, and then make changes as
required.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Once completed, commit your configuration changes by entering <fo:inline font-family="monospace">commit</fo:inline>
from the <fo:inline font-family="monospace">crm configure</fo:inline> menu. Pacemaker will then start the Ceilometer Central Agent
service, and its dependent resources, on one of your nodes.</fo:block></fo:block><fo:block id="_configure_telemetry_central_agent_service"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0pt" font-family="CartoGothic Std"><fo:block keep-with-next.within-column="always"><fo:block font-family="CartoGothic Std" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt" color="rgb(196,0,34)"><fo:marker marker-class-name="section.head.marker">Configure Telemetry central agent service</fo:marker><fo:block font-size="17.28pt">Configure Telemetry central agent service</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Edit <fo:inline font-family="monospace">/etc/ceilometer/ceilometer.conf</fo:inline>:</fo:block><fo:block space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" font-family="monospace" font-size="85%" hyphenation-character="\" background-color="#E0E0E0" id="d5e812" keep-together.within-column="always"># We use API VIP for Identity Service connection:
os_auth_url=​http:/​/​192.​168.​42.​103:5000/​v2.​0

# We send notifications to High Available RabbitMQ:
notifier_strategy =​ rabbit
rabbit_host =​ 192.​168.​42.​102

[database]
# We have to use MySQL connection to store data:
sql_connection=​mysql:/​/​ceilometer:password@192.​168.​42.​101/​ceilometer</fo:block></fo:block></fo:block><fo:block id="s-api-pacemaker"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0pt" font-family="CartoGothic Std"><fo:block keep-with-next.within-column="always"><fo:block font-family="CartoGothic Std" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt" color="rgb(196,0,34)"><fo:marker marker-class-name="section.head.marker">Configure Pacemaker group</fo:marker><fo:block font-size="20.735999999999997pt">Configure Pacemaker group</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Finally, we need to create a service <fo:inline font-family="monospace">group</fo:inline> to ensure that virtual IP is linked to the API services resources:</fo:block><fo:block space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" font-family="monospace" font-size="85%" hyphenation-character="\" background-color="#E0E0E0" id="d5e817">group g_services_api p_api-ip p_keystone p_glance-api p_cinder-api \​
   p_neutron-server p_glance-registry p_ceilometer-agent-central</fo:block></fo:block></fo:flow></fo:page-sequence><fo:page-sequence xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" hyphenate="true" master-reference="body" language="en" format="1" initial-page-number="auto" force-page-count="no-force" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2"><fo:static-content xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" flow-name="xsl-region-before-first"><fo:block-container reference-orientation="90" absolute-position="fixed" top="-1in" overflow="visible" height="2in" width="30in" z-index="1"><fo:block padding-before=".45in" font-size="1.5em" color="gray" font-weight="bold"><fo:leader leader-pattern="use-content" leader-length="30in" letter-spacing=".1em">  </fo:leader></fo:block></fo:block-container><fo:block font-family="CartoGothic Std" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block>OpenStack High Availability Guide</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block>September 14, 2014</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block>current</fo:block></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" flow-name="xsl-region-before-odd"><fo:block-container reference-orientation="90" absolute-position="fixed" top="-1in" overflow="visible" height="2in" width="30in" z-index="1"><fo:block padding-before=".45in" font-size="1.5em" color="gray" font-weight="bold"><fo:leader leader-pattern="use-content" leader-length="30in" letter-spacing=".1em">  </fo:leader></fo:block></fo:block-container><fo:block font-family="CartoGothic Std" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block>OpenStack High Availability Guide</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block>September 14, 2014</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block>current</fo:block></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" flow-name="xsl-region-before-even"><fo:block-container reference-orientation="90" absolute-position="fixed" top="-1in" overflow="visible" height="2in" width="30in" z-index="1"><fo:block padding-before=".45in" font-size="1.5em" color="gray" font-weight="bold"><fo:leader leader-pattern="use-content" leader-length="30in" letter-spacing=".1em">  </fo:leader></fo:block></fo:block-container><fo:block font-family="CartoGothic Std" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block>OpenStack High Availability Guide</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block>September 14, 2014</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block>current</fo:block></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" flow-name="xsl-region-before-blank"><fo:block-container reference-orientation="90" absolute-position="fixed" top="-1in" overflow="visible" height="2in" width="30in" z-index="1"><fo:block padding-before=".45in" font-size="1.5em" color="gray" font-weight="bold"><fo:leader leader-pattern="use-content" leader-length="30in" letter-spacing=".1em">  </fo:leader></fo:block></fo:block-container><fo:block font-family="CartoGothic Std" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-footnote-separator"><fo:block><fo:leader color="black" leader-pattern="rule" leader-length="1in"/></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-first"><fo:block font-family="CartoGothic Std" margin-left="0pt"><fo:table xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-odd"><fo:block font-family="CartoGothic Std" margin-left="0pt"><fo:table xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-even"><fo:block font-family="CartoGothic Std" margin-left="0pt"><fo:table xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-blank"><fo:block font-family="CartoGothic Std" margin-left="0pt"><fo:table xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:flow flow-name="xsl-region-body" start-indent="4pc" end-indent="0pt"><fo:block id="ch-network"><fo:block font-family="CartoGothic Std"><fo:block margin-left="0pt"><fo:block font-size="24.8832pt" font-weight="bold"><fo:block keep-with-next.within-column="always" space-before.optimum="10pt" space-before.minimum="10pt * 0.8" space-before.maximum="10pt * 1.2" hyphenate="false" text-align="start" start-indent="0pt" font-family="CartoGothic Std" color="rgb(196,0,34)" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2">5. Network controller cluster stack</fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="1em" space-before.maximum="2em" space-after.minimum="0.5em" space-after.optimum="1em" space-after.maximum="2em" id="toc...ch-network"><fo:block><fo:block><fo:block space-before.minimum="1em" space-before.optimum="1.5em" space-before.maximum="2em" space-after="0.5em" margin-left="0pt" start-indent="0pt" font-size="20.736pt" font-weight="bold" color="rgb(196,0,34)" font-family="CartoGothic Std">Table of Contents</fo:block></fo:block></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="_highly_available_neutron_l3_agent">Highly available neutron L3 agent</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="_highly_available_neutron_l3_agent"><fo:page-number-citation ref-id="_highly_available_neutron_l3_agent"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="_highly_available_neutron_dhcp_agent">Highly available neutron DHCP agent</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="_highly_available_neutron_dhcp_agent"><fo:page-number-citation ref-id="_highly_available_neutron_dhcp_agent"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="_highly_available_neutron_metadata_agent">Highly available neutron metadata agent</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="_highly_available_neutron_metadata_agent"><fo:page-number-citation ref-id="_highly_available_neutron_metadata_agent"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="_manage_network_resources">Manage network resources</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="_manage_network_resources"><fo:page-number-citation ref-id="_manage_network_resources"/></fo:basic-link></fo:inline></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The network controller sits on the management and data network, and needs to be connected to the Internet if a VM needs access to it.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em" id="d5e821"><fo:list-block provisional-distance-between-starts="36pt + 18pt" provisional-label-separation="18pt"><fo:list-item><fo:list-item-label end-indent="label-end()"><fo:block><fo:external-graphic width="auto" height="auto" content-width="36pt" src="url(file:/Users/annegentle/src/ha-guide/doc/ha-guide/target/docbkx/images/note.svg)"/></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block font-size="14pt" font-weight="bold" hyphenate="false" keep-with-next.within-column="always" color="rgb(196,0,34)" font-family="CartoGothic Std">Note</fo:block><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Both nodes should have the same hostname since the Networking scheduler will be
aware of one node, for example a virtual router attached to a single L3 node.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:block><fo:block id="_highly_available_neutron_l3_agent"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0pt" font-family="CartoGothic Std"><fo:block keep-with-next.within-column="always"><fo:block font-family="CartoGothic Std" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt" color="rgb(196,0,34)"><fo:marker marker-class-name="section.head.marker">Highly available neutron L3 agent</fo:marker><fo:block font-size="20.735999999999997pt">Highly available neutron L3 agent</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The neutron L3 agent provides L3/NAT forwarding to ensure external network access
for VMs on tenant networks. High availability for the L3 agent is achieved by
adopting Pacemaker.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em" id="d5e826"><fo:list-block provisional-distance-between-starts="36pt + 18pt" provisional-label-separation="18pt"><fo:list-item><fo:list-item-label end-indent="label-end()"><fo:block><fo:external-graphic width="auto" height="auto" content-width="36pt" src="url(file:/Users/annegentle/src/ha-guide/doc/ha-guide/target/docbkx/images/note.svg)"/></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block font-size="14pt" font-weight="bold" hyphenate="false" keep-with-next.within-column="always" color="rgb(196,0,34)" font-family="CartoGothic Std">Note</fo:block><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Here is the <fo:basic-link external-destination="url(http://docs.openstack.org/trunk/config-reference/content/section_adv_cfg_l3_agent.html)"><fo:inline color="blue" font-style="normal">documentation</fo:inline></fo:basic-link> for installing neutron L3 agent.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:block><fo:block id="_add_neutron_l3_agent_resource_to_pacemaker"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0pt" font-family="CartoGothic Std"><fo:block keep-with-next.within-column="always"><fo:block font-family="CartoGothic Std" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt" color="rgb(196,0,34)"><fo:marker marker-class-name="section.head.marker">Add neutron L3 agent resource to Pacemaker</fo:marker><fo:block font-size="17.28pt">Add neutron L3 agent resource to Pacemaker</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">First of all, you need to download the resource agent to your system:</fo:block><fo:block space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" font-family="monospace" font-size="85%" hyphenation-character="\" background-color="#E0E0E0" id="d5e832"><fo:inline font-family="monospace">#</fo:inline> <fo:inline font-family="monospace" font-weight="bold">cd /​usr/​lib/​ocf/​resource.​d/​openstack</fo:inline>
<fo:inline font-family="monospace">#</fo:inline> <fo:inline font-family="monospace" font-weight="bold">wget https:/​/​raw.​github.​com/​madkiss/​openstack-resource-agents/​master/​ocf/​neutron-agent-l3</fo:inline>
<fo:inline font-family="monospace">#</fo:inline> <fo:inline font-family="monospace" font-weight="bold">chmod a+rx neutron-l3-agent</fo:inline></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">You may now proceed with adding the Pacemaker configuration for
neutron L3 agent resource. Connect to the Pacemaker cluster with <fo:inline font-family="monospace">crm
configure</fo:inline>, and add the following cluster resources:</fo:block><fo:block space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" font-family="monospace" font-size="85%" hyphenation-character="\" background-color="#E0E0E0" id="d5e841" keep-together.within-column="always">primitive p_neutron-l3-agent ocf:openstack:neutron-agent-l3 \​
    params config=​"/​etc/​neutron/​neutron.​conf" \​
    plugin_config=​"/​etc/​neutron/​l3_agent.​ini" \​
    op monitor interval=​"30s" timeout=​"30s"</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This configuration creates</fo:block><fo:list-block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em" provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em" id="d5e843"><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d5e844"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block><fo:inline font-family="monospace">p_neutron-l3-agent</fo:inline>, a resource for manage Neutron L3 Agent service
</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-family="monospace">crm configure</fo:inline> supports batch input, so you may copy and paste the
above into your live pacemaker configuration, and then make changes as
required.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Once completed, commit your configuration changes by entering <fo:inline font-family="monospace">commit</fo:inline>
from the <fo:inline font-family="monospace">crm configure</fo:inline> menu. Pacemaker will then start the neutron L3 agent
service, and its dependent resources, on one of your nodes.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em" id="d5e852"><fo:list-block provisional-distance-between-starts="36pt + 18pt" provisional-label-separation="18pt"><fo:list-item><fo:list-item-label end-indent="label-end()"><fo:block><fo:external-graphic width="auto" height="auto" content-width="36pt" src="url(file:/Users/annegentle/src/ha-guide/doc/ha-guide/target/docbkx/images/note.svg)"/></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block font-size="14pt" font-weight="bold" hyphenate="false" keep-with-next.within-column="always" color="rgb(196,0,34)" font-family="CartoGothic Std">Note</fo:block><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This method does not ensure a zero downtime since it has to recreate all
the namespaces and virtual routers on the node.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:block></fo:block></fo:block><fo:block id="_highly_available_neutron_dhcp_agent"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0pt" font-family="CartoGothic Std"><fo:block keep-with-next.within-column="always"><fo:block font-family="CartoGothic Std" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt" color="rgb(196,0,34)"><fo:marker marker-class-name="section.head.marker">Highly available neutron DHCP agent</fo:marker><fo:block font-size="20.735999999999997pt">Highly available neutron DHCP agent</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Neutron DHCP agent distributes IP addresses to the VMs with dnsmasq (by
default). High availability for the DHCP agent is achieved by adopting
Pacemaker.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em" id="d5e857"><fo:list-block provisional-distance-between-starts="36pt + 18pt" provisional-label-separation="18pt"><fo:list-item><fo:list-item-label end-indent="label-end()"><fo:block><fo:external-graphic width="auto" height="auto" content-width="36pt" src="url(file:/Users/annegentle/src/ha-guide/doc/ha-guide/target/docbkx/images/note.svg)"/></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block font-size="14pt" font-weight="bold" hyphenate="false" keep-with-next.within-column="always" color="rgb(196,0,34)" font-family="CartoGothic Std">Note</fo:block><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Here is the <fo:basic-link external-destination="url(http://docs.openstack.org/trunk/config-reference/content/section_adv_cfg_dhcp_agent.html)"><fo:inline color="blue" font-style="normal">documentation</fo:inline></fo:basic-link> for installing neutron DHCP agent.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:block><fo:block id="_add_neutron_dhcp_agent_resource_to_pacemaker"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0pt" font-family="CartoGothic Std"><fo:block keep-with-next.within-column="always"><fo:block font-family="CartoGothic Std" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt" color="rgb(196,0,34)"><fo:marker marker-class-name="section.head.marker">Add neutron DHCP agent resource to Pacemaker</fo:marker><fo:block font-size="17.28pt">Add neutron DHCP agent resource to Pacemaker</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">First of all, you need to download the resource agent to your system:</fo:block><fo:block space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" font-family="monospace" font-size="85%" hyphenation-character="\" background-color="#E0E0E0" id="d5e863"><fo:inline font-family="monospace">#</fo:inline> <fo:inline font-family="monospace" font-weight="bold">cd /​usr/​lib/​ocf/​resource.​d/​openstack</fo:inline>
<fo:inline font-family="monospace">#</fo:inline> <fo:inline font-family="monospace" font-weight="bold">wget https:/​/​raw.​github.​com/​madkiss/​openstack-resource-agents/​master/​ocf/​neutron-agent-dhcp</fo:inline>
<fo:inline font-family="monospace">#</fo:inline> <fo:inline font-family="monospace" font-weight="bold">chmod a+rx neutron-agent-dhcp</fo:inline></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">You may now proceed with adding the Pacemaker configuration for
neutron DHCP agent resource. Connect to the Pacemaker cluster with <fo:inline font-family="monospace">crm
configure</fo:inline>, and add the following cluster resources:</fo:block><fo:block space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" font-family="monospace" font-size="85%" hyphenation-character="\" background-color="#E0E0E0" id="d5e872" keep-together.within-column="always">primitive p_neutron-dhcp-agent ocf:openstack:neutron-agent-dhcp \​
    params config=​"/​etc/​neutron/​neutron.​conf" \​
    plugin_config=​"/​etc/​neutron/​dhcp_agent.​ini" \​
    op monitor interval=​"30s" timeout=​"30s"</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This configuration creates:</fo:block><fo:list-block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em" provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em" id="d5e874"><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d5e875"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block><fo:inline font-family="monospace">p_neutron-agent-dhcp</fo:inline>, a
          resource for manage Neutron DHCP Agent service.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-family="monospace">crm configure</fo:inline> supports batch input, so you may copy and paste the
above into your live pacemaker configuration, and then make changes as
required.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Once completed, commit your configuration changes by entering <fo:inline font-family="monospace">commit</fo:inline>
from the <fo:inline font-family="monospace">crm configure</fo:inline> menu. Pacemaker will then start the neutron DHCP
agent service, and its dependent resources, on one of your nodes.</fo:block></fo:block></fo:block><fo:block id="_highly_available_neutron_metadata_agent"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0pt" font-family="CartoGothic Std"><fo:block keep-with-next.within-column="always"><fo:block font-family="CartoGothic Std" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt" color="rgb(196,0,34)"><fo:marker marker-class-name="section.head.marker">Highly available neutron metadata agent</fo:marker><fo:block font-size="20.735999999999997pt">Highly available neutron metadata agent</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Neutron metadata agent allows Compute API metadata to be reachable by VMs on tenant
networks. High availability for the metadata agent is achieved by adopting
Pacemaker.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em" id="d5e886"><fo:list-block provisional-distance-between-starts="36pt + 18pt" provisional-label-separation="18pt"><fo:list-item><fo:list-item-label end-indent="label-end()"><fo:block><fo:external-graphic width="auto" height="auto" content-width="36pt" src="url(file:/Users/annegentle/src/ha-guide/doc/ha-guide/target/docbkx/images/note.svg)"/></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block font-size="14pt" font-weight="bold" hyphenate="false" keep-with-next.within-column="always" color="rgb(196,0,34)" font-family="CartoGothic Std">Note</fo:block><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Here is the <fo:basic-link external-destination="url(http://docs.openstack.org/trunk/config-reference/content/networking-options-metadata.html)"><fo:inline color="blue" font-style="normal">documentation</fo:inline></fo:basic-link> for installing Neutron Metadata Agent.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:block><fo:block id="_add_neutron_metadata_agent_resource_to_pacemaker"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0pt" font-family="CartoGothic Std"><fo:block keep-with-next.within-column="always"><fo:block font-family="CartoGothic Std" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt" color="rgb(196,0,34)"><fo:marker marker-class-name="section.head.marker">Add neutron metadata agent resource to Pacemaker</fo:marker><fo:block font-size="17.28pt">Add neutron metadata agent resource to Pacemaker</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">First of all, you need to download the resource agent to your system:</fo:block><fo:block space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" font-family="monospace" font-size="85%" hyphenation-character="\" background-color="#E0E0E0" id="d5e892"><fo:inline font-family="monospace">#</fo:inline> <fo:inline font-family="monospace" font-weight="bold">cd /​usr/​lib/​ocf/​resource.​d/​openstack</fo:inline>
<fo:inline font-family="monospace">#</fo:inline> <fo:inline font-family="monospace" font-weight="bold">wget https:/​/​raw.​github.​com/​madkiss/​openstack-resource-agents/​master/​ocf/​neutron-metadata-agent</fo:inline>
<fo:inline font-family="monospace">#</fo:inline> <fo:inline font-family="monospace" font-weight="bold">chmod a+rx neutron-metadata-agent</fo:inline></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">You may now proceed with adding the Pacemaker configuration for
neutron metadata agent resource. Connect to the Pacemaker cluster with <fo:inline font-family="monospace">crm
configure</fo:inline>, and add the following cluster resources:</fo:block><fo:block space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" font-family="monospace" font-size="85%" hyphenation-character="\" background-color="#E0E0E0" id="d5e901" keep-together.within-column="always">primitive p_neutron-metadata-agent ocf:openstack:neutron-metadata-agent \​
    params config=​"/​etc/​neutron/​neutron.​conf" \​
    plugin_config=​"/​etc/​neutron/​metadata_agent.​ini" \​
    op monitor interval=​"30s" timeout=​"30s"</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This configuration creates</fo:block><fo:list-block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em" provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em" id="d5e903"><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d5e904"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block><fo:inline font-family="monospace">p_neutron-metadata-agent</fo:inline>, a resource for manage Neutron Metadata Agent
service
</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-family="monospace">crm configure</fo:inline> supports batch input, so you may copy and paste the
above into your live pacemaker configuration, and then make changes as
required.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Once completed, commit your configuration changes by entering <fo:inline font-family="monospace">commit</fo:inline>
from the <fo:inline font-family="monospace">crm configure</fo:inline> menu. Pacemaker will then start the neutron metadata
agent service, and its dependent resources, on one of your nodes.</fo:block></fo:block></fo:block><fo:block id="_manage_network_resources"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0pt" font-family="CartoGothic Std"><fo:block keep-with-next.within-column="always"><fo:block font-family="CartoGothic Std" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt" color="rgb(196,0,34)"><fo:marker marker-class-name="section.head.marker">Manage network resources</fo:marker><fo:block font-size="20.735999999999997pt">Manage network resources</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">You can now add the Pacemaker configuration for
managing all network resources together with a group.
Connect to the Pacemaker cluster with <fo:inline font-family="monospace">crm configure</fo:inline>, and add the following
cluster resources:</fo:block><fo:block space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" font-family="monospace" font-size="85%" hyphenation-character="\" background-color="#E0E0E0" id="d5e916" keep-together.within-column="always">group g_services_network p_neutron-l3-agent p_neutron-dhcp-agent \​
    p_neutron-metadata_agent</fo:block></fo:block></fo:flow></fo:page-sequence><fo:page-sequence xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" hyphenate="true" master-reference="titlepage" language="en" format="1" initial-page-number="auto" force-page-count="no-force" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2"><fo:static-content xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" flow-name="xsl-region-before-first"><fo:block-container reference-orientation="90" absolute-position="fixed" top="-1in" overflow="visible" height="2in" width="30in" z-index="1"><fo:block padding-before=".45in" font-size="1.5em" color="gray" font-weight="bold"><fo:leader leader-pattern="use-content" leader-length="30in" letter-spacing=".1em">  </fo:leader></fo:block></fo:block-container><fo:block font-family="CartoGothic Std" margin-left="0pt"/></fo:static-content><fo:static-content xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" flow-name="xsl-region-before-odd"><fo:block-container reference-orientation="90" absolute-position="fixed" top="-1in" overflow="visible" height="2in" width="30in" z-index="1"><fo:block padding-before=".45in" font-size="1.5em" color="gray" font-weight="bold"><fo:leader leader-pattern="use-content" leader-length="30in" letter-spacing=".1em">  </fo:leader></fo:block></fo:block-container><fo:block font-family="CartoGothic Std" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block>OpenStack High Availability Guide</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block>September 14, 2014</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block>current</fo:block></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" flow-name="xsl-region-before-even"><fo:block-container reference-orientation="90" absolute-position="fixed" top="-1in" overflow="visible" height="2in" width="30in" z-index="1"><fo:block padding-before=".45in" font-size="1.5em" color="gray" font-weight="bold"><fo:leader leader-pattern="use-content" leader-length="30in" letter-spacing=".1em">  </fo:leader></fo:block></fo:block-container><fo:block font-family="CartoGothic Std" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block>OpenStack High Availability Guide</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block>September 14, 2014</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block>current</fo:block></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" flow-name="xsl-region-before-blank"><fo:block-container reference-orientation="90" absolute-position="fixed" top="-1in" overflow="visible" height="2in" width="30in" z-index="1"><fo:block padding-before=".45in" font-size="1.5em" color="gray" font-weight="bold"><fo:leader leader-pattern="use-content" leader-length="30in" letter-spacing=".1em">  </fo:leader></fo:block></fo:block-container><fo:block font-family="CartoGothic Std" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-footnote-separator"><fo:block><fo:leader color="black" leader-pattern="rule" leader-length="1in"/></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-first"><fo:block font-family="CartoGothic Std" margin-left="0pt"/></fo:static-content><fo:static-content flow-name="xsl-region-after-odd"><fo:block font-family="CartoGothic Std" margin-left="0pt"><fo:table xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-even"><fo:block font-family="CartoGothic Std" margin-left="0pt"><fo:table xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-blank"><fo:block font-family="CartoGothic Std" margin-left="0pt"><fo:table xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:flow flow-name="xsl-region-body"><fo:block id="ha-using-active-active"><fo:block><fo:block><fo:block text-align="center" font-size="24.8832pt" space-before="18.6624pt" font-weight="bold" font-family="CartoGothic Std"><fo:block keep-with-next.within-column="always" hyphenate="false">Part II. HA using active/active</fo:block></fo:block></fo:block></fo:block></fo:block></fo:flow></fo:page-sequence><fo:page-sequence xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" hyphenate="true" master-reference="lot" language="en" format="1" initial-page-number="auto" force-page-count="no-force" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2"><fo:static-content xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" flow-name="xsl-region-before-first"><fo:block-container reference-orientation="90" absolute-position="fixed" top="-1in" overflow="visible" height="2in" width="30in" z-index="1"><fo:block padding-before=".45in" font-size="1.5em" color="gray" font-weight="bold"><fo:leader leader-pattern="use-content" leader-length="30in" letter-spacing=".1em">  </fo:leader></fo:block></fo:block-container><fo:block font-family="CartoGothic Std" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block>OpenStack High Availability Guide</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block>September 14, 2014</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block>current</fo:block></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" flow-name="xsl-region-before-odd"><fo:block-container reference-orientation="90" absolute-position="fixed" top="-1in" overflow="visible" height="2in" width="30in" z-index="1"><fo:block padding-before=".45in" font-size="1.5em" color="gray" font-weight="bold"><fo:leader leader-pattern="use-content" leader-length="30in" letter-spacing=".1em">  </fo:leader></fo:block></fo:block-container><fo:block font-family="CartoGothic Std" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block>OpenStack High Availability Guide</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block>September 14, 2014</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block>current</fo:block></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" flow-name="xsl-region-before-even"><fo:block-container reference-orientation="90" absolute-position="fixed" top="-1in" overflow="visible" height="2in" width="30in" z-index="1"><fo:block padding-before=".45in" font-size="1.5em" color="gray" font-weight="bold"><fo:leader leader-pattern="use-content" leader-length="30in" letter-spacing=".1em">  </fo:leader></fo:block></fo:block-container><fo:block font-family="CartoGothic Std" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block>OpenStack High Availability Guide</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block>September 14, 2014</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block>current</fo:block></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" flow-name="xsl-region-before-blank"><fo:block-container reference-orientation="90" absolute-position="fixed" top="-1in" overflow="visible" height="2in" width="30in" z-index="1"><fo:block padding-before=".45in" font-size="1.5em" color="gray" font-weight="bold"><fo:leader leader-pattern="use-content" leader-length="30in" letter-spacing=".1em">  </fo:leader></fo:block></fo:block-container><fo:block font-family="CartoGothic Std" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-footnote-separator"><fo:block><fo:leader color="black" leader-pattern="rule" leader-length="1in"/></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-first"><fo:block font-family="CartoGothic Std" margin-left="0pt"><fo:table xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-odd"><fo:block font-family="CartoGothic Std" margin-left="0pt"><fo:table xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-even"><fo:block font-family="CartoGothic Std" margin-left="0pt"><fo:table xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-blank"><fo:block font-family="CartoGothic Std" margin-left="0pt"><fo:table xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:flow flow-name="xsl-region-body" start-indent="4pc" end-indent="0pt"><fo:block space-before.minimum="0.5em" space-before.optimum="1em" space-before.maximum="2em" space-after.minimum="0.5em" space-after.optimum="1em" space-after.maximum="2em" id="toc...ha-using-active-active"><fo:block><fo:block><fo:block space-before.minimum="1em" space-before.optimum="1.5em" space-before.maximum="2em" space-after="0.5em" margin-left="0pt" start-indent="0pt" font-size="20.736pt" font-weight="bold" color="rgb(196,0,34)" font-family="CartoGothic Std">Table of Contents</fo:block></fo:block></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="ha-aa-db">6. Database</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="ha-aa-db"><fo:page-number-citation ref-id="ha-aa-db"/></fo:basic-link></fo:inline></fo:block><fo:block id="toc.ha-using-active-active.ha-aa-db" margin-left="24pt"><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="ha-aa-db-mysql-galera">MySQL with Galera</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="ha-aa-db-mysql-galera"><fo:page-number-citation ref-id="ha-aa-db-mysql-galera"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="ha-aa-db-galera-monitoring">Galera monitoring scripts</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="ha-aa-db-galera-monitoring"><fo:page-number-citation ref-id="ha-aa-db-galera-monitoring"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="_other_ways_to_provide_a_highly_available_database">Other ways to provide a highly available database</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="_other_ways_to_provide_a_highly_available_database"><fo:page-number-citation ref-id="_other_ways_to_provide_a_highly_available_database"/></fo:basic-link></fo:inline></fo:block></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="ha-aa-rabbitmq">7. RabbitMQ</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="ha-aa-rabbitmq"><fo:page-number-citation ref-id="ha-aa-rabbitmq"/></fo:basic-link></fo:inline></fo:block><fo:block id="toc.ha-using-active-active.ha-aa-rabbitmq" margin-left="24pt"><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="_install_rabbitmq">Install RabbitMQ</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="_install_rabbitmq"><fo:page-number-citation ref-id="_install_rabbitmq"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="_configure_rabbitmq">Configure RabbitMQ</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="_configure_rabbitmq"><fo:page-number-citation ref-id="_configure_rabbitmq"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="_configure_openstack_services_to_use_rabbitmq">Configure OpenStack services to use RabbitMQ</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="_configure_openstack_services_to_use_rabbitmq"><fo:page-number-citation ref-id="_configure_openstack_services_to_use_rabbitmq"/></fo:basic-link></fo:inline></fo:block></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="ha-aa-haproxy">8. HAproxy nodes</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="ha-aa-haproxy"><fo:page-number-citation ref-id="ha-aa-haproxy"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="ha-aa-controllers">9. OpenStack controller nodes</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="ha-aa-controllers"><fo:page-number-citation ref-id="ha-aa-controllers"/></fo:basic-link></fo:inline></fo:block><fo:block id="toc.ha-using-active-active.ha-aa-controllers" margin-left="24pt"><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="_run_openstack_api_and_schedulers">Run OpenStack API and schedulers</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="_run_openstack_api_and_schedulers"><fo:page-number-citation ref-id="_run_openstack_api_and_schedulers"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="_memcached">Memcached</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="_memcached"><fo:page-number-citation ref-id="_memcached"/></fo:basic-link></fo:inline></fo:block></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="ha-aa-network">10. OpenStack network nodes</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="ha-aa-network"><fo:page-number-citation ref-id="ha-aa-network"/></fo:basic-link></fo:inline></fo:block><fo:block id="toc.ha-using-active-active.ha-aa-network" margin-left="24pt"><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="_run_neutron_dhcp_agent">Run neutron DHCP agent</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="_run_neutron_dhcp_agent"><fo:page-number-citation ref-id="_run_neutron_dhcp_agent"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="_run_neutron_l3_agent">Run neutron L3 agent</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="_run_neutron_l3_agent"><fo:page-number-citation ref-id="_run_neutron_l3_agent"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="_run_neutron_metadata_agent">Run neutron metadata agent</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="_run_neutron_metadata_agent"><fo:page-number-citation ref-id="_run_neutron_metadata_agent"/></fo:basic-link></fo:inline></fo:block></fo:block></fo:block></fo:flow></fo:page-sequence><fo:page-sequence xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" hyphenate="true" master-reference="body" language="en" format="1" initial-page-number="auto" force-page-count="no-force" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2"><fo:static-content xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" flow-name="xsl-region-before-first"><fo:block-container reference-orientation="90" absolute-position="fixed" top="-1in" overflow="visible" height="2in" width="30in" z-index="1"><fo:block padding-before=".45in" font-size="1.5em" color="gray" font-weight="bold"><fo:leader leader-pattern="use-content" leader-length="30in" letter-spacing=".1em">  </fo:leader></fo:block></fo:block-container><fo:block font-family="CartoGothic Std" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block>OpenStack High Availability Guide</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block>September 14, 2014</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block>current</fo:block></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" flow-name="xsl-region-before-odd"><fo:block-container reference-orientation="90" absolute-position="fixed" top="-1in" overflow="visible" height="2in" width="30in" z-index="1"><fo:block padding-before=".45in" font-size="1.5em" color="gray" font-weight="bold"><fo:leader leader-pattern="use-content" leader-length="30in" letter-spacing=".1em">  </fo:leader></fo:block></fo:block-container><fo:block font-family="CartoGothic Std" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block>OpenStack High Availability Guide</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block>September 14, 2014</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block>current</fo:block></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" flow-name="xsl-region-before-even"><fo:block-container reference-orientation="90" absolute-position="fixed" top="-1in" overflow="visible" height="2in" width="30in" z-index="1"><fo:block padding-before=".45in" font-size="1.5em" color="gray" font-weight="bold"><fo:leader leader-pattern="use-content" leader-length="30in" letter-spacing=".1em">  </fo:leader></fo:block></fo:block-container><fo:block font-family="CartoGothic Std" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block>OpenStack High Availability Guide</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block>September 14, 2014</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block>current</fo:block></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" flow-name="xsl-region-before-blank"><fo:block-container reference-orientation="90" absolute-position="fixed" top="-1in" overflow="visible" height="2in" width="30in" z-index="1"><fo:block padding-before=".45in" font-size="1.5em" color="gray" font-weight="bold"><fo:leader leader-pattern="use-content" leader-length="30in" letter-spacing=".1em">  </fo:leader></fo:block></fo:block-container><fo:block font-family="CartoGothic Std" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-footnote-separator"><fo:block><fo:leader color="black" leader-pattern="rule" leader-length="1in"/></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-first"><fo:block font-family="CartoGothic Std" margin-left="0pt"><fo:table xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-odd"><fo:block font-family="CartoGothic Std" margin-left="0pt"><fo:table xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-even"><fo:block font-family="CartoGothic Std" margin-left="0pt"><fo:table xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-blank"><fo:block font-family="CartoGothic Std" margin-left="0pt"><fo:table xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:flow flow-name="xsl-region-body" start-indent="4pc" end-indent="0pt"><fo:block id="ha-aa-db"><fo:block font-family="CartoGothic Std"><fo:block margin-left="0pt"><fo:block font-size="24.8832pt" font-weight="bold"><fo:block keep-with-next.within-column="always" space-before.optimum="10pt" space-before.minimum="10pt * 0.8" space-before.maximum="10pt * 1.2" hyphenate="false" text-align="start" start-indent="0pt" font-family="CartoGothic Std" color="rgb(196,0,34)" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2">6. Database</fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="1em" space-before.maximum="2em" space-after.minimum="0.5em" space-after.optimum="1em" space-after.maximum="2em" id="toc...ha-aa-db"><fo:block><fo:block><fo:block space-before.minimum="1em" space-before.optimum="1.5em" space-before.maximum="2em" space-after="0.5em" margin-left="0pt" start-indent="0pt" font-size="20.736pt" font-weight="bold" color="rgb(196,0,34)" font-family="CartoGothic Std">Table of Contents</fo:block></fo:block></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="ha-aa-db-mysql-galera">MySQL with Galera</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="ha-aa-db-mysql-galera"><fo:page-number-citation ref-id="ha-aa-db-mysql-galera"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="ha-aa-db-galera-monitoring">Galera monitoring scripts</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="ha-aa-db-galera-monitoring"><fo:page-number-citation ref-id="ha-aa-db-galera-monitoring"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="_other_ways_to_provide_a_highly_available_database">Other ways to provide a highly available database</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="_other_ways_to_provide_a_highly_available_database"><fo:page-number-citation ref-id="_other_ways_to_provide_a_highly_available_database"/></fo:basic-link></fo:inline></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The first step is installing the database that sits at the heart of the
cluster. When we talk about High Availability, we talk about several databases (for redundancy) and a
means to keep them synchronized. In this case, we must choose the
MySQL database, along with Galera for synchronous multi-master replication.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The choice of database isn’t a foregone conclusion; you’re not required
to use MySQL. It is, however, a fairly common choice in OpenStack
installations, so we’ll cover it here.</fo:block><fo:block id="ha-aa-db-mysql-galera"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0pt" font-family="CartoGothic Std"><fo:block keep-with-next.within-column="always"><fo:block font-family="CartoGothic Std" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt" color="rgb(196,0,34)"><fo:marker marker-class-name="section.head.marker">MySQL with Galera</fo:marker><fo:block font-size="20.735999999999997pt">MySQL with Galera</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Rather than starting with a vanilla version of MySQL, and then adding
Galera, you will want to install a version of MySQL patched for wsrep
(Write Set REPlication) from <fo:basic-link external-destination="url(https://launchpad.net/codership-mysql/0.7)"><fo:inline color="blue" font-style="normal">https://launchpad.net/codership-mysql/0.7</fo:inline></fo:basic-link>.
The wsrep API is suitable for configuring MySQL High Availability in
OpenStack because it supports synchronous replication.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Note that the installation requirements call for careful attention. Read
the guide <fo:basic-link external-destination="url(https://launchpadlibrarian.net/66669857/README-wsrep)"><fo:inline color="blue" font-style="normal">https://launchpadlibrarian.net/66669857/README-wsrep</fo:inline></fo:basic-link>
to ensure you follow all the required steps.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" font-weight="bold" font-size="12pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" color="rgb(176,0,14)" font-family="CartoGothic Std" keep-with-next.within-column="always">Installing Galera through a MySQL version patched for wsrep:</fo:block><fo:list-block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em" provisional-label-separation="0.2em" provisional-distance-between-starts="1.2em" id="d5e929"><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d5e931"><fo:list-item-label end-indent="label-end()"><fo:block>1.</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>
Download Galera from <fo:basic-link external-destination="url(https://launchpad.net/galera/+download)"><fo:inline color="blue" font-style="normal">https://launchpad.net/galera/+download</fo:inline></fo:basic-link>, and
  install the *.rpms or *.debs, which takes care of any dependencies
  that your system doesn’t already have installed.
</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d5e934"><fo:list-item-label end-indent="label-end()"><fo:block>2.</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>
Adjust the configuration:
</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">In the system-wide <fo:inline font-family="monospace">my.conf</fo:inline> file, make sure mysqld isn’t bound to
127.0.0.1, and that <fo:inline font-family="monospace">/etc/mysql/conf.d/</fo:inline> is included.
Typically you can find this file at <fo:inline font-family="monospace">/etc/my.cnf</fo:inline>:</fo:block><fo:block space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" font-family="monospace" font-size="85%" hyphenation-character="\" background-color="#E0E0E0" id="d5e940" keep-together.within-column="always">[mysqld]
.​.​.​
!includedir /​etc/​mysql/​conf.​d/​
.​.​.​
#bind-address =​ 127.​0.​0.​1</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">When adding a new node, you must configure it with a MySQL account that
can access the other nodes. The new node must be able to request a state
snapshot from one of the existing nodes:</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d5e942"><fo:list-item-label end-indent="label-end()"><fo:block>3.</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>
Specify your MySQL account information in <fo:inline font-family="monospace">/etc/mysql/conf.d/wsrep.cnf</fo:inline>:
</fo:block><fo:block space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" font-family="monospace" font-size="85%" hyphenation-character="\" background-color="#E0E0E0" id="d5e945" keep-together.within-column="always">wsrep_sst_auth=​wsrep_sst:wspass</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d5e946"><fo:list-item-label end-indent="label-end()"><fo:block>4.</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>
Connect as root and grant privileges to that user:
</fo:block><fo:block space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" font-family="monospace" font-size="85%" hyphenation-character="\" background-color="#E0E0E0" id="d5e948"><fo:inline font-family="monospace"/> <fo:inline font-family="monospace" font-weight="bold">mysql -e "SET wsrep_on=​OFF; GRANT ALL ON *.​* TO wsrep_sst@'%' IDENTIFIED BY 'wspass'";</fo:inline></fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d5e951"><fo:list-item-label end-indent="label-end()"><fo:block>5.</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>
Remove user accounts with empty user names because they cause problems:
</fo:block><fo:block space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" font-family="monospace" font-size="85%" hyphenation-character="\" background-color="#E0E0E0" id="d5e953"><fo:inline font-family="monospace">$</fo:inline> <fo:inline font-family="monospace" font-weight="bold">mysql -e "SET wsrep_on=​OFF; DELETE FROM mysql.​user WHERE user=​'';"</fo:inline></fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d5e956"><fo:list-item-label end-indent="label-end()"><fo:block>6.</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>
Set up certain mandatory configuration options within MySQL itself.
These include:
</fo:block><fo:block space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" font-family="monospace" font-size="85%" hyphenation-character="\" background-color="#E0E0E0" id="d5e958" keep-together.within-column="always">query_cache_size=​0
binlog_format=​ROW
default_storage_engine=​innodb
innodb_autoinc_lock_mode=​2
innodb_doublewrite=​1</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d5e959"><fo:list-item-label end-indent="label-end()"><fo:block>7.</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>
Check that the nodes can access each other through the firewall.
Depending on your environment, this might mean adjusting iptables, as in:
</fo:block><fo:block space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" font-family="monospace" font-size="85%" hyphenation-character="\" background-color="#E0E0E0" id="d5e961"><fo:inline font-family="monospace">#</fo:inline> <fo:inline font-family="monospace" font-weight="bold">iptables --insert RH-Firewall-1-INPUT 1 --proto tcp \​
  --source &lt;my IP&gt;/​24 --destination &lt;my IP&gt;/​32 --dport 3306 \​
  -j ACCEPT</fo:inline>
<fo:inline font-family="monospace">#</fo:inline> <fo:inline font-family="monospace" font-weight="bold">iptables --insert RH-Firewall-1-INPUT 1 --proto tcp \​
  --source &lt;my IP&gt;/​24 --destination &lt;my IP&gt;/​32 --dport 4567 \​
  -j ACCEPT</fo:inline></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This might also mean configuring any NAT firewall between nodes to allow
direct connections. You might need to disable SELinux, or configure it to
allow mysqld to listen to sockets at unprivileged ports.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Now you’re ready to create the cluster.</fo:block><fo:block id="_create_the_cluster"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0pt" font-family="CartoGothic Std"><fo:block keep-with-next.within-column="always"><fo:block font-family="CartoGothic Std" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt" color="rgb(196,0,34)"><fo:marker marker-class-name="section.head.marker">Create the cluster</fo:marker><fo:block font-size="17.28pt">Create the cluster</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">In creating a cluster, you first start a single instance, which creates
the cluster. The rest of the MySQL instances then connect to
that cluster:</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" font-weight="bold" font-size="12pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" color="rgb(176,0,14)" font-family="CartoGothic Std" keep-with-next.within-column="always">An example of creating the cluster:</fo:block><fo:list-block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em" provisional-label-separation="0.2em" provisional-distance-between-starts="1.2em" id="d5e971"><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d5e973"><fo:list-item-label end-indent="label-end()"><fo:block>1.</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>
Start on <fo:inline font-family="monospace">10.0.0.10</fo:inline> by executing the command:
</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block><fo:block space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" font-family="monospace" font-size="85%" hyphenation-character="\" background-color="#E0E0E0" id="d5e976"><fo:inline font-family="monospace">#</fo:inline> <fo:inline font-family="monospace" font-weight="bold">service mysql start wsrep_cluster_address=​gcomm:/​/</fo:inline></fo:block><fo:list-block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em" provisional-label-separation="0.2em" provisional-distance-between-starts="1.2em" id="d5e979"><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d5e980"><fo:list-item-label end-indent="label-end()"><fo:block>1.</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>
Connect to that cluster on the rest of the nodes by referencing the
address of that node, as in:
</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block><fo:block space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" font-family="monospace" font-size="85%" hyphenation-character="\" background-color="#E0E0E0" id="d5e982"><fo:inline font-family="monospace">#</fo:inline> <fo:inline font-family="monospace" font-weight="bold">service mysql start wsrep_cluster_address=​gcomm:/​/​10.​0.​0.​10</fo:inline></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">You also have the option to set the <fo:inline font-family="monospace">wsrep_cluster_address</fo:inline> in the
<fo:inline font-family="monospace">/etc/mysql/conf.d/wsrep.cnf</fo:inline> file, or within the client itself. (In
fact, for some systems, such as MariaDB or Percona, this may be your
only option.)</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" font-weight="bold" font-size="12pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" color="rgb(176,0,14)" font-family="CartoGothic Std" keep-with-next.within-column="always">An example of checking the status of the cluster.</fo:block><fo:list-block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em" provisional-label-separation="0.2em" provisional-distance-between-starts="1.2em" id="d5e988"><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d5e990"><fo:list-item-label end-indent="label-end()"><fo:block>1.</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>
Open the MySQL client and check the status of the various parameters:
</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block><fo:block space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" font-family="monospace" font-size="85%" hyphenation-character="\" background-color="#E0E0E0" id="d5e992"><fo:inline font-family="monospace">mysql&gt;</fo:inline> <fo:inline font-family="monospace" font-weight="bold">SET GLOBAL wsrep_cluster_address=​'&lt;cluster address string&gt;';</fo:inline>
<fo:inline font-family="monospace">mysql&gt;</fo:inline> <fo:inline font-family="monospace" font-weight="bold">SHOW STATUS LIKE 'wsrep%';</fo:inline></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">You should see a status that looks something like this:</fo:block><fo:block space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" font-family="monospace" font-size="85%" hyphenation-character="\" background-color="#E0E0E0" id="d5e998"><fo:inline font-family="monospace">mysql&gt;</fo:inline> <fo:inline font-family="monospace" font-weight="bold">show status like 'wsrep%';</fo:inline>
<fo:inline font-family="monospace">+----------------------------+--------------------------------------+
| Variable_name              | Value                                |
+----------------------------+--------------------------------------+
| wsrep_local_state_uuid     | 111fc28b-1b05-11e1-0800-e00ec5a7c930 |
| wsrep_protocol_version     | 1                                    |
| wsrep_last_committed       | 0                                    |
| wsrep_replicated           | 0                                    |
| wsrep_replicated_bytes     | 0                                    |
| wsrep_received             | 2                                    |
| wsrep_received_bytes       | 134                                  |
| wsrep_local_commits        | 0                                    |
| wsrep_local_cert_failures  | 0                                    |
| wsrep_local_bf_aborts      | 0                                    |
| wsrep_local_replays        | 0                                    |
| wsrep_local_send_queue     | 0                                    |
| wsrep_local_send_queue_avg | 0.​000000                             |
| wsrep_local_recv_queue     | 0                                    |
| wsrep_local_recv_queue_avg | 0.​000000                             |
| wsrep_flow_control_paused  | 0.​000000                             |
| wsrep_flow_control_sent    | 0                                    |
| wsrep_flow_control_recv    | 0                                    |
| wsrep_cert_deps_distance   | 0.​000000                             |
| wsrep_apply_oooe           | 0.​000000                             |
| wsrep_apply_oool           | 0.​000000                             |
| wsrep_apply_window         | 0.​000000                             |
| wsrep_commit_oooe          | 0.​000000                             |
| wsrep_commit_oool          | 0.​000000                             |
| wsrep_commit_window        | 0.​000000                             |
| wsrep_local_state          | 4                                    |
| wsrep_local_state_comment  | Synced (6)                           |
| wsrep_cert_index_size      | 0                                    |
| wsrep_cluster_conf_id      | 1                                    |
| wsrep_cluster_size         | 1                                    |
| wsrep_cluster_state_uuid   | 111fc28b-1b05-11e1-0800-e00ec5a7c930 |
| wsrep_cluster_status       | Primary                              |
| wsrep_connected            | ON                                   |
| wsrep_local_index          | 0                                    |
| wsrep_provider_name        | Galera                               |
| wsrep_provider_vendor      | Codership Oy                         |
| wsrep_provider_version     | 21.​1.​0(r86)                          |
| wsrep_ready                | ON                                   |
+----------------------------+--------------------------------------+
38 rows in set (0.​01 sec)</fo:inline></fo:block></fo:block></fo:block><fo:block id="ha-aa-db-galera-monitoring"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0pt" font-family="CartoGothic Std"><fo:block keep-with-next.within-column="always"><fo:block font-family="CartoGothic Std" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt" color="rgb(196,0,34)"><fo:marker marker-class-name="section.head.marker">Galera monitoring scripts</fo:marker><fo:block font-size="20.735999999999997pt">Galera monitoring scripts</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">(Coming soon)</fo:block></fo:block><fo:block id="_other_ways_to_provide_a_highly_available_database"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0pt" font-family="CartoGothic Std"><fo:block keep-with-next.within-column="always"><fo:block font-family="CartoGothic Std" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt" color="rgb(196,0,34)"><fo:marker marker-class-name="section.head.marker">Other ways to provide a highly available database</fo:marker><fo:block font-size="20.735999999999997pt">Other ways to provide a highly available database</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">MySQL with Galera is by no means the only way to achieve database HA.
MariaDB (<fo:basic-link external-destination="url(https://mariadb.org/)"><fo:inline color="blue" font-style="normal">https://mariadb.org/</fo:inline></fo:basic-link>) and Percona (<fo:basic-link external-destination="url(http://www.percona.com/)"><fo:inline color="blue" font-style="normal">http://www.percona.com/</fo:inline></fo:basic-link>)
also work with Galera. You also have the option to use PostgreSQL, which
has its own replication, or another database HA option.</fo:block></fo:block></fo:flow></fo:page-sequence><fo:page-sequence xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" hyphenate="true" master-reference="body" language="en" format="1" initial-page-number="auto" force-page-count="no-force" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2"><fo:static-content xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" flow-name="xsl-region-before-first"><fo:block-container reference-orientation="90" absolute-position="fixed" top="-1in" overflow="visible" height="2in" width="30in" z-index="1"><fo:block padding-before=".45in" font-size="1.5em" color="gray" font-weight="bold"><fo:leader leader-pattern="use-content" leader-length="30in" letter-spacing=".1em">  </fo:leader></fo:block></fo:block-container><fo:block font-family="CartoGothic Std" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block>OpenStack High Availability Guide</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block>September 14, 2014</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block>current</fo:block></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" flow-name="xsl-region-before-odd"><fo:block-container reference-orientation="90" absolute-position="fixed" top="-1in" overflow="visible" height="2in" width="30in" z-index="1"><fo:block padding-before=".45in" font-size="1.5em" color="gray" font-weight="bold"><fo:leader leader-pattern="use-content" leader-length="30in" letter-spacing=".1em">  </fo:leader></fo:block></fo:block-container><fo:block font-family="CartoGothic Std" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block>OpenStack High Availability Guide</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block>September 14, 2014</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block>current</fo:block></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" flow-name="xsl-region-before-even"><fo:block-container reference-orientation="90" absolute-position="fixed" top="-1in" overflow="visible" height="2in" width="30in" z-index="1"><fo:block padding-before=".45in" font-size="1.5em" color="gray" font-weight="bold"><fo:leader leader-pattern="use-content" leader-length="30in" letter-spacing=".1em">  </fo:leader></fo:block></fo:block-container><fo:block font-family="CartoGothic Std" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block>OpenStack High Availability Guide</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block>September 14, 2014</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block>current</fo:block></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" flow-name="xsl-region-before-blank"><fo:block-container reference-orientation="90" absolute-position="fixed" top="-1in" overflow="visible" height="2in" width="30in" z-index="1"><fo:block padding-before=".45in" font-size="1.5em" color="gray" font-weight="bold"><fo:leader leader-pattern="use-content" leader-length="30in" letter-spacing=".1em">  </fo:leader></fo:block></fo:block-container><fo:block font-family="CartoGothic Std" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-footnote-separator"><fo:block><fo:leader color="black" leader-pattern="rule" leader-length="1in"/></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-first"><fo:block font-family="CartoGothic Std" margin-left="0pt"><fo:table xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-odd"><fo:block font-family="CartoGothic Std" margin-left="0pt"><fo:table xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-even"><fo:block font-family="CartoGothic Std" margin-left="0pt"><fo:table xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-blank"><fo:block font-family="CartoGothic Std" margin-left="0pt"><fo:table xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:flow flow-name="xsl-region-body" start-indent="4pc" end-indent="0pt"><fo:block id="ha-aa-rabbitmq"><fo:block font-family="CartoGothic Std"><fo:block margin-left="0pt"><fo:block font-size="24.8832pt" font-weight="bold"><fo:block keep-with-next.within-column="always" space-before.optimum="10pt" space-before.minimum="10pt * 0.8" space-before.maximum="10pt * 1.2" hyphenate="false" text-align="start" start-indent="0pt" font-family="CartoGothic Std" color="rgb(196,0,34)" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2">7. RabbitMQ</fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="1em" space-before.maximum="2em" space-after.minimum="0.5em" space-after.optimum="1em" space-after.maximum="2em" id="toc...ha-aa-rabbitmq"><fo:block><fo:block><fo:block space-before.minimum="1em" space-before.optimum="1.5em" space-before.maximum="2em" space-after="0.5em" margin-left="0pt" start-indent="0pt" font-size="20.736pt" font-weight="bold" color="rgb(196,0,34)" font-family="CartoGothic Std">Table of Contents</fo:block></fo:block></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="_install_rabbitmq">Install RabbitMQ</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="_install_rabbitmq"><fo:page-number-citation ref-id="_install_rabbitmq"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="_configure_rabbitmq">Configure RabbitMQ</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="_configure_rabbitmq"><fo:page-number-citation ref-id="_configure_rabbitmq"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="_configure_openstack_services_to_use_rabbitmq">Configure OpenStack services to use RabbitMQ</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="_configure_openstack_services_to_use_rabbitmq"><fo:page-number-citation ref-id="_configure_openstack_services_to_use_rabbitmq"/></fo:basic-link></fo:inline></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">RabbitMQ is the default AMQP server used by many OpenStack services. Making the RabbitMQ service
highly available involves the following steps:</fo:block><fo:list-block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em" provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em" id="d5e1013"><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d5e1014"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>
Install RabbitMQ
</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d5e1016"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>
Configure RabbitMQ for HA queues
</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d5e1018"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>
Configure OpenStack services to use Rabbit HA queues
</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block><fo:block id="_install_rabbitmq"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0pt" font-family="CartoGothic Std"><fo:block keep-with-next.within-column="always"><fo:block font-family="CartoGothic Std" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt" color="rgb(196,0,34)"><fo:marker marker-class-name="section.head.marker">Install RabbitMQ</fo:marker><fo:block font-size="20.735999999999997pt">Install RabbitMQ</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This setup has been tested with RabbitMQ 2.7.1.</fo:block><fo:block id="_on_ubuntu_debian"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0pt" font-family="CartoGothic Std"><fo:block keep-with-next.within-column="always"><fo:block font-family="CartoGothic Std" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt" color="rgb(196,0,34)"><fo:marker marker-class-name="section.head.marker">On Ubuntu / Debian</fo:marker><fo:block font-size="17.28pt">On Ubuntu / Debian</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">RabbitMQ is packaged on both distros:</fo:block><fo:block space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" font-family="monospace" font-size="85%" hyphenation-character="\" background-color="#E0E0E0" id="d5e1026"><fo:inline font-family="monospace">#</fo:inline> <fo:inline font-family="monospace" font-weight="bold">apt-get install rabbitmq-server rabbitmq-plugins</fo:inline></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
            <fo:basic-link external-destination="url(http://www.rabbitmq.com/install-debian.html)"><fo:inline color="blue" font-style="normal">Official manual for installing RabbitMQ on Ubuntu / Debian</fo:inline></fo:basic-link>
          </fo:block></fo:block><fo:block id="_on_fedora_rhel"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0pt" font-family="CartoGothic Std"><fo:block keep-with-next.within-column="always"><fo:block font-family="CartoGothic Std" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt" color="rgb(196,0,34)"><fo:marker marker-class-name="section.head.marker">On Fedora / RHEL</fo:marker><fo:block font-size="17.28pt">On Fedora / RHEL</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">RabbitMQ is packaged on both distros:</fo:block><fo:block space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" font-family="monospace" font-size="85%" hyphenation-character="\" background-color="#E0E0E0" id="d5e1034"><fo:inline font-family="monospace">#</fo:inline> <fo:inline font-family="monospace" font-weight="bold">yum install erlang</fo:inline></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
            <fo:basic-link external-destination="url(http://www.rabbitmq.com/install-rpm.html)"><fo:inline color="blue" font-style="normal">Official manual for installing RabbitMQ on Fedora / RHEL</fo:inline></fo:basic-link>
          </fo:block></fo:block></fo:block><fo:block id="_configure_rabbitmq"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0pt" font-family="CartoGothic Std"><fo:block keep-with-next.within-column="always"><fo:block font-family="CartoGothic Std" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt" color="rgb(196,0,34)"><fo:marker marker-class-name="section.head.marker">Configure RabbitMQ</fo:marker><fo:block font-size="20.735999999999997pt">Configure RabbitMQ</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Here we are building a cluster of RabbitMQ nodes to construct a RabbitMQ broker.
Mirrored queues in RabbitMQ improve the availability of service since it will be resilient to failures.
We have to consider that while exchanges and bindings will survive the loss of individual nodes, queues
and their messages will not because a queue and its contents is located on one node. If we lose this node,
we also lose the queue.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">We consider that we run (at least) two RabbitMQ servers. To build a broker, we need to ensure that all nodes
have the same erlang cookie file. To do so, stop RabbitMQ everywhere and copy the cookie from rabbit1 server
to other server(s):</fo:block><fo:block space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" font-family="monospace" font-size="85%" hyphenation-character="\" background-color="#E0E0E0" id="d5e1043"><fo:inline font-family="monospace">#</fo:inline> <fo:inline font-family="monospace" font-weight="bold">scp /​var/​lib/​rabbitmq/​.​erlang.​cookie \​
root@rabbit2:/​var/​lib/​rabbitmq/​.​erlang.​cookie</fo:inline></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Then, start RabbitMQ on nodes.
If RabbitMQ fails to start, you can’t continue to the next step.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Now, we are building the HA cluster. From rabbit2, run these commands:</fo:block><fo:block space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" font-family="monospace" font-size="85%" hyphenation-character="\" background-color="#E0E0E0" id="d5e1048"><fo:inline font-family="monospace">#</fo:inline> <fo:inline font-family="monospace" font-weight="bold">rabbitmqctl stop_app</fo:inline>
<fo:inline font-family="monospace">#</fo:inline> <fo:inline font-family="monospace" font-weight="bold">rabbitmqctl join_cluster rabbit@rabbit1</fo:inline>
<fo:inline font-family="monospace">#</fo:inline> <fo:inline font-family="monospace" font-weight="bold">rabbitmqctl start_app</fo:inline></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">To verify the cluster status:</fo:block><fo:block space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" font-family="monospace" font-size="85%" hyphenation-character="\" background-color="#E0E0E0" id="d5e1056"><fo:inline font-family="monospace">#</fo:inline> <fo:inline font-family="monospace" font-weight="bold">rabbitmqctl cluster_status</fo:inline>
<fo:inline font-family="monospace">
Cluster status of node rabbit@rabbit2 .​.​.​
[{nodes,​[{disc,​[rabbit@rabbit1]},​{ram,​[rabbit@rabbit2]}]},​{running_nodes,​[rabbit@rabbit2,​rabbit@rabbit1]}]
</fo:inline></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">If the cluster is working, you can now proceed to creating users and passwords for queues.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
          <fo:inline font-weight="bold">Note for RabbitMQ version 3</fo:inline>
        </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Queue mirroring is no longer controlled by the <fo:inline font-style="italic">x-ha-policy</fo:inline> argument when declaring a queue. OpenStack can
continue to declare this argument, but it won’t cause queues to be mirrored.
We need to make sure that all queues (except those with auto-generated names) are mirrored across all running nodes:</fo:block><fo:block space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" font-family="monospace" font-size="85%" hyphenation-character="\" background-color="#E0E0E0" id="d5e1065"><fo:inline font-family="monospace">#</fo:inline> <fo:inline font-family="monospace" font-weight="bold">rabbitmqctl set_policy HA '^(?​!amq\​.​).​*' '{"ha-mode": "all"}'</fo:inline></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
          <fo:basic-link external-destination="url(http://www.rabbitmq.com/ha.html)"><fo:inline color="blue" font-style="normal">More information about High availability in RabbitMQ</fo:inline></fo:basic-link>
        </fo:block></fo:block><fo:block id="_configure_openstack_services_to_use_rabbitmq"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0pt" font-family="CartoGothic Std"><fo:block keep-with-next.within-column="always"><fo:block font-family="CartoGothic Std" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt" color="rgb(196,0,34)"><fo:marker marker-class-name="section.head.marker">Configure OpenStack services to use RabbitMQ</fo:marker><fo:block font-size="20.735999999999997pt">Configure OpenStack services to use RabbitMQ</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">We have to configure the OpenStack components to use at least two RabbitMQ nodes.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Do this configuration on all services using RabbitMQ:</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">RabbitMQ HA cluster host:port pairs:</fo:block><fo:block space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" font-family="monospace" font-size="85%" hyphenation-character="\" background-color="#E0E0E0" id="d5e1075" keep-together.within-column="always">rabbit_hosts=​rabbit1:5672,​rabbit2:5672</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">How frequently to retry connecting with RabbitMQ:</fo:block><fo:block space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" font-family="monospace" font-size="85%" hyphenation-character="\" background-color="#E0E0E0" id="d5e1077" keep-together.within-column="always">rabbit_retry_interval=​1</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">How long to back-off for between retries when connecting to RabbitMQ:</fo:block><fo:block space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" font-family="monospace" font-size="85%" hyphenation-character="\" background-color="#E0E0E0" id="d5e1079" keep-together.within-column="always">rabbit_retry_backoff=​2</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Maximum retries with trying to connect to RabbitMQ (infinite by default):</fo:block><fo:block space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" font-family="monospace" font-size="85%" hyphenation-character="\" background-color="#E0E0E0" id="d5e1081" keep-together.within-column="always">rabbit_max_retries=​0</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Use durable queues in RabbitMQ:</fo:block><fo:block space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" font-family="monospace" font-size="85%" hyphenation-character="\" background-color="#E0E0E0" id="d5e1083" keep-together.within-column="always">rabbit_durable_queues=​false</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Use H/A queues in RabbitMQ (x-ha-policy: all):</fo:block><fo:block space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" font-family="monospace" font-size="85%" hyphenation-character="\" background-color="#E0E0E0" id="d5e1085" keep-together.within-column="always">rabbit_ha_queues=​true</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">If you change the configuration from an old setup which did not use HA queues, you should interrupt the service:</fo:block><fo:block space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" font-family="monospace" font-size="85%" hyphenation-character="\" background-color="#E0E0E0" id="d5e1087"><fo:inline font-family="monospace">#</fo:inline> <fo:inline font-family="monospace" font-weight="bold">rabbitmqctl stop_app</fo:inline>
<fo:inline font-family="monospace">#</fo:inline> <fo:inline font-family="monospace" font-weight="bold">rabbitmqctl reset</fo:inline>
<fo:inline font-family="monospace">#</fo:inline> <fo:inline font-family="monospace" font-weight="bold">rabbitmqctl start_app</fo:inline></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Services currently working with HA queues: OpenStack Compute, OpenStack Block Storage, OpenStack Networking, Telemetry.</fo:block></fo:block></fo:flow></fo:page-sequence><fo:page-sequence xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" hyphenate="true" master-reference="body" language="en" format="1" initial-page-number="auto" force-page-count="no-force" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2"><fo:static-content xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" flow-name="xsl-region-before-first"><fo:block-container reference-orientation="90" absolute-position="fixed" top="-1in" overflow="visible" height="2in" width="30in" z-index="1"><fo:block padding-before=".45in" font-size="1.5em" color="gray" font-weight="bold"><fo:leader leader-pattern="use-content" leader-length="30in" letter-spacing=".1em">  </fo:leader></fo:block></fo:block-container><fo:block font-family="CartoGothic Std" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block>OpenStack High Availability Guide</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block>September 14, 2014</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block>current</fo:block></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" flow-name="xsl-region-before-odd"><fo:block-container reference-orientation="90" absolute-position="fixed" top="-1in" overflow="visible" height="2in" width="30in" z-index="1"><fo:block padding-before=".45in" font-size="1.5em" color="gray" font-weight="bold"><fo:leader leader-pattern="use-content" leader-length="30in" letter-spacing=".1em">  </fo:leader></fo:block></fo:block-container><fo:block font-family="CartoGothic Std" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block>OpenStack High Availability Guide</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block>September 14, 2014</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block>current</fo:block></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" flow-name="xsl-region-before-even"><fo:block-container reference-orientation="90" absolute-position="fixed" top="-1in" overflow="visible" height="2in" width="30in" z-index="1"><fo:block padding-before=".45in" font-size="1.5em" color="gray" font-weight="bold"><fo:leader leader-pattern="use-content" leader-length="30in" letter-spacing=".1em">  </fo:leader></fo:block></fo:block-container><fo:block font-family="CartoGothic Std" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block>OpenStack High Availability Guide</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block>September 14, 2014</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block>current</fo:block></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" flow-name="xsl-region-before-blank"><fo:block-container reference-orientation="90" absolute-position="fixed" top="-1in" overflow="visible" height="2in" width="30in" z-index="1"><fo:block padding-before=".45in" font-size="1.5em" color="gray" font-weight="bold"><fo:leader leader-pattern="use-content" leader-length="30in" letter-spacing=".1em">  </fo:leader></fo:block></fo:block-container><fo:block font-family="CartoGothic Std" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-footnote-separator"><fo:block><fo:leader color="black" leader-pattern="rule" leader-length="1in"/></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-first"><fo:block font-family="CartoGothic Std" margin-left="0pt"><fo:table xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-odd"><fo:block font-family="CartoGothic Std" margin-left="0pt"><fo:table xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-even"><fo:block font-family="CartoGothic Std" margin-left="0pt"><fo:table xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-blank"><fo:block font-family="CartoGothic Std" margin-left="0pt"><fo:table xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:flow flow-name="xsl-region-body" start-indent="4pc" end-indent="0pt"><fo:block id="ha-aa-haproxy"><fo:block font-family="CartoGothic Std"><fo:block margin-left="0pt"><fo:block font-size="24.8832pt" font-weight="bold"><fo:block keep-with-next.within-column="always" space-before.optimum="10pt" space-before.minimum="10pt * 0.8" space-before.maximum="10pt * 1.2" hyphenate="false" text-align="start" start-indent="0pt" font-family="CartoGothic Std" color="rgb(196,0,34)" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2">8. HAproxy nodes</fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">HAProxy is a very fast and reliable solution offering high availability, load balancing, and proxying
for TCP and HTTP-based applications. It is particularly suited for web sites crawling under very high loads
while needing persistence or Layer 7 processing. Supporting tens of thousands of connections is clearly
realistic with today’s hardware.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">For installing HAproxy on your nodes, you should consider its <fo:basic-link external-destination="url(http://haproxy.1wt.eu/#docs)"><fo:inline color="blue" font-style="normal">official documentation</fo:inline></fo:basic-link>.
Also, you have to consider that this service should not be a single point of failure, so you need at least two
nodes running HAproxy.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Here is an example for HAproxy configuration file:</fo:block><fo:block space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" font-family="monospace" font-size="85%" hyphenation-character="\" background-color="#E0E0E0" id="d5e1101">global
  chroot  /​var/​lib/​haproxy
  daemon
  group  haproxy
  maxconn  4000
  pidfile  /​var/​run/​haproxy.​pid
  user  haproxy

defaults
  log  global
  maxconn  8000
  option  redispatch
  retries  3
  timeout  http-request 10s
  timeout  queue 1m
  timeout  connect 10s
  timeout  client 1m
  timeout  server 1m
  timeout  check 10s

listen dashboard_cluster
  bind &lt;Virtual IP&gt;:443
  balance  source
  option  tcpka
  option  httpchk
  option  tcplog
  server controller1 10.​0.​0.​1:443 check inter 2000 rise 2 fall 5
  server controller2 10.​0.​0.​2:443 check inter 2000 rise 2 fall 5

listen galera_cluster
  bind &lt;Virtual IP&gt;:3306
  balance  source
  option  httpchk
  server controller1 10.​0.​0.​4:3306 check port 9200 inter 2000 rise 2 fall 5
  server controller2 10.​0.​0.​5:3306 check port 9200 inter 2000 rise 2 fall 5
  server controller3 10.​0.​0.​6:3306 check port 9200 inter 2000 rise 2 fall 5

listen glance_api_cluster
  bind &lt;Virtual IP&gt;:9292
  balance  source
  option  tcpka
  option  httpchk
  option  tcplog
  server controller1 10.​0.​0.​1:9292 check inter 2000 rise 2 fall 5
  server controller2 10.​0.​0.​2:9292 check inter 2000 rise 2 fall 5

listen glance_registry_cluster
  bind &lt;Virtual IP&gt;:9191
  balance  source
  option  tcpka
  option  tcplog
  server controller1 10.​0.​0.​1:9191 check inter 2000 rise 2 fall 5
  server controller2 10.​0.​0.​2:9191 check inter 2000 rise 2 fall 5

listen keystone_admin_cluster
  bind &lt;Virtual IP&gt;:35357
  balance  source
  option  tcpka
  option  httpchk
  option  tcplog
  server controller1 10.​0.​0.​1:35357 check inter 2000 rise 2 fall 5
  server controller2 10.​0.​0.​2.​42:35357 check inter 2000 rise 2 fall 5

listen keystone_public_internal_cluster
  bind &lt;Virtual IP&gt;:5000
  balance  source
  option  tcpka
  option  httpchk
  option  tcplog
  server controller1 10.​0.​0.​1:5000 check inter 2000 rise 2 fall 5
  server controller2 10.​0.​0.​2:5000 check inter 2000 rise 2 fall 5

listen nova_ec2_api_cluster
  bind &lt;Virtual IP&gt;:8773
  balance  source
  option  tcpka
  option  tcplog
  server controller1 10.​0.​0.​1:8773 check inter 2000 rise 2 fall 5
  server controller2 10.​0.​0.​2:8773 check inter 2000 rise 2 fall 5

listen nova_compute_api_cluster
  bind &lt;Virtual IP&gt;:8774
  balance  source
  option  tcpka
  option  httpchk
  option  tcplog
  server controller1 10.​0.​0.​1:8774 check inter 2000 rise 2 fall 5
  server controller2 10.​0.​0.​2:8774 check inter 2000 rise 2 fall 5

listen nova_metadata_api_cluster
  bind &lt;Virtual IP&gt;:8775
  balance  source
  option  tcpka
  option  tcplog
  server controller1 10.​0.​0.​1:8775 check inter 2000 rise 2 fall 5
  server controller2 10.​0.​0.​2:8775 check inter 2000 rise 2 fall 5

listen cinder_api_cluster
  bind &lt;Virtual IP&gt;:8776
  balance  source
  option  tcpka
  option  httpchk
  option  tcplog
  server controller1 10.​0.​0.​1:8776 check inter 2000 rise 2 fall 5
  server controller2 10.​0.​0.​2:8776 check inter 2000 rise 2 fall 5

listen ceilometer_api_cluster
  bind &lt;Virtual IP&gt;:8777
  balance  source
  option  tcpka
  option  httpchk
  option  tcplog
  server controller1 10.​0.​0.​1:8774 check inter 2000 rise 2 fall 5
  server controller2 10.​0.​0.​2:8774 check inter 2000 rise 2 fall 5

listen spice_cluster
  bind &lt;Virtual IP&gt;:6082
  balance  source
  option  tcpka
  option  tcplog
  server controller1 10.​0.​0.​1:6080 check inter 2000 rise 2 fall 5
  server controller2 10.​0.​0.​2:6080 check inter 2000 rise 2 fall 5

listen neutron_api_cluster
  bind &lt;Virtual IP&gt;:9696
  balance  source
  option  tcpka
  option  httpchk
  option  tcplog
  server controller1 10.​0.​0.​1:9696 check inter 2000 rise 2 fall 5
  server controller2 10.​0.​0.​2:9696 check inter 2000 rise 2 fall 5

listen swift_proxy_cluster
  bind &lt;Virtual IP&gt;:8080
  balance  source
  option  tcplog
  option  tcpka
  server controller1 10.​0.​0.​1:8080 check inter 2000 rise 2 fall 5
  server controller2 10.​0.​0.​2:8080 check inter 2000 rise 2 fall 5</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">After each change of this file, you should restart HAproxy.</fo:block></fo:flow></fo:page-sequence><fo:page-sequence xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" hyphenate="true" master-reference="body" language="en" format="1" initial-page-number="auto" force-page-count="no-force" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2"><fo:static-content xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" flow-name="xsl-region-before-first"><fo:block-container reference-orientation="90" absolute-position="fixed" top="-1in" overflow="visible" height="2in" width="30in" z-index="1"><fo:block padding-before=".45in" font-size="1.5em" color="gray" font-weight="bold"><fo:leader leader-pattern="use-content" leader-length="30in" letter-spacing=".1em">  </fo:leader></fo:block></fo:block-container><fo:block font-family="CartoGothic Std" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block>OpenStack High Availability Guide</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block>September 14, 2014</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block>current</fo:block></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" flow-name="xsl-region-before-odd"><fo:block-container reference-orientation="90" absolute-position="fixed" top="-1in" overflow="visible" height="2in" width="30in" z-index="1"><fo:block padding-before=".45in" font-size="1.5em" color="gray" font-weight="bold"><fo:leader leader-pattern="use-content" leader-length="30in" letter-spacing=".1em">  </fo:leader></fo:block></fo:block-container><fo:block font-family="CartoGothic Std" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block>OpenStack High Availability Guide</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block>September 14, 2014</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block>current</fo:block></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" flow-name="xsl-region-before-even"><fo:block-container reference-orientation="90" absolute-position="fixed" top="-1in" overflow="visible" height="2in" width="30in" z-index="1"><fo:block padding-before=".45in" font-size="1.5em" color="gray" font-weight="bold"><fo:leader leader-pattern="use-content" leader-length="30in" letter-spacing=".1em">  </fo:leader></fo:block></fo:block-container><fo:block font-family="CartoGothic Std" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block>OpenStack High Availability Guide</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block>September 14, 2014</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block>current</fo:block></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" flow-name="xsl-region-before-blank"><fo:block-container reference-orientation="90" absolute-position="fixed" top="-1in" overflow="visible" height="2in" width="30in" z-index="1"><fo:block padding-before=".45in" font-size="1.5em" color="gray" font-weight="bold"><fo:leader leader-pattern="use-content" leader-length="30in" letter-spacing=".1em">  </fo:leader></fo:block></fo:block-container><fo:block font-family="CartoGothic Std" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-footnote-separator"><fo:block><fo:leader color="black" leader-pattern="rule" leader-length="1in"/></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-first"><fo:block font-family="CartoGothic Std" margin-left="0pt"><fo:table xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-odd"><fo:block font-family="CartoGothic Std" margin-left="0pt"><fo:table xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-even"><fo:block font-family="CartoGothic Std" margin-left="0pt"><fo:table xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-blank"><fo:block font-family="CartoGothic Std" margin-left="0pt"><fo:table xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:flow flow-name="xsl-region-body" start-indent="4pc" end-indent="0pt"><fo:block id="ha-aa-controllers"><fo:block font-family="CartoGothic Std"><fo:block margin-left="0pt"><fo:block font-size="24.8832pt" font-weight="bold"><fo:block keep-with-next.within-column="always" space-before.optimum="10pt" space-before.minimum="10pt * 0.8" space-before.maximum="10pt * 1.2" hyphenate="false" text-align="start" start-indent="0pt" font-family="CartoGothic Std" color="rgb(196,0,34)" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2">9. OpenStack controller nodes</fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="1em" space-before.maximum="2em" space-after.minimum="0.5em" space-after.optimum="1em" space-after.maximum="2em" id="toc...ha-aa-controllers"><fo:block><fo:block><fo:block space-before.minimum="1em" space-before.optimum="1.5em" space-before.maximum="2em" space-after="0.5em" margin-left="0pt" start-indent="0pt" font-size="20.736pt" font-weight="bold" color="rgb(196,0,34)" font-family="CartoGothic Std">Table of Contents</fo:block></fo:block></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="_run_openstack_api_and_schedulers">Run OpenStack API and schedulers</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="_run_openstack_api_and_schedulers"><fo:page-number-citation ref-id="_run_openstack_api_and_schedulers"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="_memcached">Memcached</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="_memcached"><fo:page-number-citation ref-id="_memcached"/></fo:basic-link></fo:inline></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">OpenStack controller nodes contain:</fo:block><fo:list-block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em" provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em" id="d5e1106"><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d5e1107"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>
All OpenStack API services
</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d5e1109"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>
All OpenStack schedulers
</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d5e1111"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>
Memcached service
</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block><fo:block id="_run_openstack_api_and_schedulers"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0pt" font-family="CartoGothic Std"><fo:block keep-with-next.within-column="always"><fo:block font-family="CartoGothic Std" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt" color="rgb(196,0,34)"><fo:marker marker-class-name="section.head.marker">Run OpenStack API and schedulers</fo:marker><fo:block font-size="20.735999999999997pt">Run OpenStack API and schedulers</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block id="_api_services"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0pt" font-family="CartoGothic Std"><fo:block keep-with-next.within-column="always"><fo:block font-family="CartoGothic Std" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt" color="rgb(196,0,34)"><fo:marker marker-class-name="section.head.marker">API services</fo:marker><fo:block font-size="17.28pt">API services</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">All OpenStack projects have an API service for controlling all the resources in the Cloud.
In Active / Active mode, the most common setup is to scale-out these services on at least two nodes
and use load balancing and virtual IP (with HAproxy &amp; Keepalived in this setup).</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
            <fo:inline font-weight="bold">Configure API OpenStack services</fo:inline>
          </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">To configure our Cloud using Highly available and scalable API services, we need to ensure that:</fo:block><fo:list-block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em" provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em" id="d5e1121"><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d5e1122"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>
You use Virtual IP when configuring OpenStack Identity endpoints.
</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d5e1124"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>
All OpenStack configuration files should refer to Virtual IP.
</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
            <fo:inline font-weight="bold">In case of failure</fo:inline>
          </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The monitor check is quite simple since it just establishes a TCP connection to the API port. Comparing to the
Active / Passive mode using Corosync &amp; Resources Agents, we don’t check if the service is actually running).
That’s why all OpenStack API should be monitored by another tool, for example Nagios, with the goal to detect
failures in the Cloud Framework infrastructure.</fo:block></fo:block><fo:block id="_schedulers"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0pt" font-family="CartoGothic Std"><fo:block keep-with-next.within-column="always"><fo:block font-family="CartoGothic Std" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt" color="rgb(196,0,34)"><fo:marker marker-class-name="section.head.marker">Schedulers</fo:marker><fo:block font-size="17.28pt">Schedulers</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">OpenStack schedulers are used to determine how to dispatch compute, network and volume requests. The most
common setup is to use RabbitMQ as messaging system already documented in this guide.
Those services are connected to the messaging backend and can scale-out:</fo:block><fo:list-block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em" provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em" id="d5e1132"><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d5e1133"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>
nova-scheduler
</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d5e1135"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>
nova-conductor
</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d5e1137"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>
cinder-scheduler
</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d5e1139"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>
neutron-server
</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d5e1141"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>
ceilometer-collector
</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d5e1143"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>
heat-engine
</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Please refer to the RabbitMQ section for configure these services with multiple messaging servers.</fo:block></fo:block></fo:block><fo:block id="_memcached"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0pt" font-family="CartoGothic Std"><fo:block keep-with-next.within-column="always"><fo:block font-family="CartoGothic Std" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt" color="rgb(196,0,34)"><fo:marker marker-class-name="section.head.marker">Memcached</fo:marker><fo:block font-size="20.735999999999997pt">Memcached</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Most of OpenStack services use an application to offer persistence and store ephemeral data (like tokens).
Memcached is one of them and can scale-out easily without specific trick.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">To install and configure it, read the <fo:basic-link external-destination="url(http://code.google.com/p/memcached/wiki/NewStart)"><fo:inline color="blue" font-style="normal">official documentation</fo:inline></fo:basic-link>.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Memory caching is managed by oslo-incubator so the way to use multiple memcached servers is the same for all projects.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Example with two hosts:</fo:block><fo:block space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" font-family="monospace" font-size="85%" hyphenation-character="\" background-color="#E0E0E0" id="d5e1153" keep-together.within-column="always">memcached_servers =​ controller1:11211,​controller2:11211</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">By default, controller1 handles the caching service but if the host goes down, controller2 does the job.
For more information about memcached installation, see the OpenStack
Cloud Administrator Guide.</fo:block></fo:block></fo:flow></fo:page-sequence><fo:page-sequence xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" hyphenate="true" master-reference="body" language="en" format="1" initial-page-number="auto" force-page-count="no-force" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2"><fo:static-content xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" flow-name="xsl-region-before-first"><fo:block-container reference-orientation="90" absolute-position="fixed" top="-1in" overflow="visible" height="2in" width="30in" z-index="1"><fo:block padding-before=".45in" font-size="1.5em" color="gray" font-weight="bold"><fo:leader leader-pattern="use-content" leader-length="30in" letter-spacing=".1em">  </fo:leader></fo:block></fo:block-container><fo:block font-family="CartoGothic Std" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block>OpenStack High Availability Guide</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block>September 14, 2014</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block>current</fo:block></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" flow-name="xsl-region-before-odd"><fo:block-container reference-orientation="90" absolute-position="fixed" top="-1in" overflow="visible" height="2in" width="30in" z-index="1"><fo:block padding-before=".45in" font-size="1.5em" color="gray" font-weight="bold"><fo:leader leader-pattern="use-content" leader-length="30in" letter-spacing=".1em">  </fo:leader></fo:block></fo:block-container><fo:block font-family="CartoGothic Std" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block>OpenStack High Availability Guide</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block>September 14, 2014</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block>current</fo:block></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" flow-name="xsl-region-before-even"><fo:block-container reference-orientation="90" absolute-position="fixed" top="-1in" overflow="visible" height="2in" width="30in" z-index="1"><fo:block padding-before=".45in" font-size="1.5em" color="gray" font-weight="bold"><fo:leader leader-pattern="use-content" leader-length="30in" letter-spacing=".1em">  </fo:leader></fo:block></fo:block-container><fo:block font-family="CartoGothic Std" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block>OpenStack High Availability Guide</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block>September 14, 2014</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block>current</fo:block></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" flow-name="xsl-region-before-blank"><fo:block-container reference-orientation="90" absolute-position="fixed" top="-1in" overflow="visible" height="2in" width="30in" z-index="1"><fo:block padding-before=".45in" font-size="1.5em" color="gray" font-weight="bold"><fo:leader leader-pattern="use-content" leader-length="30in" letter-spacing=".1em">  </fo:leader></fo:block></fo:block-container><fo:block font-family="CartoGothic Std" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-footnote-separator"><fo:block><fo:leader color="black" leader-pattern="rule" leader-length="1in"/></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-first"><fo:block font-family="CartoGothic Std" margin-left="0pt"><fo:table xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-odd"><fo:block font-family="CartoGothic Std" margin-left="0pt"><fo:table xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-even"><fo:block font-family="CartoGothic Std" margin-left="0pt"><fo:table xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-blank"><fo:block font-family="CartoGothic Std" margin-left="0pt"><fo:table xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:flow flow-name="xsl-region-body" start-indent="4pc" end-indent="0pt"><fo:block id="ha-aa-network"><fo:block font-family="CartoGothic Std"><fo:block margin-left="0pt"><fo:block font-size="24.8832pt" font-weight="bold"><fo:block keep-with-next.within-column="always" space-before.optimum="10pt" space-before.minimum="10pt * 0.8" space-before.maximum="10pt * 1.2" hyphenate="false" text-align="start" start-indent="0pt" font-family="CartoGothic Std" color="rgb(196,0,34)" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2">10. OpenStack network nodes</fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="1em" space-before.maximum="2em" space-after.minimum="0.5em" space-after.optimum="1em" space-after.maximum="2em" id="toc...ha-aa-network"><fo:block><fo:block><fo:block space-before.minimum="1em" space-before.optimum="1.5em" space-before.maximum="2em" space-after="0.5em" margin-left="0pt" start-indent="0pt" font-size="20.736pt" font-weight="bold" color="rgb(196,0,34)" font-family="CartoGothic Std">Table of Contents</fo:block></fo:block></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="_run_neutron_dhcp_agent">Run neutron DHCP agent</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="_run_neutron_dhcp_agent"><fo:page-number-citation ref-id="_run_neutron_dhcp_agent"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="_run_neutron_l3_agent">Run neutron L3 agent</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="_run_neutron_l3_agent"><fo:page-number-citation ref-id="_run_neutron_l3_agent"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="_run_neutron_metadata_agent">Run neutron metadata agent</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="_run_neutron_metadata_agent"><fo:page-number-citation ref-id="_run_neutron_metadata_agent"/></fo:basic-link></fo:inline></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">OpenStack network nodes contain:</fo:block><fo:list-block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em" provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em" id="d5e1158"><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d5e1159"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>
neutron DHCP agent
</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d5e1161"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>
neutron L2 agent
</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d5e1163"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>
Neutron L3 agent
</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d5e1165"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>
neutron metadata agent
</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d5e1167"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>
neutron lbaas agent
</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em" id="d5e1169"><fo:list-block provisional-distance-between-starts="36pt + 18pt" provisional-label-separation="18pt"><fo:list-item><fo:list-item-label end-indent="label-end()"><fo:block><fo:external-graphic width="auto" height="auto" content-width="36pt" src="url(file:/Users/annegentle/src/ha-guide/doc/ha-guide/target/docbkx/images/note.svg)"/></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block font-size="14pt" font-weight="bold" hyphenate="false" keep-with-next.within-column="always" color="rgb(196,0,34)" font-family="CartoGothic Std">Note</fo:block><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The neutron L2 agent does not need to be highly available. It has to be
installed on each Data Forwarding Node and controls the virtual networking
drivers as Open vSwitch or Linux Bridge. One L2 agent runs per node
and controls its virtual interfaces. That’s why it cannot be distributed and
highly available.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:block><fo:block id="_run_neutron_dhcp_agent"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0pt" font-family="CartoGothic Std"><fo:block keep-with-next.within-column="always"><fo:block font-family="CartoGothic Std" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt" color="rgb(196,0,34)"><fo:marker marker-class-name="section.head.marker">Run neutron DHCP agent</fo:marker><fo:block font-size="20.735999999999997pt">Run neutron DHCP agent</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">OpenStack Networking service has a scheduler that
lets you run multiple agents across nodes. Also, the DHCP agent can be natively
highly available. For details, see <fo:basic-link external-destination="url(http://docs.openstack.org/trunk/config-reference/content/app_demo_multi_dhcp_agents.html)"><fo:inline color="blue" font-style="normal">OpenStack Configuration Reference</fo:inline></fo:basic-link>.</fo:block></fo:block><fo:block id="_run_neutron_l3_agent"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0pt" font-family="CartoGothic Std"><fo:block keep-with-next.within-column="always"><fo:block font-family="CartoGothic Std" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt" color="rgb(196,0,34)"><fo:marker marker-class-name="section.head.marker">Run neutron L3 agent</fo:marker><fo:block font-size="20.735999999999997pt">Run neutron L3 agent</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The neutron L3 agent is scalable thanks to the scheduler
that allows distribution of virtual routers across multiple nodes.
But there is no native feature to make these routers highly available.
At this time, the Active / Passive solution exists to run the Neutron L3
agent in failover mode with Pacemaker. See the Active / Passive
section of this guide.</fo:block></fo:block><fo:block id="_run_neutron_metadata_agent"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0pt" font-family="CartoGothic Std"><fo:block keep-with-next.within-column="always"><fo:block font-family="CartoGothic Std" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt" color="rgb(196,0,34)"><fo:marker marker-class-name="section.head.marker">Run neutron metadata agent</fo:marker><fo:block font-size="20.735999999999997pt">Run neutron metadata agent</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">There is no native feature to make this service highly available.
At this time, the Active / Passive solution exists to run the neutron
metadata agent in failover mode with Pacemaker. See the Active /
Passive section of this guide.</fo:block></fo:block></fo:flow></fo:page-sequence><fo:page-sequence xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" hyphenate="true" master-reference="back" language="en" format="1" initial-page-number="auto" force-page-count="no-force" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2"><fo:static-content xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" flow-name="xsl-region-before-first"><fo:block-container reference-orientation="90" absolute-position="fixed" top="-1in" overflow="visible" height="2in" width="30in" z-index="1"><fo:block padding-before=".45in" font-size="1.5em" color="gray" font-weight="bold"><fo:leader leader-pattern="use-content" leader-length="30in" letter-spacing=".1em">  </fo:leader></fo:block></fo:block-container><fo:block font-family="CartoGothic Std" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block>OpenStack High Availability Guide</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block>September 14, 2014</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block>current</fo:block></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" flow-name="xsl-region-before-odd"><fo:block-container reference-orientation="90" absolute-position="fixed" top="-1in" overflow="visible" height="2in" width="30in" z-index="1"><fo:block padding-before=".45in" font-size="1.5em" color="gray" font-weight="bold"><fo:leader leader-pattern="use-content" leader-length="30in" letter-spacing=".1em">  </fo:leader></fo:block></fo:block-container><fo:block font-family="CartoGothic Std" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block>OpenStack High Availability Guide</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block>September 14, 2014</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block>current</fo:block></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" flow-name="xsl-region-before-even"><fo:block-container reference-orientation="90" absolute-position="fixed" top="-1in" overflow="visible" height="2in" width="30in" z-index="1"><fo:block padding-before=".45in" font-size="1.5em" color="gray" font-weight="bold"><fo:leader leader-pattern="use-content" leader-length="30in" letter-spacing=".1em">  </fo:leader></fo:block></fo:block-container><fo:block font-family="CartoGothic Std" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block>OpenStack High Availability Guide</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block>September 14, 2014</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block>current</fo:block></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" flow-name="xsl-region-before-blank"><fo:block-container reference-orientation="90" absolute-position="fixed" top="-1in" overflow="visible" height="2in" width="30in" z-index="1"><fo:block padding-before=".45in" font-size="1.5em" color="gray" font-weight="bold"><fo:leader leader-pattern="use-content" leader-length="30in" letter-spacing=".1em">  </fo:leader></fo:block></fo:block-container><fo:block font-family="CartoGothic Std" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-footnote-separator"><fo:block><fo:leader color="black" leader-pattern="rule" leader-length="1in"/></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-first"><fo:block font-family="CartoGothic Std" margin-left="0pt"><fo:table xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-odd"><fo:block font-family="CartoGothic Std" margin-left="0pt"><fo:table xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-even"><fo:block font-family="CartoGothic Std" margin-left="0pt"><fo:table xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-blank"><fo:block font-family="CartoGothic Std" margin-left="0pt"><fo:table xmlns:date="http://exslt.org/dates-and-times" xmlns:exslt="http://exslt.org/common" table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:flow flow-name="xsl-region-body" start-indent="4pc" end-indent="0pt"><fo:block id="app_community_support"><fo:block><fo:block><fo:block margin-left="0pt" font-size="24.8832pt" font-weight="bold" font-family="CartoGothic Std"><fo:block keep-with-next.within-column="always" space-before.optimum="10pt" space-before.minimum="10pt * 0.8" space-before.maximum="10pt * 1.2" hyphenate="false" text-align="start" start-indent="0pt" font-family="CartoGothic Std" color="rgb(196,0,34)" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2">Appendix A. Community support</fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="1em" space-before.maximum="2em" space-after.minimum="0.5em" space-after.optimum="1em" space-after.maximum="2em" id="toc...app_community_support"><fo:block><fo:block><fo:block space-before.minimum="1em" space-before.optimum="1.5em" space-before.maximum="2em" space-after="0.5em" margin-left="0pt" start-indent="0pt" font-size="20.736pt" font-weight="bold" color="rgb(196,0,34)" font-family="CartoGothic Std">Table of Contents</fo:block></fo:block></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="support-documentation">Documentation</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="support-documentation"><fo:page-number-citation ref-id="support-documentation"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="support-ask_openstack">ask.openstack.org</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="support-ask_openstack"><fo:page-number-citation ref-id="support-ask_openstack"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="support-mailing-lists">OpenStack mailing lists</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="support-mailing-lists"><fo:page-number-citation ref-id="support-mailing-lists"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="support-wiki">The OpenStack wiki</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="support-wiki"><fo:page-number-citation ref-id="support-wiki"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="support-bugs-area">The Launchpad Bugs area</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="support-bugs-area"><fo:page-number-citation ref-id="support-bugs-area"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="support-irc-channel">The OpenStack IRC channel</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="support-irc-channel"><fo:page-number-citation ref-id="support-irc-channel"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="support-documentation-feedback">Documentation feedback</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="support-documentation-feedback"><fo:page-number-citation ref-id="support-documentation-feedback"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="distro-support">OpenStack distribution packages</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="distro-support"><fo:page-number-citation ref-id="distro-support"/></fo:basic-link></fo:inline></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The following resources are available to help you run and use
        OpenStack. The OpenStack community constantly improves and
        adds to the main features of OpenStack, but if you have
        any questions, do not hesitate to ask. Use the
        following resources to get OpenStack support,
        and troubleshoot your installations.</fo:block><fo:block id="support-documentation"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0pt" font-family="CartoGothic Std"><fo:block keep-with-next.within-column="always"><fo:block font-family="CartoGothic Std" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt" color="rgb(196,0,34)"><fo:marker marker-class-name="section.head.marker">Documentation</fo:marker><fo:block font-size="20.735999999999997pt">Documentation</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">For the available OpenStack documentation, see <fo:basic-link external-destination="url(http://docs.openstack.org)"><fo:inline color="blue" font-style="normal">docs.openstack.org</fo:inline></fo:basic-link>.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">To provide feedback on documentation, join and use the
                <fo:inline font-family="monospace"><fo:inline keep-together.within-line="always" hyphenate="false">&lt;openstack-docs@lists.openstack.org&gt;</fo:inline></fo:inline>
            mailing list at <fo:basic-link external-destination="url(http://lists.openstack.org/cgi-bin/mailman/listinfo/openstack-docs)"><fo:inline color="blue" font-style="normal">OpenStack Documentation Mailing List</fo:inline></fo:basic-link>, or <fo:basic-link external-destination="url(https://bugs.launchpad.net/openstack-manuals/+filebug)"><fo:inline color="blue" font-style="normal">report a bug</fo:inline></fo:basic-link>.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The following books explain how to install an OpenStack
            cloud and its associated components:</fo:block><fo:list-block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em" provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em" id="d5e1193"><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d5e1194"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>
                    <fo:basic-link external-destination="url(http://docs.openstack.org/trunk/install-guide/install/apt-debian/content/)"><fo:inline color="blue" font-style="normal">
                        <fo:inline font-style="italic">Installation Guide for Debian
                            7.0</fo:inline>
                    </fo:inline></fo:basic-link></fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d5e1198"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>
                    <fo:basic-link external-destination="url(http://docs.openstack.org/trunk/install-guide/install/zypper/content/)"><fo:inline color="blue" font-style="normal">
                        <fo:inline font-style="italic">Installation Guide for openSUSE and
                            SUSE Linux Enterprise Server</fo:inline>
                    </fo:inline></fo:basic-link></fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d5e1202"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>
                    <fo:basic-link external-destination="url(http://docs.openstack.org/trunk/install-guide/install/yum/content/)"><fo:inline color="blue" font-style="normal">
                        <fo:inline font-style="italic">Installation Guide for Red Hat
                            Enterprise Linux, CentOS, and
                            Fedora</fo:inline>
                    </fo:inline></fo:basic-link></fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d5e1206"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>
                    <fo:basic-link external-destination="url(http://docs.openstack.org/trunk/install-guide/install/apt/content/)"><fo:inline color="blue" font-style="normal">
                        <fo:inline font-style="italic">Installation Guide for Ubuntu 14.04
                            (LTS)</fo:inline>
                    </fo:inline></fo:basic-link></fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The following books explain how to configure and run an
            OpenStack cloud:</fo:block><fo:list-block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em" provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em" id="d5e1211"><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d5e1212"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block><fo:basic-link external-destination="url(http://docs.openstack.org/arch-design/content/)"><fo:inline color="blue" font-style="normal"><fo:inline font-style="italic">Architecture Design
                            Guide</fo:inline></fo:inline></fo:basic-link></fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d5e1216"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>
                    <fo:basic-link external-destination="url(http://docs.openstack.org/admin-guide-cloud/content/)"><fo:inline color="blue" font-style="normal"><fo:inline font-style="italic">Cloud Administrator
                            Guide</fo:inline></fo:inline></fo:basic-link></fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d5e1220"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block><fo:basic-link external-destination="url(http://docs.openstack.org/trunk/config-reference/content/)"><fo:inline color="blue" font-style="normal"><fo:inline font-style="italic">Configuration
                            Reference</fo:inline></fo:inline></fo:basic-link></fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d5e1224"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block><fo:basic-link external-destination="url(http://docs.openstack.org/ops/)"><fo:inline color="blue" font-style="normal"><fo:inline font-style="italic">Operations
                        Guide</fo:inline></fo:inline></fo:basic-link></fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d5e1228"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block><fo:basic-link external-destination="url(http://docs.openstack.org/high-availability-guide/content/)"><fo:inline color="blue" font-style="normal"><fo:inline font-style="italic">High Availability
                            Guide</fo:inline></fo:inline></fo:basic-link></fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d5e1232"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block><fo:basic-link external-destination="url(http://docs.openstack.org/sec/)"><fo:inline color="blue" font-style="normal"><fo:inline font-style="italic">Security
                        Guide</fo:inline></fo:inline></fo:basic-link></fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d5e1236"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block><fo:basic-link external-destination="url(http://docs.openstack.org/image-guide/content/)"><fo:inline color="blue" font-style="normal"><fo:inline font-style="italic">Virtual Machine Image
                            Guide</fo:inline></fo:inline></fo:basic-link></fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The following books explain how to use the OpenStack
            dashboard and command-line clients:</fo:block><fo:list-block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em" provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em" id="d5e1241"><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d5e1242"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>
                    <fo:basic-link external-destination="url(http://docs.openstack.org/api/quick-start/content/)"><fo:inline color="blue" font-style="normal"><fo:inline font-style="italic">API Quick
                        Start</fo:inline></fo:inline></fo:basic-link></fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d5e1246"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>
                    <fo:basic-link external-destination="url(http://docs.openstack.org/user-guide/content/)"><fo:inline color="blue" font-style="normal"><fo:inline font-style="italic">End User
                        Guide</fo:inline></fo:inline></fo:basic-link></fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d5e1250"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>
                    <fo:basic-link external-destination="url(http://docs.openstack.org/user-guide-admin/content/)"><fo:inline color="blue" font-style="normal"><fo:inline font-style="italic">Admin User
                        Guide</fo:inline></fo:inline></fo:basic-link></fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d5e1254"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>
                    <fo:basic-link external-destination="url(http://docs.openstack.org/cli-reference/content/)"><fo:inline color="blue" font-style="normal"><fo:inline font-style="italic">Command-Line Interface
                            Reference</fo:inline></fo:inline></fo:basic-link></fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The following documentation provides reference and
            guidance information for the OpenStack APIs:</fo:block><fo:list-block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em" provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em" id="d5e1259"><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d5e1260"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block><fo:basic-link external-destination="url(http://developer.openstack.org/api-ref.html)"><fo:inline color="blue" font-style="normal">OpenStack API Complete
                    Reference (HTML)</fo:inline></fo:basic-link></fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d5e1263"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block><fo:basic-link external-destination="url(http://developer.openstack.org/api-ref-guides/bk-api-ref.pdf)"><fo:inline color="blue" font-style="normal">API Complete Reference (PDF)</fo:inline></fo:basic-link></fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d5e1266"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block><fo:basic-link external-destination="url(http://docs.openstack.org/api/openstack-block-storage/2.0/content/)"><fo:inline color="blue" font-style="normal"><fo:inline font-style="italic">OpenStack Block Storage
                            Service API v2
                        Reference</fo:inline></fo:inline></fo:basic-link></fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d5e1270"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block><fo:basic-link external-destination="url(http://docs.openstack.org/api/openstack-compute/2/content/)"><fo:inline color="blue" font-style="normal"><fo:inline font-style="italic">OpenStack Compute API v2 and
                            Extensions
                    Reference</fo:inline></fo:inline></fo:basic-link></fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d5e1274"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block><fo:basic-link external-destination="url(http://docs.openstack.org/api/openstack-identity-service/2.0/content/)"><fo:inline color="blue" font-style="normal"><fo:inline font-style="italic">OpenStack Identity Service API
                            v2.0 Reference</fo:inline></fo:inline></fo:basic-link></fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d5e1278"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block><fo:basic-link external-destination="url(http://docs.openstack.org/api/openstack-image-service/2.0/content/)"><fo:inline color="blue" font-style="normal"><fo:inline font-style="italic">OpenStack Image Service API v2
                            Reference</fo:inline></fo:inline></fo:basic-link></fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d5e1282"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block><fo:basic-link external-destination="url(http://docs.openstack.org/api/openstack-network/2.0/content/)"><fo:inline color="blue" font-style="normal"><fo:inline font-style="italic">OpenStack Networking API v2.0
                            Reference</fo:inline></fo:inline></fo:basic-link></fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d5e1286"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block><fo:basic-link external-destination="url(http://docs.openstack.org/api/openstack-object-storage/1.0/content/)"><fo:inline color="blue" font-style="normal"><fo:inline font-style="italic">OpenStack Object Storage API
                            v1 Reference</fo:inline></fo:inline></fo:basic-link></fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The <fo:basic-link external-destination="url(http://docs.openstack.org/training-guides/content/)"><fo:inline color="blue" font-style="normal"><fo:inline font-style="italic">Training Guides</fo:inline></fo:inline></fo:basic-link>
            offer software training for cloud administration and
            management.</fo:block></fo:block><fo:block id="support-ask_openstack"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0pt" font-family="CartoGothic Std"><fo:block keep-with-next.within-column="always"><fo:block font-family="CartoGothic Std" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt" color="rgb(196,0,34)"><fo:marker marker-class-name="section.head.marker">ask.openstack.org</fo:marker><fo:block font-size="20.735999999999997pt">ask.openstack.org</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">During the set up or testing of OpenStack, you might
            have questions about how a specific task is completed or
            be in a situation where a feature does not work correctly.
            Use the <fo:basic-link external-destination="url(http://ask.openstack.org)"><fo:inline color="blue" font-style="normal">ask.openstack.org</fo:inline></fo:basic-link> site to ask questions and
            get answers. When you visit the <fo:basic-link external-destination="url(http://ask.openstack.org)"><fo:inline color="blue" font-style="normal">http://ask.openstack.org</fo:inline></fo:basic-link> site, scan the
            recently asked questions to see whether your question has
            already been answered. If not, ask a new question. Be sure
            to give a clear, concise summary in the title and provide
            as much detail as possible in the description. Paste in
            your command output or stack traces, links to screen
            shots, and any other information which
            might be useful.</fo:block></fo:block><fo:block id="support-mailing-lists"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0pt" font-family="CartoGothic Std"><fo:block keep-with-next.within-column="always"><fo:block font-family="CartoGothic Std" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt" color="rgb(196,0,34)"><fo:marker marker-class-name="section.head.marker">OpenStack mailing lists</fo:marker><fo:block font-size="20.735999999999997pt">OpenStack mailing lists</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">A great way to get answers and insights is to post your
            question or problematic scenario to the OpenStack mailing
            list. You can learn from and help others who might have
            similar issues. To subscribe or view the archives, go to
                <fo:basic-link external-destination="url(http://lists.openstack.org/cgi-bin/mailman/listinfo/openstack)"><fo:inline color="blue" font-style="normal">http://lists.openstack.org/cgi-bin/mailman/listinfo/openstack</fo:inline></fo:basic-link>.
            You might be interested in the other mailing lists for
            specific projects or development, which you can find <fo:basic-link external-destination="url(http://wiki.openstack.org/MailingLists)"><fo:inline color="blue" font-style="normal">on
                the wiki</fo:inline></fo:basic-link>. A description of all mailing lists is
            available at <fo:basic-link external-destination="url(http://wiki.openstack.org/MailingLists)"><fo:inline color="blue" font-style="normal">http://wiki.openstack.org/MailingLists</fo:inline></fo:basic-link>.</fo:block></fo:block><fo:block id="support-wiki"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0pt" font-family="CartoGothic Std"><fo:block keep-with-next.within-column="always"><fo:block font-family="CartoGothic Std" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt" color="rgb(196,0,34)"><fo:marker marker-class-name="section.head.marker">The OpenStack wiki</fo:marker><fo:block font-size="20.735999999999997pt">The OpenStack wiki</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The <fo:basic-link external-destination="url(http://wiki.openstack.org/)"><fo:inline color="blue" font-style="normal">OpenStack
                wiki</fo:inline></fo:basic-link> contains a broad range of topics but some of the
            information can be difficult to find or is a few pages deep.
            Fortunately, the wiki search feature enables you to search by title
            or content. If you search for specific information, such as about
            networking or nova, you can find a large amount of relevant
            material. More is being added all the time, so be sure to check back
            often. You can find the search box in the upper-right corner of any
            OpenStack wiki page.</fo:block></fo:block><fo:block id="support-bugs-area"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0pt" font-family="CartoGothic Std"><fo:block keep-with-next.within-column="always"><fo:block font-family="CartoGothic Std" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt" color="rgb(196,0,34)"><fo:marker marker-class-name="section.head.marker">The Launchpad Bugs area</fo:marker><fo:block font-size="20.735999999999997pt">The Launchpad Bugs area</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The OpenStack community values your set up and testing efforts and
            wants your feedback. To log a bug, you must sign up for a Launchpad
            account at <fo:basic-link external-destination="url(https://launchpad.net/+login)"><fo:inline color="blue" font-style="normal">https://launchpad.net/+login</fo:inline></fo:basic-link>. You can view existing bugs
            and report bugs in the Launchpad Bugs area. Use the search feature
            to determine whether the bug has already been reported or already
            been fixed. If it still seems like your bug is unreported, fill out
            a bug report.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Some tips:</fo:block><fo:list-block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em" provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em" id="d5e1313"><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d5e1314"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>Give a clear, concise summary.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d5e1316"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>Provide as much detail as possible in the
                    description. Paste in your command output or stack
                    traces, links to screen shots, and any
                    other information which might be useful.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d5e1318"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>Be sure to include the software and package
                    versions that you are using, especially if you are
                    using a development branch, such as,
                        <fo:inline font-family="monospace">"Juno release" vs git commit
                        bc79c3ecc55929bac585d04a03475b72e06a3208</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d5e1321"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>Any deployment-specific information is helpful, such as
                    whether you are using Ubuntu 14.04 or are performing a
                    multi-node installation.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The following Launchpad Bugs areas are available:</fo:block><fo:list-block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em" provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em" id="d5e1324"><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d5e1325"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block><fo:basic-link external-destination="url(https://bugs.launchpad.net/cinder)"><fo:inline color="blue" font-style="normal">Bugs: OpenStack Block Storage
                    (cinder)</fo:inline></fo:basic-link></fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d5e1328"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block><fo:basic-link external-destination="url(https://bugs.launchpad.net/nova)"><fo:inline color="blue" font-style="normal">Bugs: OpenStack Compute (nova)</fo:inline></fo:basic-link></fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d5e1331"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block><fo:basic-link external-destination="url(https://bugs.launchpad.net/horizon)"><fo:inline color="blue" font-style="normal">Bugs: OpenStack Dashboard
                    (horizon)</fo:inline></fo:basic-link></fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d5e1334"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block><fo:basic-link external-destination="url(https://bugs.launchpad.net/keystone)"><fo:inline color="blue" font-style="normal">Bugs: OpenStack Identity
                    (keystone)</fo:inline></fo:basic-link></fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d5e1337"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block><fo:basic-link external-destination="url(https://bugs.launchpad.net/glance)"><fo:inline color="blue" font-style="normal">Bugs: OpenStack Image Service
                    (glance)</fo:inline></fo:basic-link></fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d5e1340"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block><fo:basic-link external-destination="url(https://bugs.launchpad.net/neutron)"><fo:inline color="blue" font-style="normal">Bugs: OpenStack Networking
                    (neutron)</fo:inline></fo:basic-link></fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d5e1343"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block><fo:basic-link external-destination="url(https://bugs.launchpad.net/swift)"><fo:inline color="blue" font-style="normal">Bugs: OpenStack Object Storage
                    (swift)</fo:inline></fo:basic-link></fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d5e1346"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block><fo:basic-link external-destination="url(https://bugs.launchpad.net/ironic)"><fo:inline color="blue" font-style="normal">Bugs: Bare Metal (ironic)</fo:inline></fo:basic-link></fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d5e1349"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block><fo:basic-link external-destination="url(https://bugs.launchpad.net/sahara)"><fo:inline color="blue" font-style="normal">Bugs: Data Processing Service
                    (sahara)</fo:inline></fo:basic-link></fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d5e1352"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block><fo:basic-link external-destination="url(https://bugs.launchpad.net/trove)"><fo:inline color="blue" font-style="normal">Bugs: Database Service (trove)</fo:inline></fo:basic-link></fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d5e1355"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block><fo:basic-link external-destination="url(https://bugs.launchpad.net/heat)"><fo:inline color="blue" font-style="normal">Bugs: Orchestration (heat)</fo:inline></fo:basic-link></fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d5e1358"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block><fo:basic-link external-destination="url(https://bugs.launchpad.net/ceilometer)"><fo:inline color="blue" font-style="normal">Bugs: Telemetry (ceilometer)</fo:inline></fo:basic-link></fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d5e1361"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block><fo:basic-link external-destination="url(https://bugs.launchpad.net/marconi)"><fo:inline color="blue" font-style="normal">Bugs: Queue Service (marconi)</fo:inline></fo:basic-link></fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d5e1364"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block><fo:basic-link external-destination="url(https://bugs.launchpad.net/openstack-api-site)"><fo:inline color="blue" font-style="normal">Bugs: OpenStack API Documentation
                        (developer.openstack.org)</fo:inline></fo:basic-link></fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d5e1367"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block><fo:basic-link external-destination="url(https://bugs.launchpad.net/openstack-manuals)"><fo:inline color="blue" font-style="normal">Bugs: OpenStack Documentation
                        (docs.openstack.org)</fo:inline></fo:basic-link></fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:block><fo:block id="support-irc-channel"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0pt" font-family="CartoGothic Std"><fo:block keep-with-next.within-column="always"><fo:block font-family="CartoGothic Std" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt" color="rgb(196,0,34)"><fo:marker marker-class-name="section.head.marker">The OpenStack IRC channel</fo:marker><fo:block font-size="20.735999999999997pt">The OpenStack IRC channel</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The OpenStack community lives in the #openstack IRC channel on the
            Freenode network. You can hang out, ask questions, or get immediate
            feedback for urgent and pressing issues. To install an IRC client or
            use a browser-based client, go to <fo:basic-link external-destination="url(http://webchat.freenode.net)"><fo:inline color="blue" font-style="normal">http://webchat.freenode.net/</fo:inline></fo:basic-link>. You can also use Colloquy
            (Mac OS X, <fo:basic-link external-destination="url(http://colloquy.info/)"><fo:inline color="blue" font-style="normal">http://colloquy.info/</fo:inline></fo:basic-link>), mIRC (Windows, <fo:basic-link external-destination="url(http://www.mirc.com/)"><fo:inline color="blue" font-style="normal">http://www.mirc.com/</fo:inline></fo:basic-link>),
            or XChat (Linux). When you are in the IRC channel and want to share
            code or command output, the generally accepted method is to use a
            Paste Bin. The OpenStack project has one at <fo:basic-link external-destination="url(http://paste.openstack.org)"><fo:inline color="blue" font-style="normal">http://paste.openstack.org</fo:inline></fo:basic-link>. Just paste your longer
            amounts of text or logs in the web form and you get a URL that you
            can paste into the channel. The OpenStack IRC channel is
                <fo:inline font-family="monospace">#openstack</fo:inline> on
                <fo:inline font-family="monospace">irc.freenode.net</fo:inline>. You can find a list of all
            OpenStack IRC channels at <fo:basic-link external-destination="url(https://wiki.openstack.org/wiki/IRC)"><fo:inline color="blue" font-style="normal">https://wiki.openstack.org/wiki/IRC</fo:inline></fo:basic-link>.</fo:block></fo:block><fo:block id="support-documentation-feedback"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0pt" font-family="CartoGothic Std"><fo:block keep-with-next.within-column="always"><fo:block font-family="CartoGothic Std" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt" color="rgb(196,0,34)"><fo:marker marker-class-name="section.head.marker">Documentation feedback</fo:marker><fo:block font-size="20.735999999999997pt">Documentation feedback</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">To provide feedback on documentation, join and use the
            <fo:inline font-family="monospace"><fo:inline keep-together.within-line="always" hyphenate="false">&lt;openstack-docs@lists.openstack.org&gt;</fo:inline></fo:inline> mailing list at
            <fo:basic-link external-destination="url(http://lists.openstack.org/cgi-bin/mailman/listinfo/openstack-docs)"><fo:inline color="blue" font-style="normal">OpenStack
                Documentation Mailing List</fo:inline></fo:basic-link>, or <fo:basic-link external-destination="url(https://bugs.launchpad.net/openstack-manuals/+filebug)"><fo:inline color="blue" font-style="normal">report a bug</fo:inline></fo:basic-link>.</fo:block></fo:block><fo:block id="distro-support"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0pt" font-family="CartoGothic Std"><fo:block keep-with-next.within-column="always"><fo:block font-family="CartoGothic Std" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt" color="rgb(196,0,34)"><fo:marker marker-class-name="section.head.marker">OpenStack distribution packages</fo:marker><fo:block font-size="20.735999999999997pt">OpenStack distribution packages</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The following Linux distributions provide
            community-supported packages for OpenStack:</fo:block><fo:list-block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em" provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em" id="d5e1389"><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d5e1390"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block><fo:inline font-weight="bold">Debian:</fo:inline>
                    <fo:basic-link external-destination="url(http://wiki.debian.org/OpenStack)"><fo:inline color="blue" font-style="normal">http://wiki.debian.org/OpenStack</fo:inline></fo:basic-link></fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d5e1394"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block><fo:inline font-weight="bold">CentOS, Fedora, and Red
                        Hat Enterprise Linux:</fo:inline>
                    <fo:basic-link external-destination="url(http://openstack.redhat.com/)"><fo:inline color="blue" font-style="normal">http://openstack.redhat.com/</fo:inline></fo:basic-link></fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d5e1398"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block><fo:inline font-weight="bold">openSUSE and SUSE Linux
                        Enterprise Server:</fo:inline>
                    <fo:basic-link external-destination="url(http://en.opensuse.org/Portal:OpenStack)"><fo:inline color="blue" font-style="normal">http://en.opensuse.org/Portal:OpenStack</fo:inline></fo:basic-link></fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d5e1402"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block><fo:inline font-weight="bold">Ubuntu:</fo:inline>
                    <fo:basic-link external-destination="url(https://wiki.ubuntu.com/ServerTeam/CloudArchive)"><fo:inline color="blue" font-style="normal">https://wiki.ubuntu.com/ServerTeam/CloudArchive</fo:inline></fo:basic-link></fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:block></fo:flow></fo:page-sequence></fo:root>